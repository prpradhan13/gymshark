//
//  Copyright 2019 mParticle, Inc.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.
//
//  Uses portions of code from jQuery
//  jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license

window.mParticle = window.mParticle || {};;
window.mParticle.config = window.mParticle.config || {};;
window.mParticle.config.serviceUrl = 'jssdk.mparticle.com/v2/JS/';;
window.mParticle.config.secureServiceUrl = 'jssdks.mparticle.com/v2/JS/';;
window.mParticle.config.appName = window.mParticle.config.appName || "Gymshark";;
window.mParticle.config.minWebviewBridgeVersion = 2;
window.mParticle.config.workspaceToken = "98FE4316";;
window.mParticle.config.aliasMaxWindow = 90;
window.mParticle.config.kitConfigs = window.mParticle.config.kitConfigs || [];;
window.mParticle.config.pixelConfigs = window.mParticle.config.pixelConfigs || [];;
window.mParticle.config.flags = {"offlineStorage":"100","eventsV3":"100","eventBatchingIntervalMillis":"5000"};
window.mParticle.config.dataPlan = window.mParticle.config.dataPlan || {};;
window.mParticle.config.dataPlan.document = null;
var mParticle=function(){function a(n){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},a(n)}function kr(n,t){var i,r;if(a(n)!=="object"||n===null)return n;if(i=n[Symbol.toPrimitive],i!==undefined){if(r=i.call(n,t||"default"),a(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.");}return(t==="string"?String:Number)(n)}function dr(n){var t=kr(n,"string");return a(t)==="symbol"?t:String(t)}function ei(n,t,i){return t=dr(t),t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function ti(n,t){function i(){this.constructor=n}if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");oi(n,t);n.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function at(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})}function vt(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f}function nu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n["default"]:n}function ut(n){var t=0,r,i;if(n===undefined||n===null)return 0;if(n=n.toString().toLowerCase(),Array.prototype.reduce)return n.split("").reduce(function(n,t){return n=(n<<5)-n+t.charCodeAt(0),n&n},0);if(n.length===0)return t;for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r,t=t&t;return t}function gi(n,t,r){var f,s,e,h,o,c;if(!n||!t||t.length<1)return null;var l=r.Identity.getCurrentUser(),a=[],u=null;for(f=0,s=t;f<s.length;f++)e=s[f],e&&(u=e,h=hi(e),h&&a.push(h));return u?(o=null,y(u.ConsentState)?y(l)||(o=l.getConsentState()):o=u.ConsentState,c={source_request_id:r._Helpers.generateUniqueId(),mpid:n,timestamp_unixtime_ms:(new Date).getTime(),environment:u.Debug?i.BatchEnvironmentEnum.development:i.BatchEnvironmentEnum.production,events:a,mp_deviceid:u.DeviceId,sdk_version:u.SDKVersion,application_info:{application_version:u.AppVersion,application_name:u.AppName,package:u.Package,sideloaded_kits_count:r._Store.sideloadedKitsCount},device_info:{platform:i.DeviceInformationPlatformEnum.web,screen_width:window.screen.width,screen_height:window.screen.height},user_attributes:u.UserAttributes,user_identities:tf(u.UserIdentities),consent_state:du(o),integration_attributes:u.IntegrationAttributes},u.DataPlan&&u.DataPlan.PlanId&&(c.context={data_plan:{plan_id:u.DataPlan.PlanId,plan_version:u.DataPlan.PlanVersion||undefined}}),c):null}function du(n){if(y(n))return null;return{gdpr:gu(n.getGDPRConsentState()),ccpa:nf(n.getCCPAConsentState())}}function gu(n){var i,t;if(!n)return null;i={};for(t in n)n.hasOwnProperty(t)&&(i[t]={consented:n[t].Consented,hardware_id:n[t].HardwareId,document:n[t].ConsentDocument,timestamp_unixtime_ms:n[t].Timestamp,location:n[t].Location});return i}function nf(n){if(!n)return null;return{data_sale_opt_out:{consented:n.Consented,hardware_id:n.HardwareId,document:n.ConsentDocument,timestamp_unixtime_ms:n.Timestamp,location:n.Location}}}function tf(t){var i,u,f,r;if(!t||!t.length)return null;for(i={},u=0,f=t;u<f.length;u++){r=f[u];switch(r.Type){case n.IdentityType.CustomerId:i.customer_id=r.Identity;break;case n.IdentityType.Email:i.email=r.Identity;break;case n.IdentityType.Facebook:i.facebook=r.Identity;break;case n.IdentityType.FacebookCustomAudienceId:i.facebook_custom_audience_id=r.Identity;break;case n.IdentityType.Google:i.google=r.Identity;break;case n.IdentityType.Microsoft:i.microsoft=r.Identity;break;case n.IdentityType.Other:i.other=r.Identity;break;case n.IdentityType.Other2:i.other_id_2=r.Identity;break;case n.IdentityType.Other3:i.other_id_3=r.Identity;break;case n.IdentityType.Other4:i.other_id_4=r.Identity;break;case n.IdentityType.Other5:i.other_id_5=r.Identity;break;case n.IdentityType.Other6:i.other_id_6=r.Identity;break;case n.IdentityType.Other7:i.other_id_7=r.Identity;break;case n.IdentityType.Other8:i.other_id_8=r.Identity;break;case n.IdentityType.Other9:i.other_id_9=r.Identity;break;case n.IdentityType.Other10:i.other_id_10=r.Identity;break;case n.IdentityType.MobileNumber:i.mobile_number=r.Identity;break;case n.IdentityType.PhoneNumber2:i.phone_number_2=r.Identity;break;case n.IdentityType.PhoneNumber3:i.phone_number_3=r.Identity}}return i}function hi(t){if(!t)return null;switch(t.EventDataType){case n.MessageType.AppStateTransition:return af(t);case n.MessageType.Commerce:return cf(t);case n.MessageType.CrashReport:return lf(t);case n.MessageType.OptOut:return wf(t);case n.MessageType.PageEvent:return bf(t);case n.MessageType.PageView:return pf(t);case n.MessageType.Profile:return null;case n.MessageType.SessionEnd:return vf(t);case n.MessageType.SessionStart:return yf(t);case n.MessageType.UserAttributeChange:return gf(t);case n.MessageType.UserIdentityChange:return ne(t)}return null}function rf(n){if(!n)return i.ProductActionActionEnum.unknown;switch(n){case w.AddToCart:return i.ProductActionActionEnum.addToCart;case w.AddToWishlist:return i.ProductActionActionEnum.addToWishlist;case w.Checkout:return i.ProductActionActionEnum.checkout;case w.CheckoutOption:return i.ProductActionActionEnum.checkoutOption;case w.Click:return i.ProductActionActionEnum.click;case w.Purchase:return i.ProductActionActionEnum.purchase;case w.Refund:return i.ProductActionActionEnum.refund;case w.RemoveFromCart:return i.ProductActionActionEnum.removeFromCart;case w.RemoveFromWishlist:return i.ProductActionActionEnum.removeFromWishlist;case w.ViewDetail:return i.ProductActionActionEnum.viewDetail;default:return i.ProductActionActionEnum.unknown}}function uf(n){if(!n.ProductAction)return null;return{action:rf(n.ProductAction.ProductActionType),checkout_step:n.ProductAction.CheckoutStep,checkout_options:n.ProductAction.CheckoutOptions,transaction_id:n.ProductAction.TransactionId,affiliation:n.ProductAction.Affiliation,total_amount:n.ProductAction.TotalAmount,tax_amount:n.ProductAction.TaxAmount,shipping_amount:n.ProductAction.ShippingAmount,coupon_code:n.ProductAction.CouponCode,products:ci(n.ProductAction.ProductList)}}function ci(n){var r,i,u,t,f;if(!n||!n.length)return null;for(r=[],i=0,u=n;i<u.length;i++)t=u[i],f={id:t.Sku,name:t.Name,brand:t.Brand,category:t.Category,variant:t.Variant,total_product_amount:t.TotalAmount,position:t.Position,price:t.Price,quantity:t.Quantity,coupon_code:t.CouponCode,custom_attributes:t.Attributes},r.push(f);return r}function ff(n){if(!n.PromotionAction)return null;return{action:n.PromotionAction.PromotionActionType,promotions:ef(n.PromotionAction.PromotionList)}}function ef(n){var r,i,u,t,f;if(!n||!n.length)return null;for(r=[],i=0,u=n;i<u.length;i++)t=u[i],f={id:t.Id,name:t.Name,creative:t.Creative,position:t.Position},r.push(f);return r}function sf(n){var i,t,r,u,f;if(!n.ProductImpressions)return null;for(i=[],t=0,r=n.ProductImpressions;t<r.length;t++)u=r[t],f={product_impression_list:u.ProductImpressionList,products:ci(u.ProductList)},i.push(f);return i}function hf(n){if(!n.ShoppingCart||!n.ShoppingCart.ProductList||!n.ShoppingCart.ProductList.length)return null;return{products:ci(n.ShoppingCart.ProductList)}}function cf(n){var r=d(n),t={custom_flags:n.CustomFlags,product_action:uf(n),promotion_action:ff(n),product_impressions:sf(n),shopping_cart:hf(n),currency_code:n.CurrencyCode};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.commerceEvent,data:t}}function lf(n){var r=d(n),t={message:n.EventName};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.crashReport,data:t}}function af(n){var r=d(n),t={application_transition_type:i.ApplicationStateTransitionEventDataApplicationTransitionTypeEnum.applicationInitialized,is_first_run:n.IsFirstRun,is_upgrade:!1,launch_referral:n.LaunchReferral};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.applicationStateTransition,data:t}}function vf(n){var r=d(n),t={session_duration_ms:n.SessionLength};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.sessionEnd,data:t}}function yf(n){var r=d(n),t={};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.sessionStart,data:t}}function pf(n){var r=d(n),t={custom_flags:n.CustomFlags,screen_name:n.EventName};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.screenView,data:t}}function wf(n){var r=d(n),t={is_opted_out:n.OptOut};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.optOut,data:t}}function bf(n){var r=d(n),t={custom_event_type:kf(n.EventCategory),custom_flags:n.CustomFlags,event_name:n.EventName};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.customEvent,data:t}}function kf(t){switch(t){case n.EventType.Other:return i.CustomEventDataCustomEventTypeEnum.other;case n.EventType.Location:return i.CustomEventDataCustomEventTypeEnum.location;case n.EventType.Navigation:return i.CustomEventDataCustomEventTypeEnum.navigation;case n.EventType.Search:return i.CustomEventDataCustomEventTypeEnum.search;case n.EventType.Social:return i.CustomEventDataCustomEventTypeEnum.social;case n.EventType.Transaction:return i.CustomEventDataCustomEventTypeEnum.transaction;case n.EventType.UserContent:return i.CustomEventDataCustomEventTypeEnum.userContent;case n.EventType.UserPreference:return i.CustomEventDataCustomEventTypeEnum.userPreference;case n.EventType.Media:return i.CustomEventDataCustomEventTypeEnum.media;case n.CommerceEventType.ProductAddToCart:return i.CommerceEventDataCustomEventTypeEnum.addToCart;case n.CommerceEventType.ProductAddToWishlist:return i.CommerceEventDataCustomEventTypeEnum.addToWishlist;case n.CommerceEventType.ProductCheckout:return i.CommerceEventDataCustomEventTypeEnum.checkout;case n.CommerceEventType.ProductCheckoutOption:return i.CommerceEventDataCustomEventTypeEnum.checkoutOption;case n.CommerceEventType.ProductClick:return i.CommerceEventDataCustomEventTypeEnum.click;case n.CommerceEventType.ProductImpression:return i.CommerceEventDataCustomEventTypeEnum.impression;case n.CommerceEventType.ProductPurchase:return i.CommerceEventDataCustomEventTypeEnum.purchase;case n.CommerceEventType.ProductRefund:return i.CommerceEventDataCustomEventTypeEnum.refund;case n.CommerceEventType.ProductRemoveFromCart:return i.CommerceEventDataCustomEventTypeEnum.removeFromCart;case n.CommerceEventType.ProductRemoveFromWishlist:return i.CommerceEventDataCustomEventTypeEnum.removeFromWishlist;case n.CommerceEventType.ProductViewDetail:return i.CommerceEventDataCustomEventTypeEnum.viewDetail;case n.CommerceEventType.PromotionClick:return i.CommerceEventDataCustomEventTypeEnum.promotionClick;case n.CommerceEventType.PromotionView:return i.CommerceEventDataCustomEventTypeEnum.promotionView;default:return i.CustomEventDataCustomEventTypeEnum.unknown}}function d(n){return{timestamp_unixtime_ms:n.Timestamp,session_uuid:n.SessionId,session_start_unixtime_ms:n.SessionStartDate,custom_attributes:n.EventAttributes,location:df(n.Location),source_message_id:n.SourceMessageId}}function df(n){return n&&Object.keys(n).length?{latitude:n.lat,longitude:n.lng}:null}function gf(n){var r=d(n),t={user_attribute_name:n.UserAttributeChanges.UserAttributeName,"new":n.UserAttributeChanges.New,old:n.UserAttributeChanges.Old,deleted:n.UserAttributeChanges.Deleted,is_new_attribute:n.UserAttributeChanges.IsNewAttribute};return t=tt(tt({},t),r),{event_type:i.EventTypeEnum.userAttributeChange,data:t}}function ne(n){var r=d(n),t={"new":{identity_type:nr(n.UserIdentityChanges.New.IdentityType),identity:n.UserIdentityChanges.New.Identity||null,timestamp_unixtime_ms:n.Timestamp,created_this_batch:n.UserIdentityChanges.New.CreatedThisBatch},old:{identity_type:nr(n.UserIdentityChanges.Old.IdentityType),identity:n.UserIdentityChanges.Old.Identity||null,timestamp_unixtime_ms:n.Timestamp,created_this_batch:n.UserIdentityChanges.Old.CreatedThisBatch}};return t=Object.assign(t,r),{event_type:i.EventTypeEnum.userIdentityChange,data:t}}function nr(n){switch(n){case o.other:return i.IdentityTypeEnum.other;case o.customerId:return i.IdentityTypeEnum.customerId;case o.facebook:return i.IdentityTypeEnum.facebook;case o.twitter:return i.IdentityTypeEnum.twitter;case o.google:return i.IdentityTypeEnum.google;case o.microsoft:return i.IdentityTypeEnum.microsoft;case o.yahoo:return i.IdentityTypeEnum.yahoo;case o.email:return i.IdentityTypeEnum.email;case o.alias:return i.IdentityTypeEnum.alias;case o.facebookCustomAudienceId:return i.IdentityTypeEnum.facebookCustomAudienceId;case o.otherId2:return i.IdentityTypeEnum.otherId2;case o.otherId3:return i.IdentityTypeEnum.otherId3;case o.otherId4:return i.IdentityTypeEnum.otherId4;case o.otherId5:return i.IdentityTypeEnum.otherId5;case o.otherId6:return i.IdentityTypeEnum.otherId6;case o.otherId7:return i.IdentityTypeEnum.otherId7;case o.otherId8:return i.IdentityTypeEnum.otherId8;case o.otherId9:return i.IdentityTypeEnum.otherId9;case o.otherId10:return i.IdentityTypeEnum.otherId10;case o.mobileNumber:return i.IdentityTypeEnum.mobileNumber;case o.phoneNumber2:return i.IdentityTypeEnum.phoneNumber2;case o.phoneNumber3:return i.IdentityTypeEnum.phoneNumber3}}function ee(i,r){this.uploader=null;var u=this;this.queueEventForBatchUpload=function(n){if(!this.uploader){var r=i._Helpers.getFeatureFlag(t.FeatureFlags.EventBatchingIntervalMillis);this.uploader=new re(i,r)}this.uploader.queueEvent(n);i._Persistence.update()};this.processQueuedEvents=function(){var r,n=i.Identity.getCurrentUser(),t;n&&(r=n.getMPID());i._Store.eventQueue.length&&r&&(t=i._Store.eventQueue,i._Store.eventQueue=[],this.appendUserInfoToEvents(n,t),t.forEach(function(n){u.sendEventToServer(n)}))};this.appendUserInfoToEvents=function(n,t){t.forEach(function(t){t.MPID||i._ServerModel.appendUserInfo(n,t)})};this.sendEventToServer=function(u,f){var s=i._Helpers.extend({shouldUploadEvent:!0},f),o,e;if(i._Store.webviewBridgeEnabled){i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.LogEvent,JSON.stringify(u));return}if(e=i.Identity.getCurrentUser(),e&&(o=e.getMPID()),i._Store.requireDelay=i._Helpers.isDelayedByIntegration(i._preInit.integrationDelays,i._Store.integrationDelayTimeoutStart,Date.now()),!o||i._Store.requireDelay||!i._Store.configurationLoaded){i.Logger.verbose("Event was added to eventQueue. eventQueue will be processed once a valid MPID is returned or there is no more integration imposed delay.");i._Store.eventQueue.push(u);return}(this.processQueuedEvents(),y(u))||(s.shouldUploadEvent&&this.queueEventForBatchUpload(u),u.EventName!==n.MessageType.AppStateTransition&&(r&&r.kitBlockingEnabled&&(u=r.createBlockedEvent(u)),u&&i._Forwarders.sendEventToForwarders(u)))};this.sendBatchForwardingStatsToServer=function(n,t){var r,u;try{r=i._Helpers.createServiceUrl(i._Store.SDKConfig.v2SecureServiceUrl,i._Store.devToken);u={uuid:i._Helpers.generateUniqueId(),data:n};t&&(t.open("post",r+"/Forwarding"),t.send(JSON.stringify(u)))}catch(f){i.Logger.error("Error sending forwarding stats to mParticle servers.")}};this.sendSingleForwardingStatsToServer=function(n){var r,u,f,t;try{f=function(){t.readyState===4&&t.status===202&&i.Logger.verbose("Successfully sent  "+t.statusText+" from server")};t=i._Helpers.createXHR(f);r=i._Helpers.createServiceUrl(i._Store.SDKConfig.v1SecureServiceUrl,i._Store.devToken);u=n;t&&(t.open("post",r+"/Forwarding"),t.send(JSON.stringify(u)))}catch(e){i.Logger.error("Error sending forwarding stats to mParticle servers.")}};this.prepareForwardingStats=function(n,r){var f,e=i._Forwarders.getForwarderStatsQueue();n&&n.isVisible&&(f={mid:n.id,esid:n.eventSubscriptionId,n:r.EventName,attrs:r.EventAttributes,sdk:r.SDKVersion,dt:r.EventDataType,et:r.EventCategory,dbg:r.Debug,ct:r.Timestamp,eec:r.ExpandedEventCount,dp:r.DataPlan},i._Helpers.getFeatureFlag(t.FeatureFlags.ReportBatching)?(e.push(f),i._Forwarders.setForwarderStatsQueue(e)):u.sendSingleForwardingStatsToServer(f))}}function oe(t){var i=this;this.canLog=function(){return t._Store.isEnabled&&(t._Store.devToken||t._Store.webviewBridgeEnabled)?!0:!1};this.getFeatureFlag=function(n){return t._Store.SDKConfig.flags.hasOwnProperty(n)?t._Store.SDKConfig.flags[n]:null};this.invokeCallback=function(n,r,u,f,e){n||t.Logger.warning("There is no callback provided");try{i.Validators.isFunction(n)&&n({httpCode:r,body:u,getUser:function(){return f?f:t.Identity.getCurrentUser()},getPreviousUser:function(){if(e)return t.Identity.getUser(e);var i=t.Identity.getUsers(),n=i.shift(),r=f||t.Identity.getCurrentUser();return n&&r&&n.getMPID()===r.getMPID()&&(n=i.shift()),n||null}})}catch(o){t.Logger.error("There was an error with your callback: "+o)}};this.invokeAliasCallback=function(n,r,u){n||t.Logger.warning("There is no callback provided");try{if(i.Validators.isFunction(n)){var f={httpCode:r};u&&(f.message=u);n(f)}}catch(e){t.Logger.error("There was an error with your callback: "+e)}};this.extend=function(){var o,e,u,r,s,h,t=arguments[0]||{},f=1,l=arguments.length,c=!1,n={hasOwn:Object.prototype.hasOwnProperty,class2type:{},type:function(t){return t==null?String(t):n.class2type[Object.prototype.toString.call(t)]||"object"},isPlainObject:function(t){if(!t||n.type(t)!=="object"||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!n.hasOwn.call(t,"constructor")&&!n.hasOwn.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}for(var i in t);return i===undefined||n.hasOwn.call(t,i)},isArray:Array.isArray||function(t){return n.type(t)==="array"},isFunction:function(t){return n.type(t)==="function"},isWindow:function(n){return n!=null&&n==n.window}};for(typeof t=="boolean"&&(c=t,t=arguments[1]||{},f=2),a(t)==="object"||n.isFunction(t)||(t={}),l===f&&(t=this,--f);f<l;f++)if((o=arguments[f])!=null)for(e in o)(u=t[e],r=o[e],t!==r)&&(c&&r&&(n.isPlainObject(r)||(s=n.isArray(r)))?(s?(s=!1,h=u&&n.isArray(u)?u:[]):h=u&&n.isPlainObject(u)?u:{},t[e]=i.extend(c,h,r)):r!==undefined&&(t[e]=r));return t};this.createServiceUrl=function(n,i){var u=window.mParticle&&t._Store.SDKConfig.forceHttps?"https://":window.location.protocol+"//",r;return r=t._Store.SDKConfig.forceHttps?"https://"+n:u+n,i&&(r=r+i),r};this.createXHR=function(n){var i;try{i=new window.XMLHttpRequest}catch(r){t.Logger.error("Error creating XMLHttpRequest object.")}if(i&&n&&"withCredentials"in i)i.onreadystatechange=n;else if(typeof XDomainRequest!="undefined"){t.Logger.verbose("Creating XDomainRequest object");try{i=new window.XDomainRequest;i.onload=n}catch(r){t.Logger.error("Error creating XDomainRequest object")}}return i};this.filterUserIdentities=function(t,r){var e=[],u,f,o;if(t&&Object.keys(t).length)for(u in t)t.hasOwnProperty(u)&&(f=n.IdentityType.getIdentityType(u),i.inArray(r,f)||(o={Type:f,Identity:t[u]},f===n.IdentityType.CustomerId?e.unshift(o):e.push(o)));return e};this.filterUserIdentitiesForForwarders=function(t,r){var f={},u,e;if(t&&Object.keys(t).length)for(u in t)t.hasOwnProperty(u)&&(e=h.hashUserIdentity(n.IdentityType.getIdentityType(u)),i.inArray(r,e)||(f[u]=t[u]));return f};this.filterUserAttributes=function(n,t){var u={},r,f;if(n&&Object.keys(n).length)for(r in n)n.hasOwnProperty(r)&&(f=h.hashUserAttribute(r),i.inArray(t,f)||(u[r]=n[r]));return u};this.isFilteredUserAttribute=function(n,t){var r=h.hashUserAttribute(n);return t&&i.inArray(t,r)};this.isEventType=function(t){for(var i in n.EventType)if(n.EventType.hasOwnProperty(i)&&n.EventType[i]===t)return!0;return!1};this.sanitizeAttributes=function(n,r){var f,u;if(!n||!i.isObject(n))return null;f={};for(u in n)n.hasOwnProperty(u)&&i.Validators.isValidAttributeValue(n[u])?f[u]=n[u]:t.Logger.warning("For '"+r+"', the corresponding attribute value of '"+u+"' must be a string, number, boolean, or null.");return f};this.isDelayedByIntegration=function(n,i,r){if(r-i>t._Store.SDKConfig.integrationDelayTimeout)return!1;for(var u in n){if(n[u]===!0)return!0;continue}return!1};this.createMainStorageName=function(n){return n?ii.currentStorageName+"_"+n:ii.currentStorageName};this.createProductStorageName=function(n){return n?ii.currentStorageProductsName+"_"+n:ii.currentStorageProductsName};this.converted=wu;this.findKeyInObject=eu;this.parseNumber=pt;this.inArray=fu;this.isObject=k;this.decoded=pu;this.returnConvertedBoolean=yu;this.parseStringOrNumber=et;this.generateHash=ut;this.generateUniqueId=bi;this.Validators=rr}function se(n){var t=this;this.isBridgeV2Available=function(n){if(!n)return!1;var i=ur+"_"+n+"_v2",t=li+"_"+n+"_v2";return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.hasOwnProperty(t)?!0:window.mParticle&&window.mParticle.uiwebviewBridgeName&&window.mParticle.uiwebviewBridgeName===t?!0:window.hasOwnProperty(i)?!0:!1};this.isWebviewEnabled=function(i,r){return(n._Store.bridgeV2Available=t.isBridgeV2Available(i),n._Store.bridgeV1Available=t.isBridgeV1Available(),r===2)?n._Store.bridgeV2Available:window.mParticle&&window.mParticle.uiwebviewBridgeName&&window.mParticle.uiwebviewBridgeName!==li+"_"+i+"_v2"?!1:r<2?n._Store.bridgeV2Available||n._Store.bridgeV1Available:!1};this.isBridgeV1Available=function(){return n._Store.SDKConfig.useNativeSdk||window.mParticleAndroid||n._Store.SDKConfig.isIOS?!0:!1};this.sendToNative=function(i,r){if(n._Store.bridgeV2Available&&n._Store.SDKConfig.minWebviewBridgeVersion===2){t.sendViaBridgeV2(i,r,n._Store.SDKConfig.requiredWebviewBridgeName);return}if(n._Store.bridgeV2Available&&n._Store.SDKConfig.minWebviewBridgeVersion<2){t.sendViaBridgeV2(i,r,n._Store.SDKConfig.requiredWebviewBridgeName);return}if(n._Store.bridgeV1Available&&n._Store.SDKConfig.minWebviewBridgeVersion<2){t.sendViaBridgeV1(i,r);return}};this.sendViaBridgeV1=function(i,r){window.mParticleAndroid&&window.mParticleAndroid.hasOwnProperty(i)?(n.Logger.verbose(wt.InformationMessages.SendAndroid+i),window.mParticleAndroid[i](r)):n._Store.SDKConfig.isIOS&&(n.Logger.verbose(wt.InformationMessages.SendIOS+i),t.sendViaIframeToIOS(i,r))};this.sendViaIframeToIOS=function(n,t){var i=document.createElement("IFRAME");i.setAttribute("src","mp-sdk://"+n+"/"+encodeURIComponent(t));document.documentElement.appendChild(i);i.parentNode.removeChild(i)};this.sendViaBridgeV2=function(i,r,u){if(u){var h=ur+"_"+u+"_v2",e=window[h],f=li+"_"+u+"_v2",o,s;if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers[f]&&(o=window.webkit.messageHandlers[f]),n.uiwebviewBridgeName===f&&(s=n[f]),e&&e.hasOwnProperty(i)){n.Logger.verbose(wt.InformationMessages.SendAndroid+i);e[i](r);return}o?(n.Logger.verbose(wt.InformationMessages.SendIOS+i),o.postMessage(JSON.stringify({path:i,value:r?JSON.parse(r):null}))):s&&(n.Logger.verbose(wt.InformationMessages.SendIOS+i),t.sendViaIframeToIOS(i,r))}}}function he(n){var t=this;this.attemptCookieSync=function(i,r,u){var f,s,h,c,o,e;r&&!n._Store.webviewBridgeEnabled&&n._Store.pixelConfigurations.forEach(function(l){e=!1;l.filteringConsentRuleValues&&l.filteringConsentRuleValues.values&&l.filteringConsentRuleValues.values.length&&(e=!0);f={moduleId:l.moduleId,frequencyCap:l.frequencyCap,pixelUrl:t.replaceAmp(l.pixelUrl),redirectUrl:l.redirectUrl?t.replaceAmp(l.redirectUrl):null,filteringConsentRuleValues:l.filteringConsentRuleValues};h=t.replaceMPID(f.pixelUrl,r);c=f.redirectUrl?t.replaceMPID(f.redirectUrl,r):"";o=h+encodeURIComponent(c);var a=n._Persistence.getPersistence();if(i&&i!==r){a&&a[r]&&(a[r].csd||(a[r].csd={}),t.performCookieSync(o,f.moduleId,r,a[r].csd,f.filteringConsentRuleValues,u,e));return}a[r]&&(a[r].csd||(a[r].csd={}),s=a[r].csd[f.moduleId.toString()]?a[r].csd[f.moduleId.toString()]:null,s?(new Date).getTime()>new Date(s).getTime()+f.frequencyCap*864e5&&t.performCookieSync(o,f.moduleId,r,a[r].csd,f.filteringConsentRuleValues,u,e):t.performCookieSync(o,f.moduleId,r,a[r].csd,f.filteringConsentRuleValues,u,e))})};this.replaceMPID=function(n,t){return n.replace("%%mpid%%",t)};this.replaceAmp=function(n){return n.replace(/&amp;/g,"&")};this.performCookieSync=function(t,i,r,u,f,e,o){if((!o||!e)&&n._Consent.isEnabledForUserConsent(f,n.Identity.getCurrentUser())){var s=document.createElement("img");n.Logger.verbose(fr.InformationMessages.CookieSync);s.onload=function(){u[i.toString()]=(new Date).getTime();n._Persistence.saveUserCookieSyncDatesToPersistence(r,u)};s.src=t}}}function ce(t){function r(){t._Store.sessionId=null;t._Store.dateLastEventSent=null;t._Store.sessionAttributes={};t._Persistence.update()}var i=this;this.initialize=function(){var r,n;t._Store.sessionId?(r=t._Store.SDKConfig.sessionTimeout*6e4,new Date>new Date(t._Store.dateLastEventSent.getTime()+r)?(i.endSession(),i.startNewSession()):(n=t._Persistence.getPersistence(),n&&!n.cu&&(t.Identity.identify(t._Store.SDKConfig.identifyRequest,t._Store.SDKConfig.identityCallback),t._Store.identifyCalled=!0,t._Store.SDKConfig.identityCallback=null))):i.startNewSession()};this.getSession=function(){return t.Logger.warning(ou("SessionManager.getSession()","SessionManager.getSessionId()")),this.getSessionId()};this.getSessionId=function(){return t._Store.sessionId};this.startNewSession=function(){var r,u,f;t.Logger.verbose(st.InformationMessages.StartingNewSession);t._Helpers.canLog()?(t._Store.sessionId=t._Helpers.generateUniqueId().toUpperCase(),r=t.Identity.getCurrentUser(),u=r?r.getMPID():null,u&&(t._Store.currentSessionMPIDs=[u]),t._Store.sessionStartDate||(f=new Date,t._Store.sessionStartDate=f,t._Store.dateLastEventSent=f),i.setSessionTimer(),t._Store.identifyCalled||(t.Identity.identify(t._Store.SDKConfig.identifyRequest,t._Store.SDKConfig.identityCallback),t._Store.identifyCalled=!0,t._Store.SDKConfig.identityCallback=null),t._Events.logEvent({messageType:n.MessageType.SessionStart})):t.Logger.verbose(st.InformationMessages.AbandonStartSession)};this.endSession=function(u){var e,o,s,f,h;if(t.Logger.verbose(st.InformationMessages.StartingEndSession),u){t._Events.logEvent({messageType:n.MessageType.SessionEnd});r();return}if(!t._Helpers.canLog()){t.Logger.verbose(st.InformationMessages.AbandonEndSession);return}if(f=t._Persistence.getPersistence(),f){if(f.gs&&!f.gs.sid){t.Logger.verbose(st.InformationMessages.NoSessionToEnd);return}f.gs.sid&&t._Store.sessionId!==f.gs.sid&&(t._Store.sessionId=f.gs.sid);((e=f===null||f===void 0?void 0:f.gs)===null||e===void 0?void 0:e.les)&&(o=t._Store.SDKConfig.sessionTimeout*6e4,h=(new Date).getTime(),s=h-f.gs.les,s<o?i.setSessionTimer():(t._Events.logEvent({messageType:n.MessageType.SessionEnd}),t._Store.sessionStartDate=null,r()))}};this.setSessionTimer=function(){var n=t._Store.SDKConfig.sessionTimeout*6e4;t._Store.globalTimer=window.setTimeout(function(){i.endSession()},n)};this.resetSessionTimer=function(){t._Store.webviewBridgeEnabled||(t._Store.sessionId||i.startNewSession(),i.clearSessionTimeout(),i.setSessionTimer());i.startNewSessionIfNeeded()};this.clearSessionTimeout=function(){clearTimeout(t._Store.globalTimer)};this.startNewSessionIfNeeded=function(){if(!t._Store.webviewBridgeEnabled){var n=t._Persistence.getPersistence();!t._Store.sessionId&&n&&(n.sid?t._Store.sessionId=n.sid:i.startNewSession())}}}function le(t){var i=this;this.convertTransactionAttributesToProductAction=function(n,t){n.hasOwnProperty("Id")&&(t.TransactionId=n.Id);n.hasOwnProperty("Affiliation")&&(t.Affiliation=n.Affiliation);n.hasOwnProperty("CouponCode")&&(t.CouponCode=n.CouponCode);n.hasOwnProperty("Revenue")&&(t.TotalAmount=this.sanitizeAmount(n.Revenue,"Revenue"));n.hasOwnProperty("Shipping")&&(t.ShippingAmount=this.sanitizeAmount(n.Shipping,"Shipping"));n.hasOwnProperty("Tax")&&(t.TaxAmount=this.sanitizeAmount(n.Tax,"Tax"));n.hasOwnProperty("Step")&&(t.CheckoutStep=n.Step);n.hasOwnProperty("Option")&&(t.CheckoutOptions=n.Option)};this.getProductActionEventName=function(t){switch(t){case n.ProductActionType.AddToCart:return"AddToCart";case n.ProductActionType.AddToWishlist:return"AddToWishlist";case n.ProductActionType.Checkout:return"Checkout";case n.ProductActionType.CheckoutOption:return"CheckoutOption";case n.ProductActionType.Click:return"Click";case n.ProductActionType.Purchase:return"Purchase";case n.ProductActionType.Refund:return"Refund";case n.ProductActionType.RemoveFromCart:return"RemoveFromCart";case n.ProductActionType.RemoveFromWishlist:return"RemoveFromWishlist";case n.ProductActionType.ViewDetail:return"ViewDetail";case n.ProductActionType.Unknown:default:return"Unknown"}};this.getPromotionActionEventName=function(t){switch(t){case n.PromotionActionType.PromotionClick:return"PromotionClick";case n.PromotionActionType.PromotionView:return"PromotionView";default:return"Unknown"}};this.convertProductActionToEventType=function(i){switch(i){case n.ProductActionType.AddToCart:return n.CommerceEventType.ProductAddToCart;case n.ProductActionType.AddToWishlist:return n.CommerceEventType.ProductAddToWishlist;case n.ProductActionType.Checkout:return n.CommerceEventType.ProductCheckout;case n.ProductActionType.CheckoutOption:return n.CommerceEventType.ProductCheckoutOption;case n.ProductActionType.Click:return n.CommerceEventType.ProductClick;case n.ProductActionType.Purchase:return n.CommerceEventType.ProductPurchase;case n.ProductActionType.Refund:return n.CommerceEventType.ProductRefund;case n.ProductActionType.RemoveFromCart:return n.CommerceEventType.ProductRemoveFromCart;case n.ProductActionType.RemoveFromWishlist:return n.CommerceEventType.ProductRemoveFromWishlist;case n.ProductActionType.Unknown:return n.EventType.Unknown;case n.ProductActionType.ViewDetail:return n.CommerceEventType.ProductViewDetail;default:return t.Logger.error("Could not convert product action type "+i+" to event type"),null}};this.convertPromotionActionToEventType=function(i){switch(i){case n.PromotionActionType.PromotionClick:return n.CommerceEventType.PromotionClick;case n.PromotionActionType.PromotionView:return n.CommerceEventType.PromotionView;default:return t.Logger.error("Could not convert promotion action type "+i+" to event type"),null}};this.generateExpandedEcommerceName=function(n,t){return"eCommerce - "+n+" - "+(t?"Total":"Item")};this.extractProductAttributes=function(n,t){t.CouponCode&&(n["Coupon Code"]=t.CouponCode);t.Brand&&(n.Brand=t.Brand);t.Category&&(n.Category=t.Category);t.Name&&(n.Name=t.Name);t.Sku&&(n.Id=t.Sku);t.Price&&(n["Item Price"]=t.Price);t.Quantity&&(n.Quantity=t.Quantity);t.Position&&(n.Position=t.Position);t.Variant&&(n.Variant=t.Variant);n["Total Product Amount"]=t.TotalAmount||0};this.extractTransactionId=function(n,t){t.TransactionId&&(n["Transaction Id"]=t.TransactionId)};this.extractActionAttributes=function(n,t){i.extractTransactionId(n,t);t.Affiliation&&(n.Affiliation=t.Affiliation);t.CouponCode&&(n["Coupon Code"]=t.CouponCode);t.TotalAmount&&(n["Total Amount"]=t.TotalAmount);t.ShippingAmount&&(n["Shipping Amount"]=t.ShippingAmount);t.TaxAmount&&(n["Tax Amount"]=t.TaxAmount);t.CheckoutOptions&&(n["Checkout Options"]=t.CheckoutOptions);t.CheckoutStep&&(n["Checkout Step"]=t.CheckoutStep)};this.extractPromotionAttributes=function(n,t){t.Id&&(n.Id=t.Id);t.Creative&&(n.Creative=t.Creative);t.Name&&(n.Name=t.Name);t.Position&&(n.Position=t.Position)};this.buildProductList=function(n,t){return t?Array.isArray(t)?t:[t]:n.ShoppingCart.ProductList};this.createProduct=function(n,i,r,u,f,e,o,s,h,c){if(c=t._Helpers.sanitizeAttributes(c,n),typeof n!="string")return t.Logger.error("Name is required when creating a product"),null;if(!t._Helpers.Validators.isStringOrNumber(i))return t.Logger.error("SKU is required when creating a product, and must be a string or a number"),null;if(t._Helpers.Validators.isStringOrNumber(r))r=t._Helpers.parseNumber(r);else return t.Logger.error("Price is required when creating a product, and must be a string or a number"),null;return s&&!t._Helpers.Validators.isNumber(s)&&(t.Logger.error("Position must be a number, it will be set to null."),s=null),u=t._Helpers.Validators.isStringOrNumber(u)?t._Helpers.parseNumber(u):1,{Name:n,Sku:i,Price:r,Quantity:u,Brand:o,Variant:f,Category:e,Position:s,CouponCode:h,TotalAmount:u*r,Attributes:c}};this.createPromotion=function(n,i,r,u){return t._Helpers.Validators.isStringOrNumber(n)?{Id:n,Creative:i,Name:r,Position:u}:(t.Logger.error(bt.ErrorMessages.PromotionIdRequired),null)};this.createImpression=function(n,i){return typeof n!="string"?(t.Logger.error("Name is required when creating an impression."),null):i?{Name:n,Product:i}:(t.Logger.error("Product is required when creating an impression."),null)};this.createTransactionAttributes=function(n,i,r,u,f,e){return t._Helpers.Validators.isStringOrNumber(n)?{Id:n,Affiliation:i,CouponCode:r,Revenue:u,Shipping:f,Tax:e}:(t.Logger.error(bt.ErrorMessages.TransactionIdRequired),null)};this.expandProductImpression=function(r){var u=[];return r.ProductImpressions?(r.ProductImpressions.forEach(function(f){f.ProductList&&f.ProductList.forEach(function(e){var o=t._Helpers.extend(!1,{},r.EventAttributes),s,h;if(e.Attributes)for(s in e.Attributes)o[s]=e.Attributes[s];i.extractProductAttributes(o,e);f.ProductImpressionList&&(o["Product Impression List"]=f.ProductImpressionList);h=t._ServerModel.createEventObject({messageType:n.MessageType.PageEvent,name:i.generateExpandedEcommerceName("Impression"),data:o,eventType:n.EventType.Transaction});u.push(h)})}),u):u};this.expandCommerceEvent=function(n){return n?i.expandProductAction(n).concat(i.expandPromotionAction(n)).concat(i.expandProductImpression(n)):null};this.expandPromotionAction=function(r){var u=[],f;return r.PromotionAction?(f=r.PromotionAction.PromotionList,f.forEach(function(f){var e=t._Helpers.extend(!1,{},r.EventAttributes),o;i.extractPromotionAttributes(e,f);o=t._ServerModel.createEventObject({messageType:n.MessageType.PageEvent,name:i.generateExpandedEcommerceName(n.PromotionActionType.getExpansionName(r.PromotionAction.PromotionActionType)),data:e,eventType:n.EventType.Transaction});u.push(o)}),u):u};this.expandProductAction=function(r){var u=[],e,f,s,o;return r.ProductAction?(e=!1,r.ProductAction.ProductActionType===n.ProductActionType.Purchase||r.ProductAction.ProductActionType===n.ProductActionType.Refund?(f=t._Helpers.extend(!1,{},r.EventAttributes),f["Product Count"]=r.ProductAction.ProductList?r.ProductAction.ProductList.length:0,i.extractActionAttributes(f,r.ProductAction),r.CurrencyCode&&(f["Currency Code"]=r.CurrencyCode),s=t._ServerModel.createEventObject({messageType:n.MessageType.PageEvent,name:i.generateExpandedEcommerceName(n.ProductActionType.getExpansionName(r.ProductAction.ProductActionType),!0),data:f,eventType:n.EventType.Transaction}),u.push(s)):e=!0,o=r.ProductAction.ProductList,!o)?u:(o.forEach(function(f){var o=t._Helpers.extend(!1,r.EventAttributes,f.Attributes),s;e?i.extractActionAttributes(o,r.ProductAction):i.extractTransactionId(o,r.ProductAction);i.extractProductAttributes(o,f);s=t._ServerModel.createEventObject({messageType:n.MessageType.PageEvent,name:i.generateExpandedEcommerceName(n.ProductActionType.getExpansionName(r.ProductAction.ProductActionType)),data:o,eventType:n.EventType.Transaction});u.push(s)}),u):u};this.createCommerceEventObject=function(i){var r;return(t.Logger.verbose(bt.InformationMessages.StartingLogCommerceEvent),t._Helpers.canLog())?(r=t._ServerModel.createEventObject({messageType:n.MessageType.Commerce}),r.EventName="eCommerce - ",r.CurrencyCode=t._Store.currencyCode,r.ShoppingCart=[],r.CustomFlags=i,r):(t.Logger.verbose(bt.InformationMessages.AbandonLogEvent),null)};this.sanitizeAmount=function(n,i){if(!t._Helpers.Validators.isStringOrNumber(n)){var r=[i,"must be of type number. A",a(n),"was passed. Converting to 0"].join(" ");return t.Logger.warning(r),0}return t._Helpers.parseNumber(n)}}function ae(n){var r={};for(var i in t.DefaultConfig)t.DefaultConfig.hasOwnProperty(i)&&(r[i]=t.DefaultConfig[i]);if(n)for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);for(i in t.DefaultUrls)r[i]=t.DefaultUrls[i];return r}function er(n,i){var o={isEnabled:!0,sessionAttributes:{},currentSessionMPIDs:[],consentState:null,sessionId:null,isFirstRun:null,clientId:null,deviceId:null,devToken:null,serverSettings:{},dateLastEventSent:null,sessionStartDate:null,currentPosition:null,isTracking:!1,watchPositionId:null,cartProducts:[],eventQueue:[],currencyCode:null,globalTimer:null,context:null,configurationLoaded:!1,identityCallInFlight:!1,SDKConfig:{},nonCurrentUserMPIDs:{},identifyCalled:!1,isLoggedIn:!1,cookieSyncDates:{},integrationAttributes:{},requireDelay:!0,isLocalStorageAvailable:null,storageName:null,prodStorageName:null,activeForwarders:[],kits:{},sideloadedKits:[],configuredForwarders:[],pixelConfigurations:[],wrapperSDKInfo:{name:"none",version:null,isInfoSet:!1}},f,e,r,u;for(f in o)this[f]=o[f];this.integrationDelayTimeoutStart=Date.now();this.SDKConfig=ae(n);n&&(n.deviceId&&(this.deviceId=n.deviceId),this.SDKConfig.isDevelopmentMode=n.hasOwnProperty("isDevelopmentMode")?i._Helpers.returnConvertedBoolean(n.isDevelopmentMode):!1,n.hasOwnProperty("v1SecureServiceUrl")&&(this.SDKConfig.v1SecureServiceUrl=n.v1SecureServiceUrl),n.hasOwnProperty("v2SecureServiceUrl")&&(this.SDKConfig.v2SecureServiceUrl=n.v2SecureServiceUrl),n.hasOwnProperty("v3SecureServiceUrl")&&(this.SDKConfig.v3SecureServiceUrl=n.v3SecureServiceUrl),n.hasOwnProperty("identityUrl")&&(this.SDKConfig.identityUrl=n.identityUrl),n.hasOwnProperty("aliasUrl")&&(this.SDKConfig.aliasUrl=n.aliasUrl),n.hasOwnProperty("configUrl")&&(this.SDKConfig.configUrl=n.configUrl),n.hasOwnProperty("logLevel")&&(this.SDKConfig.logLevel=n.logLevel),this.SDKConfig.useNativeSdk=!!n.useNativeSdk,this.SDKConfig.kits=n.kits||{},this.SDKConfig.sideloadedKits=n.sideloadedKits||[],this.SDKConfig.isIOS=n.hasOwnProperty("isIOS")?n.isIOS:window.mParticle&&window.mParticle.isIOS?window.mParticle.isIOS:!1,this.SDKConfig.useCookieStorage=n.hasOwnProperty("useCookieStorage")?n.useCookieStorage:!1,this.SDKConfig.maxProducts=n.hasOwnProperty("maxProducts")?n.maxProducts:t.DefaultConfig.maxProducts,this.SDKConfig.maxCookieSize=n.hasOwnProperty("maxCookieSize")?n.maxCookieSize:t.DefaultConfig.maxCookieSize,n.hasOwnProperty("appName")&&(this.SDKConfig.appName=n.appName),n.hasOwnProperty("package")&&(this.SDKConfig.package=n.package),this.SDKConfig.integrationDelayTimeout=n.hasOwnProperty("integrationDelayTimeout")?n.integrationDelayTimeout:t.DefaultConfig.integrationDelayTimeout,n.hasOwnProperty("identifyRequest")&&(this.SDKConfig.identifyRequest=n.identifyRequest),n.hasOwnProperty("identityCallback")&&(e=n.identityCallback,i._Helpers.Validators.isFunction(e)?this.SDKConfig.identityCallback=n.identityCallback:i.Logger.warning("The optional callback must be a function. You tried entering a(n) "+a(e)+" . Callback not set. Please set your callback again.")),n.hasOwnProperty("appVersion")&&(this.SDKConfig.appVersion=n.appVersion),n.hasOwnProperty("appName")&&(this.SDKConfig.appName=n.appName),n.hasOwnProperty("sessionTimeout")&&(this.SDKConfig.sessionTimeout=n.sessionTimeout),n.hasOwnProperty("dataPlan")?(this.SDKConfig.dataPlan={PlanVersion:null,PlanId:null},r=n.dataPlan,r.planId&&(ku(r.planId)?this.SDKConfig.dataPlan.PlanId=r.planId:i.Logger.error("Your data plan id must be a string and match the data plan slug format (i.e. under_case_slug)")),r.planVersion&&(si(r.planVersion)?this.SDKConfig.dataPlan.PlanVersion=r.planVersion:i.Logger.error("Your data plan version must be a number"))):this.SDKConfig.dataPlan={},this.SDKConfig.forceHttps=n.hasOwnProperty("forceHttps")?n.forceHttps:!0,this.SDKConfig.customFlags=n.customFlags||{},this.SDKConfig.minWebviewBridgeVersion=n.hasOwnProperty("minWebviewBridgeVersion")?n.minWebviewBridgeVersion:1,this.SDKConfig.aliasMaxWindow=n.hasOwnProperty("aliasMaxWindow")?n.aliasMaxWindow:t.DefaultConfig.aliasMaxWindow,n.hasOwnProperty("dataPlanOptions")&&(u=n.dataPlanOptions,u.hasOwnProperty("dataPlanVersion")&&u.hasOwnProperty("blockUserAttributes")&&u.hasOwnProperty("blockEventAttributes")&&u.hasOwnProperty("blockEvents")&&u.hasOwnProperty("blockUserIdentities")||i.Logger.error('Ensure your config.dataPlanOptions object has the following keys: a "dataPlanVersion" object, and "blockUserAttributes", "blockEventAttributes", "blockEvents", "blockUserIdentities" booleans')),n.hasOwnProperty("onCreateBatch")&&(typeof n.onCreateBatch=="function"?this.SDKConfig.onCreateBatch=n.onCreateBatch:(i.Logger.error("config.onCreateBatch must be a function"),this.SDKConfig.onCreateBatch=undefined)),n.hasOwnProperty("flags")||(this.SDKConfig.flags={}),this.SDKConfig.flags.hasOwnProperty(t.FeatureFlags.EventBatchingIntervalMillis)||(this.SDKConfig.flags[t.FeatureFlags.EventBatchingIntervalMillis]=t.DefaultConfig.uploadInterval),this.SDKConfig.flags.hasOwnProperty(t.FeatureFlags.ReportBatching)||(this.SDKConfig.flags[t.FeatureFlags.ReportBatching]=!1),this.SDKConfig.flags.hasOwnProperty(t.FeatureFlags.OfflineStorage)||(this.SDKConfig.flags[t.FeatureFlags.OfflineStorage]=0))}function ve(n){var i=this,t=n.logLevel||"warning";this.logger=n.hasOwnProperty("logger")?n.logger:new ye;this.verbose=function(n){t!=="none"&&i.logger.verbose&&t==="verbose"&&i.logger.verbose(n)};this.warning=function(n){t!=="none"&&i.logger.warning&&(t==="verbose"||t==="warning")&&i.logger.warning(n)};this.error=function(n){t!=="none"&&i.logger.error&&i.logger.error(n)};this.setLogLevel=function(n){t=n}}function ye(){this.verbose=function(n){console&&console.info&&console.info(n)};this.error=function(n){console&&console.error&&console.error(n)};this.warning=function(n){console&&console.warn&&console.warn(n)}}function pe(n){function u(t){var i=n._Store;return t.gs.sid=i.sessionId,t.gs.ie=i.isEnabled,t.gs.sa=i.sessionAttributes,t.gs.ss=i.serverSettings,t.gs.dt=i.devToken,t.gs.les=i.dateLastEventSent?i.dateLastEventSent.getTime():null,t.gs.av=i.SDKConfig.appVersion,t.gs.cgid=i.clientId,t.gs.das=i.deviceId,t.gs.c=i.context,t.gs.ssd=i.sessionStartDate?i.sessionStartDate.getTime():0,t.gs.ia=i.integrationAttributes,t}function i(n){localStorage.removeItem(n)}function r(n,i,r){return t.encodePersistence(JSON.stringify(n))+";expires="+i+";path=/"+r}var t=this;this.useLocalStorage=function(){return!n._Store.SDKConfig.useCookieStorage&&n._Store.isLocalStorageAvailable};this.initializeStorage=function(){var o,r,i,u,e,s,f;try{r=t.getLocalStorage();i=t.getCookie();r||i?n._Store.isFirstRun=!1:(n._Store.isFirstRun=!0,n._Store.mpid=0);n._Store.isLocalStorageAvailable||(n._Store.SDKConfig.useCookieStorage=!0);n._Store.isLocalStorageAvailable?(o=window.localStorage,n._Store.SDKConfig.useCookieStorage?(r?(u=i?n._Helpers.extend(!1,r,i):r,o.removeItem(n._Store.storageName)):i&&(u=i),t.storeDataInMemory(u)):i?(u=r?n._Helpers.extend(!1,r,i):i,t.storeDataInMemory(u),t.expireCookies(n._Store.storageName)):t.storeDataInMemory(r)):t.storeDataInMemory(i);try{n._Store.isLocalStorageAvailable&&(e=localStorage.getItem(n._Store.prodStorageName),e&&(s=JSON.parse(g.decode(e))),n._Store.mpid&&t.storeProductsInMemory(s,n._Store.mpid))}catch(h){n._Store.isLocalStorageAvailable&&localStorage.removeItem(n._Store.prodStorageName);n._Store.cartProducts=[];n.Logger.error("Error loading products in initialization: "+h)}for(f in u)u.hasOwnProperty(f)&&(kt[f]||(n._Store.nonCurrentUserMPIDs[f]=u[f]));t.update()}catch(h){t.useLocalStorage()&&n._Store.isLocalStorageAvailable?localStorage.removeItem(n._Store.storageName):t.expireCookies(n._Store.storageName);n.Logger.error("Error initializing storage: "+h)}};this.update=function(){n._Store.webviewBridgeEnabled||(n._Store.SDKConfig.useCookieStorage&&t.setCookie(),t.setLocalStorage())};this.storeProductsInMemory=function(t,i){if(t)try{n._Store.cartProducts=t[i]&&t[i].cp?t[i].cp:[]}catch(r){n.Logger.error(ht.ErrorMessages.CookieParseError)}};this.storeDataInMemory=function(t,i){try{t?(n._Store.mpid=i?i:t.cu||0,t.gs=t.gs||{},n._Store.sessionId=t.gs.sid||n._Store.sessionId,n._Store.isEnabled=typeof t.gs.ie!="undefined"?t.gs.ie:n._Store.isEnabled,n._Store.sessionAttributes=t.gs.sa||n._Store.sessionAttributes,n._Store.serverSettings=t.gs.ss||n._Store.serverSettings,n._Store.devToken=n._Store.devToken||t.gs.dt,n._Store.SDKConfig.appVersion=n._Store.SDKConfig.appVersion||t.gs.av,n._Store.clientId=t.gs.cgid||n._Store.clientId||n._Helpers.generateUniqueId(),n._Store.deviceId=n._Store.deviceId||t.gs.das||n._Helpers.generateUniqueId(),n._Store.integrationAttributes=t.gs.ia||{},n._Store.context=t.gs.c||n._Store.context,n._Store.currentSessionMPIDs=t.gs.csm||n._Store.currentSessionMPIDs,n._Store.isLoggedIn=t.l===!0,t.gs.les&&(n._Store.dateLastEventSent=new Date(t.gs.les)),n._Store.sessionStartDate=t.gs.ssd?new Date(t.gs.ssd):new Date,t=i?t[i]:t[t.cu]):(n.Logger.verbose(ht.InformationMessages.CookieNotFound),n._Store.clientId=n._Store.clientId||n._Helpers.generateUniqueId(),n._Store.deviceId=n._Store.deviceId||n._Helpers.generateUniqueId())}catch(r){n.Logger.error(ht.ErrorMessages.CookieParseError)}};this.determineLocalStorageAvailability=function(n){var t;window.mParticle&&window.mParticle._forceNoLocalStorage&&(n=undefined);try{return n.setItem("mparticle","test"),t=n.getItem("mparticle")==="test",n.removeItem("mparticle"),t&&n}catch(i){return!1}};this.getUserProductsFromLS=function(t){if(!n._Store.isLocalStorageAvailable)return[];var r,i,u=localStorage.getItem(n._Store.prodStorageName);if(u&&(r=g.decode(u)),t)try{return r&&(i=JSON.parse(r)),r&&i[t]&&i[t].cp&&Array.isArray(i[t].cp)?i[t].cp:[]}catch(f){return[]}else return[]};this.getAllUserProductsFromLS=function(){var i,r=localStorage.getItem(n._Store.prodStorageName),t;r&&(i=g.decode(r));try{t=JSON.parse(i)}catch(u){t={}}return t};this.setLocalStorage=function(){if(n._Store.isLocalStorageAvailable){var o=n._Store.storageName,r=t.getAllUserProductsFromLS(),i=t.getLocalStorage()||{},e=n.Identity.getCurrentUser(),f=e?e.getMPID():null,s={cp:r[f]?r[f].cp:[]};if(f){r=r||{};r[f]=s;try{window.localStorage.setItem(encodeURIComponent(n._Store.prodStorageName),g.encode(JSON.stringify(r)))}catch(h){n.Logger.error("Error with setting products on localStorage.")}}if(!n._Store.SDKConfig.useCookieStorage){i.gs=i.gs||{};i.l=n._Store.isLoggedIn?1:0;n._Store.sessionId&&(i.gs.csm=n._Store.currentSessionMPIDs);i.gs.ie=n._Store.isEnabled;f&&(i.cu=f);Object.keys(n._Store.nonCurrentUserMPIDs).length&&(i=n._Helpers.extend({},i,n._Store.nonCurrentUserMPIDs),n._Store.nonCurrentUserMPIDs={});i=u(i);try{window.localStorage.setItem(encodeURIComponent(o),t.encodePersistence(JSON.stringify(i)))}catch(h){n.Logger.error("Error with setting localStorage item.")}}}};this.getLocalStorage=function(){if(!n._Store.isLocalStorageAvailable)return null;var f=n._Store.storageName,i=t.decodePersistence(window.localStorage.getItem(f)),u={},r;if(i){i=JSON.parse(i);for(r in i)i.hasOwnProperty(r)&&(u[r]=i[r])}return Object.keys(u).length?u:null};this.expireCookies=function(n){var i=new Date,u,f,r;r=t.getCookieDomain();f=r===""?"":";domain="+r;i.setTime(i.getTime()-864e5);u="; expires="+i.toUTCString();document.cookie=n+"="+u+"; path=/"+f};this.getCookie=function(){var s=window.document.cookie.split("; "),i=n._Store.storageName,r,h,e,u,o,f=i?undefined:{};for(n.Logger.verbose(ht.InformationMessages.CookieSearch),r=0,h=s.length;r<h;r++){try{e=s[r].split("=");u=e.shift();o=e.join("=")}catch(c){n.Logger.verbose("Unable to parse cookie: "+u+". Skipping.")}if(i&&i===u){f=n._Helpers.converted(o);break}i||(f[u]=n._Helpers.converted(o))}return f?(n.Logger.verbose(ht.InformationMessages.CookieFound),JSON.parse(t.decodePersistence(f))):null};this.setCookie=function(){var r,e=n.Identity.getCurrentUser();e&&(r=e.getMPID());var h=new Date,c=n._Store.storageName,i=t.getCookie()||{},l=new Date(h.getTime()+n._Store.SDKConfig.cookieExpiration*864e5).toGMTString(),f,o,s;f=t.getCookieDomain();o=f===""?"":";domain="+f;i.gs=i.gs||{};n._Store.sessionId&&(i.gs.csm=n._Store.currentSessionMPIDs);r&&(i.cu=r);i.l=n._Store.isLoggedIn?1:0;i=u(i);Object.keys(n._Store.nonCurrentUserMPIDs).length&&(i=n._Helpers.extend({},i,n._Store.nonCurrentUserMPIDs),n._Store.nonCurrentUserMPIDs={});s=t.reduceAndEncodePersistence(i,l,o,n._Store.SDKConfig.maxCookieSize);n.Logger.verbose(ht.InformationMessages.CookieSet);window.document.cookie=encodeURIComponent(c)+"="+s};this.reduceAndEncodePersistence=function(t,i,u,f){var e,c=t.gs.csm?t.gs.csm:[],o,s,h,l,a,v;if(c.length){s={};for(h in t)t.hasOwnProperty(h)&&(kt[h]||h===t.cu||(s[h]=1));if(Object.keys(s).length)for(l in s)e=r(t,i,u),e.length>f&&s.hasOwnProperty(l)&&c.indexOf(l)===-1&&delete t[l];for(a=0;a<c.length;a++)if(e=r(t,i,u),e.length>f)v=c[a],t[v]?(n.Logger.verbose("Size of new encoded cookie is larger than maxCookieSize setting of "+f+". Removing from cookie the earliest logged in MPID containing: "+JSON.stringify(t[v],0,2)),delete t[v]):n.Logger.error("Unable to save MPID data to cookies because the resulting encoded cookie is larger than the maxCookieSize setting of "+f+". We recommend using a maxCookieSize of 1500.");else break}else for(o in t)t.hasOwnProperty(o)&&(e=r(t,i,u),e.length>f&&(kt[o]||o===t.cu||delete t[o]));return e};this.findPrevCookiesBasedOnUI=function(i){var r=n._Persistence.getPersistence(),f,e,u,o,s;if(i)for(e in i.userIdentities)if(r&&Object.keys(r).length)for(u in r)if(r[u].mpid){o=r[u].ui;for(s in o)if(e===s&&i.userIdentities[e]===o[s]){f=u;break}}f&&t.storeDataInMemory(r,f)};this.encodePersistence=function(t){var i,r;t=JSON.parse(t);for(i in t.gs)t.gs.hasOwnProperty(i)&&(ri[i]?t.gs[i]?Array.isArray(t.gs[i])&&t.gs[i].length||n._Helpers.isObject(t.gs[i])&&Object.keys(t.gs[i]).length?t.gs[i]=g.encode(JSON.stringify(t.gs[i])):delete t.gs[i]:delete t.gs[i]:i==="ie"?t.gs[i]=t.gs[i]?1:0:t.gs[i]||delete t.gs[i]);for(r in t)if(t.hasOwnProperty(r)&&!kt[r])for(i in t[r])t[r].hasOwnProperty(i)&&ri[i]&&(n._Helpers.isObject(t[r][i])&&Object.keys(t[r][i]).length?t[r][i]=g.encode(JSON.stringify(t[r][i])):delete t[r][i]);return ru(JSON.stringify(t))};this.decodePersistence=function(t){var i,r;try{if(t){if(t=JSON.parse(uu(t)),n._Helpers.isObject(t)&&Object.keys(t).length){for(i in t.gs)t.gs.hasOwnProperty(i)&&(ri[i]?t.gs[i]=JSON.parse(g.decode(t.gs[i])):i==="ie"&&(t.gs[i]=Boolean(t.gs[i])));for(r in t)if(t.hasOwnProperty(r))if(kt[r])r==="l"&&(t[r]=Boolean(t[r]));else for(i in t[r])t[r].hasOwnProperty(i)&&ri[i]&&t[r][i].length&&(t[r][i]=JSON.parse(g.decode(t[r][i])))}return JSON.stringify(t)}}catch(u){n.Logger.error("Problem with decoding cookie",u)}};this.getCookieDomain=function(){if(n._Store.SDKConfig.cookieDomain)return n._Store.SDKConfig.cookieDomain;var i=t.getDomain(document,location.hostname);return i===""?"":"."+i};this.getDomain=function(n,t){for(var r,u="mptest=cookie",f=t.split("."),i=f.length-1;i>=0;i--)if(r=f.slice(i).join("."),n.cookie=u+";domain=."+r+";",n.cookie.indexOf(u)>-1)return n.cookie=u.split("=")[0]+"=;domain=."+r+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",r;return""};this.getUserIdentities=function(n){var i=t.getPersistence();return i&&i[n]&&i[n].ui?i[n].ui:{}};this.getAllUserAttributes=function(n){var i=t.getPersistence();return i&&i[n]&&i[n].ua?i[n].ua:{}};this.getCartProducts=function(t){var i,r=localStorage.getItem(n._Store.prodStorageName);return r&&(i=JSON.parse(g.decode(r)),i&&i[t]&&i[t].cp)?i[t].cp:[]};this.setCartProducts=function(t){if(n._Store.isLocalStorageAvailable)try{window.localStorage.setItem(encodeURIComponent(n._Store.prodStorageName),g.encode(JSON.stringify(t)))}catch(i){n.Logger.error("Error with setting products on localStorage.")}};this.saveUserIdentitiesToPersistence=function(n,i){if(i){var r=t.getPersistence();r&&(r[n]?r[n].ui=i:r[n]={ui:i},t.savePersistence(r))}};this.saveUserAttributesToPersistence=function(n,i){var r=t.getPersistence();i&&(r&&(r[n]?r[n].ui=i:r[n]={ui:i}),t.savePersistence(r))};this.saveUserCookieSyncDatesToPersistence=function(n,i){if(i){var r=t.getPersistence();r&&(r[n]?r[n].csd=i:r[n]={csd:i});t.savePersistence(r)}};this.saveUserConsentStateToCookies=function(i,r){if(r||r===null){var u=t.getPersistence();u&&(u[i]?u[i].con=n._Consent.ConsentSerialization.toMinifiedJsonObject(r):u[i]={con:n._Consent.ConsentSerialization.toMinifiedJsonObject(r)},t.savePersistence(u))}};this.savePersistence=function(i){var e=t.encodePersistence(JSON.stringify(i)),o=new Date,s=n._Store.storageName,h=new Date(o.getTime()+n._Store.SDKConfig.cookieExpiration*864e5).toGMTString(),r=t.getCookieDomain(),u,f;u=r===""?"":";domain="+r;n._Store.SDKConfig.useCookieStorage?(f=t.reduceAndEncodePersistence(i,h,u,n._Store.SDKConfig.maxCookieSize),window.document.cookie=encodeURIComponent(s)+"="+f):n._Store.isLocalStorageAvailable&&localStorage.setItem(n._Store.storageName,e)};this.getPersistence=function(){return this.useLocalStorage()?this.getLocalStorage():this.getCookie()};this.getConsentState=function(i){var r=t.getPersistence();return r&&r[i]&&r[i].con?n._Consent.ConsentSerialization.fromMinifiedJsonObject(r[i].con):null};this.getFirstSeenTime=function(n){if(!n)return null;var i=t.getPersistence();return i&&i[n]&&i[n].fst?i[n].fst:null};this.setFirstSeenTime=function(n,i){if(n){i||(i=(new Date).getTime());var r=t.getPersistence();r&&(r[n]||(r[n]={}),r[n].fst||(r[n].fst=i,t.savePersistence(r)))}};this.getLastSeenTime=function(i){if(!i)return null;if(i===n.Identity.getCurrentUser().getMPID())return(new Date).getTime();var r=t.getPersistence();return r&&r[i]&&r[i].lst?r[i].lst:null};this.setLastSeenTime=function(n,i){if(n){i||(i=(new Date).getTime());var r=t.getPersistence();r&&r[n]&&(r[n].lst=i,t.savePersistence(r))}};this.getDeviceId=function(){return n._Store.deviceId};this.setDeviceId=function(i){n._Store.deviceId=i;t.update()};this.resetPersistence=function(){if(i(ft.localStorageName),i(ft.localStorageNameV3),i(ft.localStorageNameV4),i(n._Store.prodStorageName),i(n._Store.storageName),i(ft.localStorageProductsV4),t.expireCookies(ft.cookieName),t.expireCookies(ft.cookieNameV2),t.expireCookies(ft.cookieNameV3),t.expireCookies(ft.cookieNameV4),t.expireCookies(n._Store.prodStorageName),t.expireCookies(n._Store.storageName),mParticle._isTestEnv){var r="abcdef";i(n._Helpers.createMainStorageName(r));t.expireCookies(n._Helpers.createMainStorageName(r));i(n._Helpers.createProductStorageName(r))}};this.forwardingStatsBatches={uploadsTable:{},forwardingStatsEventQueue:[]}}function we(t){var i=this;this.logEvent=function(n,i){if(t.Logger.verbose(ot.InformationMessages.StartingLogEvent+": "+n.name),t._Helpers.canLog()){var r=t._ServerModel.createEventObject(n);t._APIClient.sendEventToServer(r,i)}else t.Logger.verbose(ot.InformationMessages.AbandonLogEvent)};this.startTracking=function(n){function u(r){t._Store.currentPosition={lat:r.coords.latitude,lng:r.coords.longitude};i(n,r);n=null;t._Store.isTracking=!0}function f(){i(n);n=null;t._Store.isTracking=!1}function i(n,i){if(n)try{i?n(i):n()}catch(r){t.Logger.error("Error invoking the callback passed to startTrackingLocation.");t.Logger.error(r)}}if(t._Store.isTracking){var r={coords:{latitude:t._Store.currentPosition.lat,longitude:t._Store.currentPosition.lng}};i(n,r)}else"geolocation"in navigator&&(t._Store.watchPositionId=navigator.geolocation.watchPosition(u,f))};this.stopTracking=function(){t._Store.isTracking&&(navigator.geolocation.clearWatch(t._Store.watchPositionId),t._Store.currentPosition=null,t._Store.isTracking=!1)};this.logOptOut=function(){t.Logger.verbose(ot.InformationMessages.StartingLogOptOut);var i=t._ServerModel.createEventObject({messageType:n.MessageType.OptOut,eventType:n.EventType.Other});t._APIClient.sendEventToServer(i)};this.logAST=function(){i.logEvent({messageType:n.MessageType.AppStateTransition})};this.logCheckoutEvent=function(r,u,f,e){var o=t._Ecommerce.createCommerceEventObject(e);o&&(o.EventName+=t._Ecommerce.getProductActionEventName(n.ProductActionType.Checkout),o.EventCategory=n.CommerceEventType.ProductCheckout,o.ProductAction={ProductActionType:n.ProductActionType.Checkout,CheckoutStep:r,CheckoutOptions:u,ProductList:[]},i.logCommerceEvent(o,f))};this.logProductActionEvent=function(n,r,u,f,e,o){var s=t._Ecommerce.createCommerceEventObject(f),h=Array.isArray(r)?r:[r];h.forEach(function(n){n.TotalAmount&&(n.TotalAmount=t._Ecommerce.sanitizeAmount(n.TotalAmount,"TotalAmount"));n.Position&&(n.Position=t._Ecommerce.sanitizeAmount(n.Position,"Position"));n.Price&&(n.Price=t._Ecommerce.sanitizeAmount(n.Price,"Price"));n.Quantity&&(n.Quantity=t._Ecommerce.sanitizeAmount(n.Quantity,"Quantity"))});s&&(s.EventCategory=t._Ecommerce.convertProductActionToEventType(n),s.EventName+=t._Ecommerce.getProductActionEventName(n),s.ProductAction={ProductActionType:n,ProductList:h},t._Helpers.isObject(e)&&t._Ecommerce.convertTransactionAttributesToProductAction(e,s.ProductAction),i.logCommerceEvent(s,u,o))};this.logPurchaseEvent=function(r,u,f,e){var o=t._Ecommerce.createCommerceEventObject(e);o&&(o.EventName+=t._Ecommerce.getProductActionEventName(n.ProductActionType.Purchase),o.EventCategory=n.CommerceEventType.ProductPurchase,o.ProductAction={ProductActionType:n.ProductActionType.Purchase},o.ProductAction.ProductList=t._Ecommerce.buildProductList(o,u),t._Ecommerce.convertTransactionAttributesToProductAction(r,o.ProductAction),i.logCommerceEvent(o,f))};this.logRefundEvent=function(r,u,f,e){if(!r){t.Logger.error(ot.ErrorMessages.TransactionRequired);return}var o=t._Ecommerce.createCommerceEventObject(e);o&&(o.EventName+=t._Ecommerce.getProductActionEventName(n.ProductActionType.Refund),o.EventCategory=n.CommerceEventType.ProductRefund,o.ProductAction={ProductActionType:n.ProductActionType.Refund},o.ProductAction.ProductList=t._Ecommerce.buildProductList(o,u),t._Ecommerce.convertTransactionAttributesToProductAction(r,o.ProductAction),i.logCommerceEvent(o,f))};this.logPromotionEvent=function(n,r,u,f,e){var o=t._Ecommerce.createCommerceEventObject(f);o&&(o.EventName+=t._Ecommerce.getPromotionActionEventName(n),o.EventCategory=t._Ecommerce.convertPromotionActionToEventType(n),o.PromotionAction={PromotionActionType:n,PromotionList:Array.isArray(r)?r:[r]},i.logCommerceEvent(o,u,e))};this.logImpressionEvent=function(r,u,f,e){var o=t._Ecommerce.createCommerceEventObject(f);o&&(o.EventName+="Impression",o.EventCategory=n.CommerceEventType.ProductImpression,Array.isArray(r)||(r=[r]),o.ProductImpressions=[],r.forEach(function(n){o.ProductImpressions.push({ProductImpressionList:n.Name,ProductList:Array.isArray(n.Product)?n.Product:[n.Product]})}),i.logCommerceEvent(o,u,e))};this.logCommerceEvent=function(n,i,r){if(t.Logger.verbose(ot.InformationMessages.StartingLogCommerceEvent),n.ProductAction&&n.EventCategory===null){t.Logger.error("Commerce event not sent.  The mParticle.ProductActionType you passed was invalid. Re-check your code.");return}i=t._Helpers.sanitizeAttributes(i,n.EventName);t._Helpers.canLog()?(t._Store.webviewBridgeEnabled&&(n.ShoppingCart={}),i&&(n.EventAttributes=i),t._APIClient.sendEventToServer(n,r),t._Persistence.update()):t.Logger.verbose(ot.InformationMessages.AbandonLogEvent)};this.addEventHandler=function(r,u,f,e,o){var h=[],l=function(r){var u=function(){s.href?window.location.href=s.href:s.submit&&s.submit()};t.Logger.verbose("DOM event triggered, handling event");i.logEvent({messageType:n.MessageType.PageEvent,name:typeof f=="function"?f(s):f,data:typeof e=="function"?e(s):e,eventType:o||n.EventType.Other});(s.href&&s.target!=="_blank"||s.submit)&&(r.preventDefault?r.preventDefault():r.returnValue=!1,setTimeout(u,t._Store.SDKConfig.timeout))},s,c;if(!u){t.Logger.error("Can't bind event, selector is required");return}if(typeof u=="string"?h=document.querySelectorAll(u):u.nodeType&&(h=[u]),h.length)for(t.Logger.verbose("Found "+h.length+" element"+(h.length>1?"s":"")+", attaching event handlers"),c=0;c<h.length;c++)s=h[c],s.addEventListener?s.addEventListener(r,l,!1):s.attachEvent?s.attachEvent("on"+r,l):s["on"+r]=l;else t.Logger.verbose("No elements found")}}function or(t,i,r,u){var f=this;return{getUserIdentities:function(){var f={},o=r._Persistence.getUserIdentities(t),e,s;for(e in o)o.hasOwnProperty(e)&&(s=n.IdentityType.getIdentityName(r._Helpers.parseNumber(e)),u&&(!u||u.isIdentityBlocked(s))||(f[s]=o[e]));return f=r._Helpers.filterUserIdentitiesForForwarders(f,i.userIdentityFilters),{userIdentities:f}},getMPID:function(){return t},getUserAttributesLists:function(n){var i,e={},t;i=f.getAllUserAttributes();for(t in i)i.hasOwnProperty(t)&&Array.isArray(i[t])&&(u&&(!u||u.isAttributeKeyBlocked(t))||(e[t]=i[t].slice()));return r._Helpers.filterUserAttributes(e,n.userAttributeFilters)},getAllUserAttributes:function(){var e={},f=r._Persistence.getAllUserAttributes(t),n;if(f)for(n in f)f.hasOwnProperty(n)&&(u&&(!u||u.isAttributeKeyBlocked(n))||(e[n]=Array.isArray(f[n])?f[n].slice():f[n]));return r._Helpers.filterUserAttributes(e,i.userAttributeFilters)}}}function be(t,i){var r=this,u={setUserAttribute:"setUserAttribute",removeUserAttribute:"removeUserAttribute"};this.initForwarders=function(n,i){var u=t.Identity.getCurrentUser();!t._Store.webviewBridgeEnabled&&t._Store.configuredForwarders&&(t._Store.configuredForwarders.sort(function(n,t){return n.settings.PriorityValue=n.settings.PriorityValue||0,t.settings.PriorityValue=t.settings.PriorityValue||0,-1*(n.settings.PriorityValue-t.settings.PriorityValue)}),t._Store.activeForwarders=t._Store.configuredForwarders.filter(function(f){if(!t._Consent.isEnabledForUserConsent(f.filteringConsentRuleValues,u)||!r.isEnabledForUserAttributes(f.filteringUserAttributeValue,u)||!r.isEnabledForUnknownUser(f.excludeAnonymousUser,u))return!1;var e=t._Helpers.filterUserIdentities(n,f.userIdentityFilters),o=t._Helpers.filterUserAttributes(u?u.getAllUserAttributes():{},f.userAttributeFilters);return f.initialized||(f.logger=t.Logger,f.init(f.settings,i,!1,null,o,e,t._Store.SDKConfig.appVersion,t._Store.SDKConfig.appName,t._Store.SDKConfig.customFlags,t._Store.clientId),f.initialized=!0),!0}))};this.isEnabledForUserAttributes=function(n,i){var e,o,r,f,u;if(!n||!t._Helpers.isObject(n)||!Object.keys(n).length)return!0;if(i)r=i.getAllUserAttributes();else return!1;f=!1;try{if(r&&t._Helpers.isObject(r)&&Object.keys(r).length)for(u in r)if(r.hasOwnProperty(u)&&(e=h.hashAttributeConditionalForwarding(u),o=h.hashAttributeConditionalForwarding(r[u]),e===n.userAttributeName&&o===n.userAttributeValue)){f=!0;break}return n?n.includeOnMatch===f:!0}catch(s){return!0}};this.isEnabledForUnknownUser=function(n,t){return(!t||!t.isLoggedIn())&&n?!1:!0};this.applyToForwarders=function(n,i){t._Store.activeForwarders.length&&t._Store.activeForwarders.forEach(function(r){var f=r[n],u;if(f)try{u=r[n](i);u&&t.Logger.verbose(u)}catch(e){t.Logger.verbose(e)}})};this.sendEventToForwarders=function(i){var u,o,s,w=function(n,i){n.UserIdentities&&n.UserIdentities.length&&n.UserIdentities.forEach(function(r,u){t._Helpers.inArray(i,h.hashUserIdentity(r.Type))&&(n.UserIdentities.splice(u,1),u>0&&u--)})},y=function(n,i){var u,r;if(i)for(r in n.EventAttributes)n.EventAttributes.hasOwnProperty(r)&&(u=h.hashEventAttributeKey(n.EventCategory,n.EventName,r),t._Helpers.inArray(i,u)&&delete n.EventAttributes[r])},e=function(n,i){return n&&n.length&&t._Helpers.inArray(n,i)?!0:!1},b=[n.MessageType.PageEvent,n.MessageType.PageView,n.MessageType.Commerce],r,f,c,l,a,p,v;if(!t._Store.webviewBridgeEnabled&&t._Store.activeForwarders)for(o=h.hashEventName(i.EventName,i.EventCategory),s=h.hashEventType(i.EventCategory),r=0;r<t._Store.activeForwarders.length;r++){if(b.indexOf(i.EventDataType)>-1&&t._Store.activeForwarders[r].filteringEventAttributeValue&&t._Store.activeForwarders[r].filteringEventAttributeValue.eventAttributeName&&t._Store.activeForwarders[r].filteringEventAttributeValue.eventAttributeValue){if(f=null,i.EventAttributes)for(c in i.EventAttributes)if(l=h.hashAttributeConditionalForwarding(c),l===t._Store.activeForwarders[r].filteringEventAttributeValue.eventAttributeName&&(f={name:l,value:h.hashAttributeConditionalForwarding(i.EventAttributes[c])}),f)break;if(a=f!==null&&f.value===t._Store.activeForwarders[r].filteringEventAttributeValue.eventAttributeValue,p=t._Store.activeForwarders[r].filteringEventAttributeValue.includeOnMatch===!0?a:!a,!p)continue}if(u={},u=t._Helpers.extend(!0,u,i),i.EventDataType===n.MessageType.PageEvent&&(e(t._Store.activeForwarders[r].eventNameFilters,o)||e(t._Store.activeForwarders[r].eventTypeFilters,s)))continue;else if(i.EventDataType===n.MessageType.Commerce&&e(t._Store.activeForwarders[r].eventTypeFilters,s))continue;else if(i.EventDataType===n.MessageType.PageView&&e(t._Store.activeForwarders[r].screenNameFilters,o))continue;u.EventAttributes&&(i.EventDataType===n.MessageType.PageEvent?y(u,t._Store.activeForwarders[r].attributeFilters):i.EventDataType===n.MessageType.PageView&&y(u,t._Store.activeForwarders[r].screenAttributeFilters));w(u,t._Store.activeForwarders[r].userIdentityFilters);u.UserAttributes=t._Helpers.filterUserAttributes(u.UserAttributes,t._Store.activeForwarders[r].userAttributeFilters);t._Store.activeForwarders[r].process&&(t.Logger.verbose("Sending message to forwarder: "+t._Store.activeForwarders[r].name),v=t._Store.activeForwarders[r].process(u),v&&t.Logger.verbose(v))}};this.handleForwarderUserAttributes=function(n,r,f){i&&i.isAttributeKeyBlocked(r)||!t._Store.activeForwarders.length||t._Store.activeForwarders.forEach(function(i){var o=i[n],e;if(o&&!t._Helpers.isFilteredUserAttribute(r,i.userAttributeFilters))try{n===u.setUserAttribute?e=i.setUserAttribute(r,f):n===u.removeUserAttribute&&(e=i.removeUserAttribute(r));e&&t.Logger.verbose(e)}catch(s){t.Logger.error(s)}})};this.setForwarderUserIdentities=function(n){t._Store.activeForwarders.forEach(function(i){var r=t._Helpers.filterUserIdentities(n,i.userIdentityFilters);i.setUserIdentity&&r.forEach(function(n){var r=i.setUserIdentity(n.Identity,n.Type);r&&t.Logger.verbose(r)})})};this.setForwarderOnUserIdentified=function(n){t._Store.activeForwarders.forEach(function(r){var f=or(n.getMPID(),r,t,i),u;r.onUserIdentified&&(u=r.onUserIdentified(f),u&&t.Logger.verbose(u))})};this.setForwarderOnIdentityComplete=function(n,r){var u;t._Store.activeForwarders.forEach(function(f){var e=or(n.getMPID(),f,t,i);r==="identify"?f.onIdentifyComplete&&(u=f.onIdentifyComplete(e),u&&t.Logger.verbose(u)):r==="login"?f.onLoginComplete&&(u=f.onLoginComplete(e),u&&t.Logger.verbose(u)):r==="logout"?f.onLogoutComplete&&(u=f.onLogoutComplete(e),u&&t.Logger.verbose(u)):r==="modify"&&f.onModifyComplete&&(u=f.onModifyComplete(e),u&&t.Logger.verbose(u))})};this.getForwarderStatsQueue=function(){return t._Persistence.forwardingStatsBatches.forwardingStatsEventQueue};this.setForwarderStatsQueue=function(n){t._Persistence.forwardingStatsBatches.forwardingStatsEventQueue=n};this.processForwarders=function(n,i){n?(this.processUIEnabledKits(n),this.processSideloadedKits(n),r.initForwarders(t._Store.SDKConfig.identifyRequest.userIdentities,i)):t.Logger.warning("No config was passed. Cannot process forwarders")};this.processUIEnabledKits=function(n){var i=this.returnKitConstructors();try{Array.isArray(n.kitConfigs)&&n.kitConfigs.length&&n.kitConfigs.forEach(function(n){r.configureUIEnabledKit(n,i)})}catch(u){t.Logger.error("MP Kits not configured propertly. Kits may not be initialized. "+u)}};this.returnKitConstructors=function(){var n={};return y(t._Store.SDKConfig.kits)?y(t._preInit.forwarderConstructors)||t._preInit.forwarderConstructors.forEach(function(t){if(t.suffix){var i="".concat(t.name,"-").concat(t.suffix);n[i]=t}else n[t.name]=t}):n=t._Store.SDKConfig.kits,n};this.configureUIEnabledKit=function(n,i){var e=null,r=n,u,f;for(u in i)if(f=void 0,r.suffix&&(f="".concat(r.name,"-").concat(r.suffix)),(u===f||u===r.name)&&(r.isDebug===t._Store.SDKConfig.isDevelopmentMode||r.isSandbox===t._Store.SDKConfig.isDevelopmentMode)){e=this.returnConfiguredKit(i[u],r);t._Store.configuredForwarders.push(e);break}};this.processSideloadedKits=function(n){var i,u,f,e;try{if(Array.isArray(n.sideloadedKits)){i={kits:{}};n.sideloadedKits.forEach(function(n){try{n.kitInstance.register(i)}catch(t){console.error("Error registering sideloaded kit "+n.kitInstance.name)}});for(u in i.kits)f=i.kits[u],r.configureSideloadedKit(f);y(i.kits)||(e=Object.keys(i.kits),t._Store.sideloadedKitsCount=e.length)}}catch(o){t.Logger.error("Sideloaded Kits not configured propertly. Kits may not be initialized. "+o)}};this.configureSideloadedKit=function(n){t._Store.configuredForwarders.push(this.returnConfiguredKit(n))};this.returnConfiguredKit=function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=new n.constructor;return i.id=t.moduleId,i.isSandbox=t.isDebug||t.isSandbox,i.hasSandbox=t.hasDebugString==="true",i.isVisible=t.isVisible||!0,i.settings=t.settings||{},i.eventNameFilters=t.eventNameFilters||[],i.eventTypeFilters=t.eventTypeFilters||[],i.attributeFilters=t.attributeFilters||[],i.screenNameFilters=t.screenNameFilters||[],i.screenAttributeFilters=t.screenAttributeFilters||[],i.userIdentityFilters=t.userIdentityFilters||[],i.userAttributeFilters=t.userAttributeFilters||[],i.filteringEventAttributeValue=t.filteringEventAttributeValue||{},i.filteringUserAttributeValue=t.filteringUserAttributeValue||{},i.eventSubscriptionId=t.eventSubscriptionId||null,i.filteringConsentRuleValues=t.filteringConsentRuleValues||{},i.excludeAnonymousUser=t.excludeAnonymousUser||!1,i};this.configurePixel=function(n){(n.isDebug===t._Store.SDKConfig.isDevelopmentMode||n.isProduction!==t._Store.SDKConfig.isDevelopmentMode)&&t._Store.pixelConfigurations.push(n)};this.processPixelConfigs=function(n){try{y(n.pixelConfigs)||n.pixelConfigs.forEach(function(n){r.configurePixel(n)})}catch(i){t.Logger.error("Cookie Sync configs not configured propertly. Cookie Sync may not be initialized. "+i)}}}function ke(n,t){var r=[],i;t.flags={};for(i in n.CustomFlags)r=[],n.CustomFlags.hasOwnProperty(i)&&(Array.isArray(n.CustomFlags[i])?n.CustomFlags[i].forEach(function(n){(typeof n=="number"||typeof n=="string"||typeof n=="boolean")&&r.push(n.toString())}):(typeof n.CustomFlags[i]=="number"||typeof n.CustomFlags[i]=="string"||typeof n.CustomFlags[i]=="boolean")&&r.push(n.CustomFlags[i].toString()),r.length&&(t.flags[i]=r))}function de(n){return{id:et(n.Sku),nm:et(n.Name),pr:pt(n.Price),qt:pt(n.Quantity),br:et(n.Brand),va:et(n.Variant),ca:et(n.Category),ps:pt(n.Position),cc:et(n.CouponCode),tpa:pt(n.TotalAmount),attrs:n.Attributes}}function ai(n){return n?n.map(function(n){return de(n)}):[]}function hr(i){var r=this;this.appendUserInfo=function(t,r){var e,u,o,s,h,c,f;if(r){if(!t){r.MPID=null;r.ConsentState=null;r.UserAttributes=null;r.UserIdentities=null;return}if(!r.MPID||r.MPID!==t.getMPID()){r.MPID=t.getMPID();r.ConsentState=t.getConsentState();r.UserAttributes=t.getAllUserAttributes();e=t.getUserIdentities().userIdentities;u={};for(o in e)s=n.IdentityType.getIdentityType(o),s!==!1&&(u[s]=e[o]);if(h=[],i._Helpers.isObject(u)&&Object.keys(u).length)for(c in u)f={},f.Identity=u[c],f.Type=i._Helpers.parseNumber(c),h.push(f);r.UserIdentities=h}}};this.convertToConsentStateV2DTO=function(n){var f,e,r,i,t,u;if(!n)return null;if(f={},e=n.getGDPRConsentState(),e){r={};f.gdpr=r;for(i in e)e.hasOwnProperty(i)&&(t=e[i],f.gdpr[i]={},typeof t.Consented=="boolean"&&(r[i].c=t.Consented),typeof t.Timestamp=="number"&&(r[i].ts=t.Timestamp),typeof t.ConsentDocument=="string"&&(r[i].d=t.ConsentDocument),typeof t.Location=="string"&&(r[i].l=t.Location),typeof t.HardwareId=="string"&&(r[i].h=t.HardwareId))}return u=n.getCCPAConsentState(),u&&(f.ccpa={data_sale_opt_out:{c:u.Consented,ts:u.Timestamp,d:u.ConsentDocument,l:u.Location,h:u.HardwareId}}),f};this.createEventObject=function(u,f){var o={},e={},h=u.messageType===n.MessageType.OptOut?!i._Store.isEnabled:null,s;return i._Store.sessionId||u.messageType===n.MessageType.OptOut||i._Store.webviewBridgeEnabled?(e=u.hasOwnProperty("toEventAPIObject")?u.toEventAPIObject():{EventName:u.name||u.messageType,EventCategory:u.eventType,EventAttributes:i._Helpers.sanitizeAttributes(u.data,u.name),SourceMessageId:u.sourceMessageId||i._Helpers.generateUniqueId(),EventDataType:u.messageType,CustomFlags:u.customFlags||{},UserAttributeChanges:u.userAttributeChanges,UserIdentityChanges:u.userIdentityChanges},u.messageType!==n.MessageType.SessionEnd&&(i._Store.dateLastEventSent=new Date),o={Store:i._Store.serverSettings,SDKVersion:t.sdkVersion,SessionId:i._Store.sessionId,SessionStartDate:i._Store.sessionStartDate?i._Store.sessionStartDate.getTime():0,Debug:i._Store.SDKConfig.isDevelopmentMode,Location:i._Store.currentPosition,OptOut:h,ExpandedEventCount:0,AppVersion:i.getAppVersion(),AppName:i.getAppName(),Package:i._Store.SDKConfig.package,ClientGeneratedId:i._Store.clientId,DeviceId:i._Store.deviceId,IntegrationAttributes:i._Store.integrationAttributes,CurrencyCode:i._Store.currencyCode,DataPlan:i._Store.SDKConfig.dataPlan?i._Store.SDKConfig.dataPlan:{}},e.EventDataType===dt.AppStateTransition&&(e.IsFirstRun=i._Store.isFirstRun,e.LaunchReferral=window.location.href||null),e.CurrencyCode=i._Store.currencyCode,s=f||i.Identity.getCurrentUser(),r.appendUserInfo(s,e),u.messageType===n.MessageType.SessionEnd&&(e.SessionLength=i._Store.dateLastEventSent.getTime()-i._Store.sessionStartDate.getTime(),e.currentSessionMPIDs=i._Store.currentSessionMPIDs,e.EventAttributes=i._Store.sessionAttributes,i._Store.currentSessionMPIDs=[],i._Store.sessionStartDate=null),o.Timestamp=i._Store.dateLastEventSent.getTime(),i._Helpers.extend({},e,o)):null};this.convertEventToV2DTO=function(n){var t={n:n.EventName,et:n.EventCategory,ua:n.UserAttributes,ui:n.UserIdentities,ia:n.IntegrationAttributes,str:n.Store,attrs:n.EventAttributes,sdk:n.SDKVersion,sid:n.SessionId,sl:n.SessionLength,ssd:n.SessionStartDate,dt:n.EventDataType,dbg:n.Debug,ct:n.Timestamp,lc:n.Location,o:n.OptOut,eec:n.ExpandedEventCount,av:n.AppVersion,cgid:n.ClientGeneratedId,das:n.DeviceId,mpid:n.MPID,smpids:n.currentSessionMPIDs},u;return n.DataPlan&&n.DataPlan.PlanId&&(t.dp_id=n.DataPlan.PlanId,n.DataPlan.PlanVersion&&(t.dp_v=n.DataPlan.PlanVersion)),u=r.convertToConsentStateV2DTO(n.ConsentState),u&&(t.con=u),n.EventDataType===dt.AppStateTransition&&(t.fr=n.IsFirstRun,t.iu=!1,t.at=sr.AppInit,t.lr=n.LaunchReferral,t.attrs=null),n.CustomFlags&&ke(n,t),n.EventDataType===dt.Commerce?(t.cu=n.CurrencyCode,n.ShoppingCart&&(t.sc={pl:ai(n.ShoppingCart.ProductList)}),n.ProductAction?t.pd={an:n.ProductAction.ProductActionType,cs:i._Helpers.parseNumber(n.ProductAction.CheckoutStep),co:n.ProductAction.CheckoutOptions,pl:ai(n.ProductAction.ProductList),ti:n.ProductAction.TransactionId,ta:n.ProductAction.Affiliation,tcc:n.ProductAction.CouponCode,tr:i._Helpers.parseNumber(n.ProductAction.TotalAmount),ts:i._Helpers.parseNumber(n.ProductAction.ShippingAmount),tt:i._Helpers.parseNumber(n.ProductAction.TaxAmount)}:n.PromotionAction?t.pm={an:n.PromotionAction.PromotionActionType,pl:n.PromotionAction.PromotionList.map(function(n){return{id:n.Id,nm:n.Name,cr:n.Creative,ps:n.Position?n.Position:0}})}:n.ProductImpressions&&(t.pi=n.ProductImpressions.map(function(n){return{pil:n.ProductImpressionList,pl:ai(n.ProductList)}}))):n.EventDataType===dt.Profile&&(t.pet=n.ProfileMessageType),t}}function ge(n){function t(){var i=n._Forwarders.getForwarderStatsQueue(),t=n._Persistence.forwardingStatsBatches.uploadsTable,u=Date.now(),r;i.length&&(t[u]={uploading:!1,data:i},n._Forwarders.setForwarderStatsQueue([]));for(r in t)(function(i){if(t.hasOwnProperty(i)&&t[i].uploading===!1){var u=function(){r.readyState===4&&(r.status===200||r.status===202?(n.Logger.verbose("Successfully sent  "+r.statusText+" from server"),delete t[i]):r.status.toString()[0]==="4"?r.status!==429&&delete t[i]:t[i].uploading=!1)},r=n._Helpers.createXHR(u),f=t[i].data;t[i].uploading=!0;n._APIClient.sendBatchForwardingStatsToServer(f,r)}})(r)}this.startForwardingStatsTimer=function(){mParticle._forwardingStatsTimer=setInterval(function(){t()},n._Store.SDKConfig.forwarderStatsTimeout)}}function no(i){var r=this;this.checkIdentitySwap=function(n,t,r){if(n&&t&&n!==t){var u=i._Persistence.getPersistence();u&&(u.cu=t,u.gs.csm=r,i._Persistence.savePersistence(u))}};this.IdentityRequest={createKnownIdentities:function(n,t){var r={},u;if(n&&n.userIdentities&&i._Helpers.isObject(n.userIdentities))for(u in n.userIdentities)r[u]=n.userIdentities[u];return r.device_application_stamp=t,r},preProcessIdentityRequest:function(n,t,r){var u,f;return(i.Logger.verbose(s.InformationMessages.StartingLogEvent+": "+r),u=i._Helpers.Validators.validateIdentities(n,r),!u.valid)?(i.Logger.error("ERROR: "+u.error),{valid:!1,error:u.error}):t&&!i._Helpers.Validators.isFunction(t)?(f="The optional callback must be a function. You tried entering a(n) "+a(t),i.Logger.error(f),{valid:!1,error:f}):{valid:!0}},createIdentityRequest:function(n,t,r,u,f,e,o){return{client_sdk:{platform:t,sdk_vendor:r,sdk_version:u},context:e,environment:i._Store.SDKConfig.isDevelopmentMode?"development":"production",request_id:i._Helpers.generateUniqueId(),request_timestamp_ms:(new Date).getTime(),previous_mpid:o||null,known_identities:this.createKnownIdentities(n,f)}},createModifyIdentityRequest:function(n,t,r,u,f,e){return{client_sdk:{platform:r,sdk_vendor:u,sdk_version:f},context:e,environment:i._Store.SDKConfig.isDevelopmentMode?"development":"production",request_id:i._Helpers.generateUniqueId(),request_timestamp_ms:(new Date).getTime(),identity_changes:this.createIdentityChanges(n,t)}},createIdentityChanges:function(n,t){var u=[],r;if(t&&i._Helpers.isObject(t)&&n&&i._Helpers.isObject(n))for(r in t)u.push({old_value:n[r]||null,new_value:t[r],identity_type:r});return u},combineUserIdentities:function(t,r){var e={},o=i._Helpers.extend(t,r),u,f;for(u in o)f=n.IdentityType.getIdentityType(u),f!==!1&&f>=0&&(e[n.IdentityType.getIdentityType(u)]=o[u]);return e},createAliasNetworkRequest:function(n){return{request_id:i._Helpers.generateUniqueId(),request_type:"alias",environment:i._Store.SDKConfig.isDevelopmentMode?"development":"production",api_key:i._Store.devToken,data:{destination_mpid:n.destinationMpid,source_mpid:n.sourceMpid,start_unixtime_ms:n.startTime,end_unixtime_ms:n.endTime,scope:n.scope,device_application_stamp:i._Store.deviceId}}},convertAliasToNative:function(n){return{DestinationMpid:n.destinationMpid,SourceMpid:n.sourceMpid,StartUnixtimeMs:n.startTime,EndUnixtimeMs:n.endTime}},convertToNative:function(t){var r=[],i;if(t&&t.userIdentities){for(i in t.userIdentities)t.userIdentities.hasOwnProperty(i)&&r.push({Type:n.IdentityType.getIdentityType(i),Identity:t.userIdentities[i]});return{UserIdentities:r}}}};this.IdentityAPI={HTTPCodes:c,identify:function(n,u){var f,o=i.Identity.getCurrentUser(),e=i._Identity.IdentityRequest.preProcessIdentityRequest(n,u,"identify"),h;o&&(f=o.getMPID());e.valid?(h=i._Identity.IdentityRequest.createIdentityRequest(n,t.platform,t.sdkVendor,t.sdkVersion,i._Store.deviceId,i._Store.context,f),i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Identify,JSON.stringify(i._Identity.IdentityRequest.convertToNative(n))),i._Helpers.invokeCallback(u,c.nativeIdentityRequest,"Identify request sent to native sdk")):i._IdentityAPIClient.sendIdentityRequest(h,"identify",u,n,r.parseIdentityResponse,f):(i._Helpers.invokeCallback(u,c.loggingDisabledOrMissingAPIKey,s.InformationMessages.AbandonLogEvent),i.Logger.verbose(s.InformationMessages.AbandonLogEvent))):(i._Helpers.invokeCallback(u,c.validationIssue,e.error),i.Logger.verbose(e))},logout:function(u,f){var e,l=i.Identity.getCurrentUser(),o=i._Identity.IdentityRequest.preProcessIdentityRequest(u,f,"logout"),h,a;l&&(e=l.getMPID());o.valid?(a=i._Identity.IdentityRequest.createIdentityRequest(u,t.platform,t.sdkVendor,t.sdkVersion,i._Store.deviceId,i._Store.context,e),i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Logout,JSON.stringify(i._Identity.IdentityRequest.convertToNative(u))),i._Helpers.invokeCallback(f,c.nativeIdentityRequest,"Logout request sent to native sdk")):(i._IdentityAPIClient.sendIdentityRequest(a,"logout",f,u,r.parseIdentityResponse,e),h=i._ServerModel.createEventObject({messageType:n.MessageType.Profile}),h.ProfileMessageType=n.ProfileMessageType.Logout,i._Store.activeForwarders.length&&i._Store.activeForwarders.forEach(function(n){n.logOut&&n.logOut(h)})):(i._Helpers.invokeCallback(f,c.loggingDisabledOrMissingAPIKey,s.InformationMessages.AbandonLogEvent),i.Logger.verbose(s.InformationMessages.AbandonLogEvent))):(i._Helpers.invokeCallback(f,c.validationIssue,o.error),i.Logger.verbose(o))},login:function(n,u){var f,o=i.Identity.getCurrentUser(),e=i._Identity.IdentityRequest.preProcessIdentityRequest(n,u,"login"),h;o&&(f=o.getMPID());e.valid?(h=i._Identity.IdentityRequest.createIdentityRequest(n,t.platform,t.sdkVendor,t.sdkVersion,i._Store.deviceId,i._Store.context,f),i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Login,JSON.stringify(i._Identity.IdentityRequest.convertToNative(n))),i._Helpers.invokeCallback(u,c.nativeIdentityRequest,"Login request sent to native sdk")):i._IdentityAPIClient.sendIdentityRequest(h,"login",u,n,r.parseIdentityResponse,f):(i._Helpers.invokeCallback(u,c.loggingDisabledOrMissingAPIKey,s.InformationMessages.AbandonLogEvent),i.Logger.verbose(s.InformationMessages.AbandonLogEvent))):(i._Helpers.invokeCallback(u,c.validationIssue,e.error),i.Logger.verbose(e))},modify:function(n,u){var o,f=i.Identity.getCurrentUser(),e=i._Identity.IdentityRequest.preProcessIdentityRequest(n,u,"modify"),h,l;f&&(o=f.getMPID());h=n&&n.userIdentities?n.userIdentities:{};e.valid?(l=i._Identity.IdentityRequest.createModifyIdentityRequest(f?f.getUserIdentities().userIdentities:{},h,t.platform,t.sdkVendor,t.sdkVersion,i._Store.context),i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Modify,JSON.stringify(i._Identity.IdentityRequest.convertToNative(n))),i._Helpers.invokeCallback(u,c.nativeIdentityRequest,"Modify request sent to native sdk")):i._IdentityAPIClient.sendIdentityRequest(l,"modify",u,n,r.parseIdentityResponse,o):(i._Helpers.invokeCallback(u,c.loggingDisabledOrMissingAPIKey,s.InformationMessages.AbandonLogEvent),i.Logger.verbose(s.InformationMessages.AbandonLogEvent))):(i._Helpers.invokeCallback(u,c.validationIssue,e.error),i.Logger.verbose(e))},getCurrentUser:function(){var n;return i._Store?(n=i._Store.mpid,n?(n=i._Store.mpid.slice(),r.mParticleUser(n,i._Store.isLoggedIn)):i._Store.webviewBridgeEnabled?r.mParticleUser():null):null},getUser:function(n){var u=i._Persistence.getPersistence();return u?u[n]&&!t.SDKv2NonMPIDCookieKeys.hasOwnProperty(n)?r.mParticleUser(n):null:null},getUsers:function(){var f=i._Persistence.getPersistence(),n=[],u;if(f)for(u in f)t.SDKv2NonMPIDCookieKeys.hasOwnProperty(u)||n.push(r.mParticleUser(u));return n.sort(function(n,t){var i=n.getLastSeenTime()||0,r=t.getLastSeenTime()||0;return i>r?-1:1}),n},aliasUsers:function(n,r){var u,f;if(n.destinationMpid&&n.sourceMpid||(u=s.ValidationMessages.AliasMissingMpid),n.destinationMpid===n.sourceMpid&&(u=s.ValidationMessages.AliasNonUniqueMpid),n.startTime&&n.endTime||(u=s.ValidationMessages.AliasMissingTime),n.startTime>n.endTime&&(u=s.ValidationMessages.AliasStartBeforeEndTime),u){i.Logger.warning(u);i._Helpers.invokeAliasCallback(r,c.validationIssue,u);return}i._Helpers.canLog()?i._Store.webviewBridgeEnabled?(i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Alias,JSON.stringify(i._Identity.IdentityRequest.convertAliasToNative(n))),i._Helpers.invokeAliasCallback(r,c.nativeIdentityRequest,"Alias request sent to native sdk")):(i.Logger.verbose(s.InformationMessages.StartingAliasRequest+": "+n.sourceMpid+" -> "+n.destinationMpid),f=i._Identity.IdentityRequest.createAliasNetworkRequest(n),i._IdentityAPIClient.sendAliasRequest(f,r)):(i._Helpers.invokeAliasCallback(r,c.loggingDisabledOrMissingAPIKey,s.InformationMessages.AbandonAliasUsers),i.Logger.verbose(s.InformationMessages.AbandonAliasUsers))},createAliasRequest:function(n,t){var r,u,f;try{return!t||!n?(i.Logger.error("'destinationUser' and 'sourceUser' must both be present"),null):(r=n.getFirstSeenTime(),r||i.Identity.getUsers().forEach(function(n){n.getFirstSeenTime()&&(!r||n.getFirstSeenTime()<r)&&(r=n.getFirstSeenTime())}),u=(new Date).getTime()-i._Store.SDKConfig.aliasMaxWindow*864e5,f=n.getLastSeenTime()||(new Date).getTime(),r<u&&(r=u,f<r&&i.Logger.warning("Source User has not been seen in the last "+i._Store.SDKConfig.maxAliasWindow+" days, Alias Request will likely fail")),{destinationMpid:t.getMPID(),sourceMpid:n.getMPID(),startTime:r,endTime:f})}catch(e){return i.Logger.error("There was a problem with creating an alias request: "+e),null}}};this.mParticleUser=function(r,u){var f=this;return{getUserIdentities:function(){var f={},t=i._Persistence.getUserIdentities(r);for(var u in t)t.hasOwnProperty(u)&&(f[n.IdentityType.getIdentityName(i._Helpers.parseNumber(u))]=t[u]);return{userIdentities:f}},getMPID:function(){return r},setUserTag:function(n){if(!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(s.ErrorMessages.BadKey);return}this.setUserAttribute(n,null)},removeUserTag:function(n){if(!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(s.ErrorMessages.BadKey);return}this.removeUserAttribute(n)},setUserAttribute:function(n,u){var o,e,l,c,h;if(i._SessionManager.resetSessionTimer(),i._Helpers.canLog()){if(!i._Helpers.Validators.isValidAttributeValue(u)){i.Logger.error(s.ErrorMessages.BadAttribute);return}if(!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(s.ErrorMessages.BadKey);return}i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetUserAttribute,JSON.stringify({key:n,value:u})):(o=i._Persistence.getPersistence(),e=this.getAllUserAttributes(),h=i._Helpers.findKeyInObject(e,n),h?(c=!1,l=e[h],delete e[h]):c=!0,e[n]=u,o&&o[r]&&(o[r].ua=e,i._Persistence.savePersistence(o,r)),f.sendUserAttributeChangeEvent(n,u,l,c,!1,this),i._Forwarders.initForwarders(f.IdentityAPI.getCurrentUser().getUserIdentities(),i._APIClient.prepareForwardingStats),i._Forwarders.handleForwarderUserAttributes("setUserAttribute",n,u))}},setUserAttributes:function(n){if(i._SessionManager.resetSessionTimer(),i._Helpers.isObject(n)){if(i._Helpers.canLog())for(var t in n)n.hasOwnProperty(t)&&this.setUserAttribute(t,n[t])}else i.Logger.error("Must pass an object into setUserAttributes. You passed a "+a(n))},removeUserAttribute:function(n){var e,u,o,h;if(i._SessionManager.resetSessionTimer(),!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(s.ErrorMessages.BadKey);return}i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.RemoveUserAttribute,JSON.stringify({key:n,value:null})):(e=i._Persistence.getPersistence(),u=this.getAllUserAttributes(),o=i._Helpers.findKeyInObject(u,n),o&&(n=o),h=u[n]?u[n].toString():null,delete u[n],e&&e[r]&&(e[r].ua=u,i._Persistence.savePersistence(e,r)),f.sendUserAttributeChangeEvent(n,null,h,!1,!0,this),i._Forwarders.initForwarders(f.IdentityAPI.getCurrentUser().getUserIdentities(),i._APIClient.prepareForwardingStats),i._Forwarders.handleForwarderUserAttributes("removeUserAttribute",n,null))},setUserAttributeList:function(n,u){var h,e,o,p,l,v,y,c;if(i._SessionManager.resetSessionTimer(),!i._Helpers.Validators.isValidKeyValue(n)){i.Logger.error(s.ErrorMessages.BadKey);return}if(!Array.isArray(u)){i.Logger.error("The value you passed in to setUserAttributeList must be an array. You passed in a "+(typeof value=="undefined"?"undefined":a(value)));return}if(v=u.slice(),i._Store.webviewBridgeEnabled)i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetUserAttributeList,JSON.stringify({key:n,value:v}));else{if(h=i._Persistence.getPersistence(),e=this.getAllUserAttributes(),y=i._Helpers.findKeyInObject(e,n),y?(p=!1,o=e[y],delete e[y]):p=!0,e[n]=v,h&&h[r]&&(h[r].ua=e,i._Persistence.savePersistence(h,r)),o&&Array.isArray(o)){if(u.length!==o.length)l=!0;else for(c=0;c<u.length;c++)if(o[c]!==u[c]){l=!0;break}}else l=!0;l&&f.sendUserAttributeChangeEvent(n,u,o,p,!1,this);i._Forwarders.initForwarders(f.IdentityAPI.getCurrentUser().getUserIdentities(),i._APIClient.prepareForwardingStats);i._Forwarders.handleForwarderUserAttributes("setUserAttribute",n,v)}},removeAllUserAttributes:function(){var n,r;if(i._SessionManager.resetSessionTimer(),i._Store.webviewBridgeEnabled)i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.RemoveAllUserAttributes);else if(n=this.getAllUserAttributes(),i._Forwarders.initForwarders(f.IdentityAPI.getCurrentUser().getUserIdentities(),i._APIClient.prepareForwardingStats),n)for(r in n)n.hasOwnProperty(r)&&i._Forwarders.handleForwarderUserAttributes("removeUserAttribute",r,null),this.removeUserAttribute(r)},getUserAttributesLists:function(){var n,i={},t;n=this.getAllUserAttributes();for(t in n)n.hasOwnProperty(t)&&Array.isArray(n[t])&&(i[t]=n[t].slice());return i},getAllUserAttributes:function(){var u={},n=i._Persistence.getAllUserAttributes(r),t;if(n)for(t in n)n.hasOwnProperty(t)&&(u[t]=Array.isArray(n[t])?n[t].slice():n[t]);return u},getCart:function(){return i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart() will be removed in future releases"),f.mParticleUserCart(r)},getConsentState:function(){return i._Persistence.getConsentState(r)},setConsentState:function(n){i._Persistence.saveUserConsentStateToCookies(r,n);i._Forwarders.initForwarders(this.getUserIdentities().userIdentities,i._APIClient.prepareForwardingStats);i._CookieSyncManager.attemptCookieSync(null,this.getMPID())},isLoggedIn:function(){return u},getLastSeenTime:function(){return i._Persistence.getLastSeenTime(r)},getFirstSeenTime:function(){return i._Persistence.getFirstSeenTime(r)}}};this.mParticleUserCart=function(r){return{add:function(u,f){var s,e,o,h;i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart().add() will be removed in future releases");o=Array.isArray(u)?u.slice():[u];o.forEach(function(n){n.Attributes=i._Helpers.sanitizeAttributes(n.Attributes)});i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.AddToCart,JSON.stringify(o)):(i._SessionManager.resetSessionTimer(),e=i._Persistence.getUserProductsFromLS(r),e=e.concat(o),f===!0&&i._Events.logProductActionEvent(n.ProductActionType.AddToCart,o),h={},h[r]={cp:e},e.length>i._Store.SDKConfig.maxProducts&&(i.Logger.verbose("The cart contains "+e.length+" items. Only "+i._Store.SDKConfig.maxProducts+" can currently be saved in cookies."),e=e.slice(-i._Store.SDKConfig.maxProducts)),s=i._Persistence.getAllUserProductsFromLS(),s[r].cp=e,i._Persistence.setCartProducts(s))},remove:function(u,f){var s,e,o,h,c;i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart().remove() will be removed in future releases");o=-1;h=null;i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.RemoveFromCart,JSON.stringify(u)):(i._SessionManager.resetSessionTimer(),e=i._Persistence.getUserProductsFromLS(r),e&&(e.forEach(function(n,t){n.Sku===u.Sku&&(o=t,h=n)}),o>-1&&(e.splice(o,1),f===!0&&i._Events.logProductActionEvent(n.ProductActionType.RemoveFromCart,h))),c={},c[r]={cp:e},s=i._Persistence.getAllUserProductsFromLS(),s[r].cp=e,i._Persistence.setCartProducts(s))},clear:function(){i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart().clear() will be removed in future releases");var n;i._Store.webviewBridgeEnabled?i._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.ClearCart):(i._SessionManager.resetSessionTimer(),n=i._Persistence.getAllUserProductsFromLS(),n&&n[r]&&n[r].cp&&(n[r].cp=[],n[r].cp=[],i._Persistence.setCartProducts(n)))},getCartProducts:function(){return i.Logger.warning("Deprecated function Identity.getCurrentUser().getCart().getCartProducts() will be removed in future releases"),i._Persistence.getCartProducts(r)}}};this.parseIdentityResponse=function(t,u,f,e,o){var h=i.Identity.getUser(u),l,w,s,v,a={},b=h?h.getUserIdentities().userIdentities:{},tt=i._Helpers.extend({},b),nt,y,p;i._Store.identityCallInFlight=!1;try{if(i.Logger.verbose('Parsing "'+o+'" identity response from server'),t.responseText&&(s=JSON.parse(t.responseText),s.hasOwnProperty("is_logged_in")&&(i._Store.isLoggedIn=s.is_logged_in)),(!h||h.getMPID()&&s.mpid&&s.mpid!==h.getMPID())&&(i._Store.mpid=s.mpid,h&&i._Persistence.setLastSeenTime(u),i._Persistence.getFirstSeenTime(s.mpid)||(w=!0),i._Persistence.setFirstSeenTime(s.mpid)),t.status===200){if(o==="modify")a=i._Identity.IdentityRequest.combineUserIdentities(b,e.userIdentities),i._Persistence.saveUserIdentitiesToPersistence(u,a);else{var k=r.IdentityAPI.getUser(s.mpid),d=k?k.getUserIdentities().userIdentities:{},it=i._Helpers.extend({},d);i.Logger.verbose("Successfully parsed Identity Response");o==="identify"&&h&&s.mpid===h.getMPID()&&i._Persistence.setFirstSeenTime(s.mpid);v=i._Store.currentSessionMPIDs.indexOf(s.mpid);i._Store.sessionId&&s.mpid&&u!==s.mpid&&v<0&&i._Store.currentSessionMPIDs.push(s.mpid);v>-1&&(i._Store.currentSessionMPIDs=i._Store.currentSessionMPIDs.slice(0,v).concat(i._Store.currentSessionMPIDs.slice(v+1,i._Store.currentSessionMPIDs.length)),i._Store.currentSessionMPIDs.push(s.mpid));i._CookieSyncManager.attemptCookieSync(u,s.mpid,w);r.checkIdentitySwap(u,s.mpid,i._Store.currentSessionMPIDs);e&&e.userIdentities&&Object.keys(e.userIdentities).length&&(a=r.IdentityRequest.combineUserIdentities(d,e.userIdentities));i._Persistence.saveUserIdentitiesToPersistence(s.mpid,a);i._Persistence.update();i._Persistence.findPrevCookiesBasedOnUI(e);i._Store.context=s.context||i._Store.context}if(l=i.Identity.getCurrentUser(),e&&e.onUserAlias&&i._Helpers.Validators.isFunction(e.onUserAlias))try{i.Logger.warning("Deprecated function onUserAlias will be removed in future releases");e.onUserAlias(h,l)}catch(g){i.Logger.error("There was an error with your onUserAlias function - "+g)}nt=i._Persistence.getPersistence();l&&(i._Persistence.storeDataInMemory(nt,l.getMPID()),h&&l.getMPID()===h.getMPID()&&h.isLoggedIn()===l.isLoggedIn()||i._Forwarders.initForwarders(l.getUserIdentities().userIdentities,i._APIClient.prepareForwardingStats),i._Forwarders.setForwarderUserIdentities(l.getUserIdentities().userIdentities),i._Forwarders.setForwarderOnIdentityComplete(l,o),i._Forwarders.setForwarderOnUserIdentified(l,o));y={};for(p in a)y[n.IdentityType.getIdentityName(i._Helpers.parseNumber(p))]=a[p];r.sendUserIdentityChangeEvent(y,o,s.mpid,o==="modify"?tt:it)}f?t.status===0?i._Helpers.invokeCallback(f,c.noHttpCoverage,s||null,l):i._Helpers.invokeCallback(f,t.status,s||null,l):s&&s.errors&&s.errors.length&&i.Logger.error("Received HTTP response code of "+t.status+" - "+s.errors[0].message);i._APIClient.processQueuedEvents()}catch(g){f&&i._Helpers.invokeCallback(f,t.status,s||null);i.Logger.error("Error parsing JSON response from Identity server: "+g)}};this.sendUserIdentityChangeEvent=function(n,t,u,f){var o,s,e,h;if(u||t==="modify"){o=this.IdentityAPI.getUser(u);for(e in n)f[e]!==n[e]&&(h=!f[e],s=r.createUserIdentityChange(e,n[e],f[e],h,o),i._APIClient.sendEventToServer(s))}};this.createUserIdentityChange=function(t,r,u,f,e){return i._ServerModel.createEventObject({messageType:n.MessageType.UserIdentityChange,userIdentityChanges:{New:{IdentityType:t,Identity:r,CreatedThisBatch:f},Old:{IdentityType:t,Identity:u,CreatedThisBatch:!1}},userInMemory:e})};this.sendUserAttributeChangeEvent=function(n,t,u,f,e,o){var s=r.createUserAttributeChange(n,t,u,f,e,o);s&&i._APIClient.sendEventToServer(s)};this.createUserAttributeChange=function(t,r,u,f,e,o){typeof u=="undefined"&&(u=null);var s;return r!==u&&(s=i._ServerModel.createEventObject({messageType:n.MessageType.UserAttributeChange,userAttributeChanges:{UserAttributeName:t,New:r,Old:u,Deleted:e,IsNewAttribute:f}},o)),s}}function to(n){var t=this;this.isEnabledForUserConsent=function(n,t){var i,r,u,e,o,s;if(!n||!n.values||!n.values.length)return!0;if(!t)return!1;if(i={},r=t.getConsentState(),r){var f=r.getGDPRConsentState();if(f)for(e in f)f.hasOwnProperty(e)&&(u=h.hashConsentPurposeConditionalForwarding("1",e),i[u]=f[e].Consented);o=r.getCCPAConsentState();o&&(u=h.hashConsentPurposeConditionalForwarding("2",l),i[u]=o.Consented)}return s=n.values.some(function(n){var t=n.consentPurpose,r=n.hasConsented;return i.hasOwnProperty(t)?i[t]===r:!1}),n.includeOnMatch===s};this.createPrivacyConsent=function(t,i,r,u,f){return typeof t!="boolean"?(n.Logger.error("Consented boolean is required when constructing a Consent object."),null):i&&isNaN(i)?(n.Logger.error("Timestamp must be a valid number when constructing a Consent object."),null):r&&typeof r!="string"?(n.Logger.error("Document must be a valid string when constructing a Consent object."),null):u&&typeof u!="string"?(n.Logger.error("Location must be a valid string when constructing a Consent object."),null):f&&typeof f!="string"?(n.Logger.error("Hardware ID must be a valid string when constructing a Consent object."),null):{Consented:t,Timestamp:i||Date.now(),ConsentDocument:r,Location:u,HardwareId:f}};this.ConsentSerialization={toMinifiedJsonObject:function(n){var e,t={},f,u,r,i;if(n){if(f=n.getGDPRConsentState(),f){t.gdpr={};for(u in f)f.hasOwnProperty(u)&&(r=f[u],t.gdpr[u]={},typeof r.Consented=="boolean"&&(t.gdpr[u].c=r.Consented),typeof r.Timestamp=="number"&&(t.gdpr[u].ts=r.Timestamp),typeof r.ConsentDocument=="string"&&(t.gdpr[u].d=r.ConsentDocument),typeof r.Location=="string"&&(t.gdpr[u].l=r.Location),typeof r.HardwareId=="string"&&(t.gdpr[u].h=r.HardwareId))}i=n.getCCPAConsentState();i&&(t.ccpa=(e={},e[l]={},e),typeof i.Consented=="boolean"&&(t.ccpa[l].c=i.Consented),typeof i.Timestamp=="number"&&(t.ccpa[l].ts=i.Timestamp),typeof i.ConsentDocument=="string"&&(t.ccpa[l].d=i.ConsentDocument),typeof i.Location=="string"&&(t.ccpa[l].l=i.Location),typeof i.HardwareId=="string"&&(t.ccpa[l].h=i.HardwareId))}return t},fromMinifiedJsonObject:function(n){var r=t.createConsentState(),i,u,f;if(n.gdpr)for(i in n.gdpr)n.gdpr.hasOwnProperty(i)&&(u=t.createPrivacyConsent(n.gdpr[i].c,n.gdpr[i].ts,n.gdpr[i].d,n.gdpr[i].l,n.gdpr[i].h),r.addGDPRConsentState(i,u));return n.ccpa&&n.ccpa.hasOwnProperty(l)&&(f=t.createPrivacyConsent(n.ccpa[l].c,n.ccpa[l].ts,n.ccpa[l].d,n.ccpa[l].l,n.ccpa[l].h),r.setCCPAConsentState(f)),r}};this.createConsentState=function(i){function e(n){if(typeof n!="string")return null;var t=n.trim();return t.length?t.toLowerCase():null}function s(i,u){var o=e(i),f;return o?k(u)?(f=t.createPrivacyConsent(u.Consented,u.Timestamp,u.ConsentDocument,u.Location,u.HardwareId),f&&(r[o]=f),this):(n.Logger.error("Invoked with a bad or empty consent object."),this):(n.Logger.error("Purpose must be a string."),this)}function h(n){if(n){if(k(n)){r={};for(var t in n)n.hasOwnProperty(t)&&this.addGDPRConsentState(t,n[t])}}else r={};return this}function c(n){var t=e(n);return t?(delete r[t],this):this}function a(){return Object.assign({},r)}function v(i){if(!k(i))return n.Logger.error("Invoked with a bad or empty CCPA consent object."),this;var r=t.createPrivacyConsent(i.Consented,i.Timestamp,i.ConsentDocument,i.Location,i.HardwareId);return r&&(f[l]=r),this}function y(){return f[l]}function o(){return delete f[l],this}function p(){return n.Logger.warning("removeCCPAState is deprecated and will be removed in a future release; use removeCCPAConsentState instead"),o()}var r={},f={},u;return i?(u=t.createConsentState(),u.setGDPRConsentState(i.getGDPRConsentState()),u.setCCPAConsentState(i.getCCPAConsentState()),u):{setGDPRConsentState:h,addGDPRConsentState:s,setCCPAConsentState:v,getCCPAConsentState:y,getGDPRConsentState:a,removeGDPRConsentState:c,removeCCPAState:p,removeCCPAConsentState:o}}}function io(){this.getSDKConfiguration=function(n,t,i,r){var u,o,f,e;try{o=function(){f.readyState===4&&(f.status===200?(t=r._Helpers.extend({},t,JSON.parse(f.responseText)),i(n,t,r),r.Logger.verbose("Successfully received configuration from server")):(i(n,t,r),r.Logger.verbose("Issue with receiving configuration from server, received HTTP Code of "+f.status)))};f=r._Helpers.createXHR(o);u="https://"+r._Store.SDKConfig.configUrl+n+"/config?env=";u=t.isDevelopmentMode?u+"1":u+"0";e=t.dataPlan;e&&(e.planId&&(u=u+"&plan_id="+e.planId||""),e.planVersion&&(u=u+"&plan_version="+e.planVersion||""));f&&(f.open("get",u),f.send(null))}catch(s){i(n,t,r);r.Logger.error("Error getting forwarder configuration from mParticle servers.")}}}function ro(n){this.sendAliasRequest=function(t,i){var r,f=function(){var t,u;if(r.readyState===4){if(n.Logger.verbose("Received "+r.statusText+" from server"),r.status!==200&&r.status!==202&&r.responseText&&(t=JSON.parse(r.responseText),t.hasOwnProperty("message"))){u=t.message;n._Helpers.invokeAliasCallback(i,r.status,u);return}n._Helpers.invokeAliasCallback(i,r.status)}};if(n.Logger.verbose(gt.InformationMessages.SendAliasHttp),r=n._Helpers.createXHR(f),r)try{r.open("post",n._Helpers.createServiceUrl(n._Store.SDKConfig.aliasUrl,n._Store.devToken)+"/Alias");r.send(JSON.stringify(t))}catch(u){n._Helpers.invokeAliasCallback(i,ui.noHttpCoverage,u);n.Logger.error("Error sending alias request to mParticle servers. "+u)}};this.sendIdentityRequest=function(t,i,r,u,f,e){var o,s,c=function(){o.readyState===4&&(n.Logger.verbose("Received "+o.statusText+" from server"),f(o,s,r,u,i))};if(n.Logger.verbose(gt.InformationMessages.SendIdentityBegin),!t){n.Logger.error(gt.ErrorMessages.APIRequestEmpty);return}if(n.Logger.verbose(gt.InformationMessages.SendIdentityHttp),o=n._Helpers.createXHR(c),o)try{n._Store.identityCallInFlight?n._Helpers.invokeCallback(r,ui.activeIdentityRequest,"There is currently an Identity request processing. Please wait for this to return before requesting again"):(s=e||null,i==="modify"?o.open("post",n._Helpers.createServiceUrl(n._Store.SDKConfig.identityUrl)+e+"/"+i):o.open("post",n._Helpers.createServiceUrl(n._Store.SDKConfig.identityUrl)+i),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("x-mp-key",n._Store.devToken),n._Store.identityCallInFlight=!0,o.send(JSON.stringify(t)))}catch(h){n._Store.identityCallInFlight=!1;n._Helpers.invokeCallback(r,ui.noHttpCoverage,h);n.Logger.error("Error sending identity request to servers with status code "+o.status+" - "+h)}}}function ar(i){var r=this;this._instanceName=i;this._NativeSdkHelpers=new se(this);this._SessionManager=new ce(this);this._Persistence=new pe(this);this._Helpers=new oe(this);this._Events=new we(this);this._CookieSyncManager=new he(this);this._ServerModel=new hr(this);this._Ecommerce=new le(this);this._ForwardingStatsUploader=new ge(this);this._Consent=new to(this);this._IdentityAPIClient=new ro(this);this._preInit={readyQueue:[],integrationDelays:{},forwarderConstructors:[]};this.IdentityType=n.IdentityType;this.EventType=n.EventType;this.CommerceEventType=n.CommerceEventType;this.PromotionType=n.PromotionActionType;this.ProductActionType=n.ProductActionType;this._Identity=new no(this);this.Identity=this._Identity.IdentityAPI;this.generateHash=this._Helpers.generateHash;this.getDeviceId=this._Persistence.getDeviceId;typeof window!="undefined"&&window.mParticle&&window.mParticle.config&&window.mParticle.config.hasOwnProperty("rq")&&(this._preInit.readyQueue=window.mParticle.config.rq);this.init=function(n,t){if(t||console.warn("You did not pass a config object to init(). mParticle will not initialize properly"),fo(this,n,t),t)!t.hasOwnProperty("requestConfig")||t.requestConfig?(new io).getSDKConfiguration(n,t,vr,this):vr(n,t,this);else{console.error("No config available on the window, please pass a config object to mParticle.init()");return}};this.setLogLevel=function(n){r.Logger.setLogLevel(n)};this.reset=function(n){try{n._Persistence.resetPersistence();n._Store&&delete n._Store}catch(t){console.error("Cannot reset mParticle",t)}};this._resetForTests=function(n,t,i){i._Store&&delete i._Store;i._Store=new er(n,i);i._Store.isLocalStorageAvailable=i._Persistence.determineLocalStorageAvailability(window.localStorage);i._Events.stopTracking();t||i._Persistence.resetPersistence();i._Persistence.forwardingStatsBatches.uploadsTable={};i._Persistence.forwardingStatsBatches.forwardingStatsEventQueue=[];i._preInit={readyQueue:[],pixelConfigurations:[],integrationDelays:{},forwarderConstructors:[],isDevelopmentMode:!1}};this.ready=function(n){r.isInitialized()&&typeof n=="function"?n():r._preInit.readyQueue.push(n)};this.getEnvironment=function(){return r._Store.SDKConfig.isDevelopmentMode?n.Environment.Development:n.Environment.Production};this.getVersion=function(){return t.sdkVersion};this.setAppVersion=function(n){var t=v(function(){r.setAppVersion(n)},r);t||(r._Store.SDKConfig.appVersion=n,r._Persistence.update())};this.setDeviceId=function(n){var t=v(function(){r.setDeviceId(n)},r);t||this._Persistence.setDeviceId(n)};this.isInitialized=function(){return r._Store?r._Store.isInitialized:!1};this.getAppName=function(){return r._Store.SDKConfig.appName};this.setAppName=function(n){var t=v(function(){r.setAppName(n)},r);t||(r._Store.SDKConfig.appName=n)};this.getAppVersion=function(){return r._Store.SDKConfig.appVersion};this.stopTrackingLocation=function(){r._SessionManager.resetSessionTimer();r._Events.stopTracking()};this.startTrackingLocation=function(n){r._Helpers.Validators.isFunction(n)||r.Logger.warning("Warning: Location tracking is triggered, but not including a callback into the `startTrackingLocation` may result in events logged too quickly and not being associated with a location.");r._SessionManager.resetSessionTimer();r._Events.startTracking(n)};this.setPosition=function(n,t){var i=v(function(){r.setPosition(n,t)},r);i||(r._SessionManager.resetSessionTimer(),typeof n=="number"&&typeof t=="number"?r._Store.currentPosition={lat:n,lng:t}:r.Logger.error("Position latitude and/or longitude must both be of type number"))};this.startNewSession=function(){r._SessionManager.startNewSession()};this.endSession=function(){r._SessionManager.endSession(!0)};this.logBaseEvent=function(t,i){var u=v(function(){r.logBaseEvent(t,i)},r);if(!u){if(r._SessionManager.resetSessionTimer(),typeof t.name!="string"){r.Logger.error(it.ErrorMessages.EventNameInvalidType);return}if(t.eventType||(t.eventType=n.EventType.Unknown),!r._Helpers.canLog()){r.Logger.error(it.ErrorMessages.LoggingDisabled);return}r._Events.logEvent(t,i)}};this.logEvent=function(t,i,u,f,e){var o=v(function(){r.logEvent(t,i,u,f,e)},r);if(!o){if(r._SessionManager.resetSessionTimer(),typeof t!="string"){r.Logger.error(it.ErrorMessages.EventNameInvalidType);return}if(i||(i=n.EventType.Unknown),!r._Helpers.isEventType(i)){r.Logger.error("Invalid event type: "+i+", must be one of: \n"+JSON.stringify(n.EventType));return}if(!r._Helpers.canLog()){r.Logger.error(it.ErrorMessages.LoggingDisabled);return}r._Events.logEvent({messageType:n.MessageType.PageEvent,name:t,data:u,eventType:i,customFlags:f},e)}};this.logError=function(t,i){var o=v(function(){r.logError(t,i)},r),u,f,e;if(!o&&(r._SessionManager.resetSessionTimer(),t)){if(typeof t=="string"&&(t={message:t}),u={m:t.message?t.message:t,s:"Error",t:t.stack||null},i){f=r._Helpers.sanitizeAttributes(i,u.m);for(e in f)u[e]=f[e]}r._Events.logEvent({messageType:n.MessageType.CrashReport,name:t.name?t.name:"Error",data:u,eventType:n.EventType.Other})}};this.logLink=function(n,t,i,u){r._Events.addEventHandler("click",n,t,u,i)};this.logForm=function(n,t,i,u){r._Events.addEventHandler("submit",n,t,u,i)};this.logPageView=function(t,i,u,f){var e=v(function(){r.logPageView(t,i,u,f)},r);if(!e){if(r._SessionManager.resetSessionTimer(),r._Helpers.canLog()){if(r._Helpers.Validators.isStringOrNumber(t)||(t="PageView"),i){if(!r._Helpers.isObject(i)){r.Logger.error("The attributes argument must be an object. A "+a(i)+" was entered. Please correct and retry.");return}}else i={hostname:window.location.hostname,title:window.document.title};if(u&&!r._Helpers.isObject(u)){r.Logger.error("The customFlags argument must be an object. A "+a(u)+" was entered. Please correct and retry.");return}}r._Events.logEvent({messageType:n.MessageType.PageView,name:t,data:i,eventType:n.EventType.Unknown,customFlags:u},f)}};this.upload=function(){r._Helpers.canLog()&&(r._Store.webviewBridgeEnabled?r._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.Upload):r._APIClient.uploader.prepareAndUpload(!1,!1))};this.Consent={createCCPAConsent:r._Consent.createPrivacyConsent,createGDPRConsent:r._Consent.createPrivacyConsent,createConsentState:r._Consent.createConsentState};this.eCommerce={Cart:{add:function(n,t){r.Logger.warning("Deprecated function eCommerce.Cart.add() will be removed in future releases");var i,u=r.Identity.getCurrentUser();u&&(i=u.getMPID());r._Identity.mParticleUserCart(i).add(n,t)},remove:function(n,t){r.Logger.warning("Deprecated function eCommerce.Cart.remove() will be removed in future releases");var i,u=r.Identity.getCurrentUser();u&&(i=u.getMPID());r._Identity.mParticleUserCart(i).remove(n,t)},clear:function(){r.Logger.warning("Deprecated function eCommerce.Cart.clear() will be removed in future releases");var n,t=r.Identity.getCurrentUser();t&&(n=t.getMPID());r._Identity.mParticleUserCart(n).clear()}},setCurrencyCode:function(n){var t=v(function(){r.eCommerce.setCurrencyCode(n)},r);if(!t){if(typeof n!="string"){r.Logger.error("Code must be a string");return}r._SessionManager.resetSessionTimer();r._Store.currencyCode=n}},createProduct:function(n,t,i,u,f,e,o,s,h,c){return r._Ecommerce.createProduct(n,t,i,u,f,e,o,s,h,c)},createPromotion:function(n,t,i,u){return r._Ecommerce.createPromotion(n,t,i,u)},createImpression:function(n,t){return r._Ecommerce.createImpression(n,t)},createTransactionAttributes:function(n,t,i,u,f,e){return r._Ecommerce.createTransactionAttributes(n,t,i,u,f,e)},logCheckout:function(n,t,i,u){if(r.Logger.warning("mParticle.logCheckout is deprecated, please use mParticle.logProductAction instead"),!r._Store.isInitialized){r.ready(function(){r.eCommerce.logCheckout(n,t,i,u)});return}r._SessionManager.resetSessionTimer();r._Events.logCheckoutEvent(n,t,i,u)},logProductAction:function(n,t,i,u,f,e){var o=v(function(){r.eCommerce.logProductAction(n,t,i,u,f,e)},r);o||(r._SessionManager.resetSessionTimer(),r._Events.logProductActionEvent(n,t,i,u,f,e))},logPurchase:function(n,t,i,u,f){if(r.Logger.warning("mParticle.logPurchase is deprecated, please use mParticle.logProductAction instead"),!r._Store.isInitialized){r.ready(function(){r.eCommerce.logPurchase(n,t,i,u,f)});return}if(!n||!t){r.Logger.error(it.ErrorMessages.BadLogPurchase);return}r._SessionManager.resetSessionTimer();r._Events.logPurchaseEvent(n,t,u,f)},logPromotion:function(n,t,i,u,f){var e=v(function(){r.eCommerce.logPromotion(n,t,i,u,f)},r);e||(r._SessionManager.resetSessionTimer(),r._Events.logPromotionEvent(n,t,i,u,f))},logImpression:function(n,t,i,u){var f=v(function(){r.eCommerce.logImpression(n,t,i,u)},r);f||(r._SessionManager.resetSessionTimer(),r._Events.logImpressionEvent(n,t,i,u))},logRefund:function(n,t,i,u,f){if(r.Logger.warning("mParticle.logRefund is deprecated, please use mParticle.logProductAction instead"),!r._Store.isInitialized){r.ready(function(){r.eCommerce.logRefund(n,t,i,u,f)});return}r._SessionManager.resetSessionTimer();r._Events.logRefundEvent(n,t,u,f)},expandCommerceEvent:function(n){return r._Ecommerce.expandCommerceEvent(n)}};this.setSessionAttribute=function(n,i){var f=v(function(){r.setSessionAttribute(n,i)},r),u;if(!f&&r._Helpers.canLog()){if(!r._Helpers.Validators.isValidAttributeValue(i)){r.Logger.error(it.ErrorMessages.BadAttribute);return}if(!r._Helpers.Validators.isValidKeyValue(n)){r.Logger.error(it.ErrorMessages.BadKey);return}r._Store.webviewBridgeEnabled?r._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetSessionAttribute,JSON.stringify({key:n,value:i})):(u=r._Helpers.findKeyInObject(r._Store.sessionAttributes,n),u&&(n=u),r._Store.sessionAttributes[n]=i,r._Persistence.update(),r._Forwarders.applyToForwarders("setSessionAttribute",[n,i]))}};this.setOptOut=function(n){var t=v(function(){r.setOptOut(n)},r);t||(r._SessionManager.resetSessionTimer(),r._Store.isEnabled=!n,r._Events.logOptOut(),r._Persistence.update(),r._Store.activeForwarders.length&&r._Store.activeForwarders.forEach(function(t){if(t.setOptOut){var i=t.setOptOut(n);i&&r.Logger.verbose(i)}}))};this.setIntegrationAttribute=function(n,t){var u=v(function(){r.setIntegrationAttribute(n,t)},r),i;if(!u){if(typeof n!="number"){r.Logger.error("integrationId must be a number");return}if(t===null)r._Store.integrationAttributes[n]={};else if(r._Helpers.isObject(t))if(Object.keys(t).length===0)r._Store.integrationAttributes[n]={};else for(i in t)if(typeof i=="string")if(typeof t[i]=="string")r._Helpers.isObject(r._Store.integrationAttributes[n])?r._Store.integrationAttributes[n][i]=t[i]:(r._Store.integrationAttributes[n]={},r._Store.integrationAttributes[n][i]=t[i]);else{r.Logger.error("Values for integration attributes must be strings. You entered a "+a(t[i]));continue}else{r.Logger.error("Keys must be strings, you entered a "+a(i));continue}else{r.Logger.error("Attrs must be an object with keys and values. You entered a "+a(t));return}r._Persistence.update()}};this.getIntegrationAttributes=function(n){return r._Store.integrationAttributes[n]?r._Store.integrationAttributes[n]:{}};this.addForwarder=function(n){r._preInit.forwarderConstructors.push(n)};this.configurePixel=function(n){r._Forwarders.configurePixel(n)};this._getActiveForwarders=function(){return r._Store.activeForwarders};this._getIntegrationDelays=function(){return r._preInit.integrationDelays};this._setIntegrationDelay=function(n,t){var i,u;(r._preInit.integrationDelays[n]=t,t!==!0)&&(i=Object.keys(r._preInit.integrationDelays),i.length!==0)&&(u=i.some(function(n){return r._preInit.integrationDelays[n]===!0}),u||r._APIClient.processQueuedEvents())};this._setWrapperSDKInfo=function(n,t){var i=v(function(){r._setWrapperSDKInfo(n,t)},r);i||r._Store.wrapperSDKInfo!==undefined&&r._Store.wrapperSDKInfo.isInfoSet||(r._Store.wrapperSDKInfo={name:n,version:t,isInfoSet:!0})}}function vr(n,i,r){var s=uo(i,r),u,o,f,e;if(r._APIClient=new ee(r,s),r._Forwarders=new be(r,s),i.flags&&i.flags.hasOwnProperty(t.FeatureFlags.EventBatchingIntervalMillis)&&(r._Store.SDKConfig.flags[t.FeatureFlags.EventBatchingIntervalMillis]=i.flags[t.FeatureFlags.EventBatchingIntervalMillis]),r._Store.storageName=r._Helpers.createMainStorageName(i.workspaceToken),r._Store.prodStorageName=r._Helpers.createProductStorageName(i.workspaceToken),i.hasOwnProperty("workspaceToken")?r._Store.SDKConfig.workspaceToken=i.workspaceToken:r.Logger.warning("You should have a workspaceToken on your config object for security purposes."),i.hasOwnProperty("requiredWebviewBridgeName")?r._Store.SDKConfig.requiredWebviewBridgeName=i.requiredWebviewBridgeName:i.hasOwnProperty("workspaceToken")&&(r._Store.SDKConfig.requiredWebviewBridgeName=i.workspaceToken),r._Store.webviewBridgeEnabled=r._NativeSdkHelpers.isWebviewEnabled(r._Store.SDKConfig.requiredWebviewBridgeName,r._Store.SDKConfig.minWebviewBridgeVersion),r._Store.configurationLoaded=!0,r._Store.webviewBridgeEnabled||r._Persistence.initializeStorage(),r._Store.webviewBridgeEnabled)r._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetSessionAttribute,JSON.stringify({key:"$src_env",value:"webview"})),n&&r._NativeSdkHelpers.sendToNative(t.NativeSdkPaths.SetSessionAttribute,JSON.stringify({key:"$src_key",value:n}));else{if(r._Helpers.isObject(r._Store.SDKConfig.identifyRequest)&&r._Helpers.isObject(r._Store.SDKConfig.identifyRequest.userIdentities)&&Object.keys(r._Store.SDKConfig.identifyRequest.userIdentities).length===0||!r._Store.SDKConfig.identifyRequest){if(o={},u=r.Identity.getCurrentUser(),u){f=u.getUserIdentities().userIdentities||{};for(e in f)f.hasOwnProperty(e)&&(o[e]=f[e])}r._Store.SDKConfig.identifyRequest={userIdentities:o}}u=r.Identity.getCurrentUser();r._Helpers.getFeatureFlag(t.FeatureFlags.ReportBatching)&&r._ForwardingStatsUploader.startForwardingStatsTimer();r._Forwarders.processForwarders(i,r._APIClient.prepareForwardingStats);r._Forwarders.processPixelConfigs(i);r._SessionManager.initialize();r._Events.logAST();!r._Store.identifyCalled&&r._Store.SDKConfig.identityCallback&&u&&u.getMPID()&&r._Store.SDKConfig.identityCallback({httpCode:lr.activeSession,getUser:function(){return r._Identity.mParticleUser(u.getMPID())},getPreviousUser:function(){var t=r.Identity.getUsers(),n=t.shift();return n&&u&&n.getMPID()===u.getMPID()&&(n=t.shift()),n||null},body:{mpid:u.getMPID(),is_logged_in:r._Store.isLoggedIn,matched_identities:u.getUserIdentities().userIdentities,context:null,is_ephemeral:!1}})}r._Store.isInitialized=!0;r._preInit.readyQueue&&r._preInit.readyQueue.length&&(r._preInit.readyQueue.forEach(function(n){r._Helpers.Validators.isFunction(n)?n():Array.isArray(n)&&eo(n,r)}),r._preInit.readyQueue=[]);r._Store.isFirstRun&&(r._Store.isFirstRun=!1)}function uo(n,t){var f,i,u,r;return n.dataPlanOptions&&(t.Logger.verbose("Customer provided data plan found"),r=n.dataPlanOptions,i={document:{dtpn:{vers:r.dataPlanVersion,blok:{ev:r.blockEvents,ea:r.blockEventAttributes,ua:r.blockUserAttributes,id:r.blockUserIdentities}}}}),i||(n.dataPlan&&n.dataPlan.document?n.dataPlan.document.error_message?u=n.dataPlan.document.error_message:(t.Logger.verbose("Data plan found from mParticle.js"),i=n.dataPlan):n.dataPlanResult&&(n.dataPlanResult.error_message?u=n.dataPlanResult.error_message:(t.Logger.verbose("Data plan found from /config"),i={document:n.dataPlanResult}))),u&&t.Logger.error(u),i&&(f=new cr(i,t)),f}function fo(n,t,i){n.Logger=new ve(i);n._Store=new er(i,n);window.mParticle.Store=n._Store;n._Store.devToken=t||null;n.Logger.verbose(it.InformationMessages.StartingInitialization);try{n._Store.isLocalStorageAvailable=n._Persistence.determineLocalStorageAvailability(window.localStorage)}catch(r){n.Logger.warning("localStorage is not available, using cookies if available");n._Store.isLocalStorageAvailable=!1}}function eo(n,t){var i=n,e=i.splice(0,1)[0],f,r,u,o;if(mParticle[i[0]])mParticle[e].apply(this,i);else{f=e.split(".");try{for(r=mParticle,u=0;u<f.length;u++)o=f[u],r=r[o];r.apply(this,i)}catch(s){t.Logger.verbose("Unable to compute proper mParticle function "+s)}}}function v(n,t){return t.isInitialized()?!1:(t.ready(function(){n()}),!0)}function oo(){var i=this;this.Store={};this._instances={};this.IdentityType=n.IdentityType;this.EventType=n.EventType;this.CommerceEventType=n.CommerceEventType;this.PromotionType=n.PromotionActionType;this.ProductActionType=n.ProductActionType;this.MPSideloadedKit=br;typeof window!="undefined"&&(this.isIOS=window.mParticle&&window.mParticle.isIOS?window.mParticle.isIOS:!1,this.config=window.mParticle&&window.mParticle.config?window.mParticle.config:{});this.init=function(n,r,u){!r&&window.mParticle&&window.mParticle.config&&(console.warn("You did not pass a config object to mParticle.init(). Attempting to use the window.mParticle.config if it exists. Please note that in a future release, this may not work and mParticle will not initialize properly"),r=window.mParticle?window.mParticle.config:{});u=(!u||u.length===0?t.DefaultInstance:u).toLowerCase();var f=i._instances[u];f===undefined&&(f=new ar(n),i._instances[u]=f);f.init(n,r,u)};this.getInstance=function(n){var r;return n?(r=i._instances[n.toLowerCase()],!r)?(console.log("You tried to initialize an instance named "+n+". This instance does not exist. Check your instance name or initialize a new instance with this name before calling it."),null):r:(n=t.DefaultInstance,r=i._instances[n],r||(r=new ar(n),i._instances[t.DefaultInstance]=r),r)};this.getDeviceId=function(){return i.getInstance().getDeviceId()};this.setDeviceId=function(n){return i.getInstance().setDeviceId(n)};this.isInitialized=function(){return i.getInstance().isInitialized()};this.startNewSession=function(){i.getInstance().startNewSession()};this.endSession=function(){i.getInstance().endSession()};this.setLogLevel=function(n){i.getInstance().setLogLevel(n)};this.ready=function(n){i.getInstance().ready(n)};this.setAppVersion=function(n){i.getInstance().setAppVersion(n)};this.getAppName=function(){return i.getInstance().getAppName()};this.setAppName=function(n){i.getInstance().setAppName(n)};this.getAppVersion=function(){return i.getInstance().getAppVersion()};this.getEnvironment=function(){return i.getInstance().getEnvironment()};this.stopTrackingLocation=function(){i.getInstance().stopTrackingLocation()};this.startTrackingLocation=function(n){i.getInstance().startTrackingLocation(n)};this.setPosition=function(n,t){i.getInstance().setPosition(n,t)};this.startNewSession=function(){i.getInstance().startNewSession()};this.endSession=function(){i.getInstance().endSession()};this.logBaseEvent=function(n,t){i.getInstance().logBaseEvent(n,t)};this.logEvent=function(n,t,r,u,f){i.getInstance().logEvent(n,t,r,u,f)};this.logError=function(n,t){i.getInstance().logError(n,t)};this.logLink=function(n,t,r,u){i.getInstance().logLink(n,t,r,u)};this.logForm=function(n,t,r,u){i.getInstance().logForm(n,t,r,u)};this.logPageView=function(n,t,r,u){i.getInstance().logPageView(n,t,r,u)};this.upload=function(){i.getInstance().upload()};this.eCommerce={Cart:{add:function(n,t){i.getInstance().eCommerce.Cart.add(n,t)},remove:function(n,t){i.getInstance().eCommerce.Cart.remove(n,t)},clear:function(){i.getInstance().eCommerce.Cart.clear()}},setCurrencyCode:function(n){i.getInstance().eCommerce.setCurrencyCode(n)},createProduct:function(n,t,r,u,f,e,o,s,h,c){return i.getInstance().eCommerce.createProduct(n,t,r,u,f,e,o,s,h,c)},createPromotion:function(n,t,r,u){return i.getInstance().eCommerce.createPromotion(n,t,r,u)},createImpression:function(n,t){return i.getInstance().eCommerce.createImpression(n,t)},createTransactionAttributes:function(n,t,r,u,f,e){return i.getInstance().eCommerce.createTransactionAttributes(n,t,r,u,f,e)},logCheckout:function(n,t,r,u){i.getInstance().eCommerce.logCheckout(n,t,r,u)},logProductAction:function(n,t,r,u,f,e){i.getInstance().eCommerce.logProductAction(n,t,r,u,f,e)},logPurchase:function(n,t,r,u,f){i.getInstance().eCommerce.logPurchase(n,t,r,u,f)},logPromotion:function(n,t,r,u,f){i.getInstance().eCommerce.logPromotion(n,t,r,u,f)},logImpression:function(n,t,r,u){i.getInstance().eCommerce.logImpression(n,t,r,u)},logRefund:function(n,t,r,u,f){i.getInstance().eCommerce.logRefund(n,t,r,u,f)},expandCommerceEvent:function(n){return i.getInstance().eCommerce.expandCommerceEvent(n)}};this.setSessionAttribute=function(n,t){i.getInstance().setSessionAttribute(n,t)};this.setOptOut=function(n){i.getInstance().setOptOut(n)};this.setIntegrationAttribute=function(n,t){i.getInstance().setIntegrationAttribute(n,t)};this.getIntegrationAttributes=function(n){return i.getInstance().getIntegrationAttributes(n)};this.Identity={HTTPCodes:i.getInstance().Identity.HTTPCodes,aliasUsers:function(n,t){i.getInstance().Identity.aliasUsers(n,t)},createAliasRequest:function(n,t){return i.getInstance().Identity.createAliasRequest(n,t)},getCurrentUser:function(){return i.getInstance().Identity.getCurrentUser()},getUser:function(n){return i.getInstance().Identity.getUser(n)},getUsers:function(){return i.getInstance().Identity.getUsers()},identify:function(n,t){i.getInstance().Identity.identify(n,t)},login:function(n,t){i.getInstance().Identity.login(n,t)},logout:function(n,t){i.getInstance().Identity.logout(n,t)},modify:function(n,t){i.getInstance().Identity.modify(n,t)}};this.sessionManager={getSession:function(){return i.getInstance()._SessionManager.getSession()}};this.Consent={createConsentState:function(){return i.getInstance().Consent.createConsentState()},createGDPRConsent:function(n,t,r,u,f){return i.getInstance().Consent.createGDPRConsent(n,t,r,u,f)},createCCPAConsent:function(n,t,r,u,f){return i.getInstance().Consent.createGDPRConsent(n,t,r,u,f)}};this.reset=function(){i.getInstance().reset(i.getInstance())};this._resetForTests=function(n,t){typeof t=="boolean"?i.getInstance()._resetForTests(n,t,i.getInstance()):i.getInstance()._resetForTests(n,!1,i.getInstance())};this.configurePixel=function(n){i.getInstance().configurePixel(n)};this._setIntegrationDelay=function(n,t){i.getInstance()._setIntegrationDelay(n,t)};this._getIntegrationDelays=function(){return i.getInstance()._getIntegrationDelays()};this.getVersion=function(){return i.getInstance().getVersion()};this.generateHash=function(n){return i.getInstance().generateHash(n)};this.addForwarder=function(n){i.getInstance().addForwarder(n)};this._getActiveForwarders=function(){return i.getInstance()._getActiveForwarders()};this._setWrapperSDKInfo=function(n,t){i.getInstance()._setWrapperSDKInfo(n,t)}}var b={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(n){try{if(window.btoa&&window.atob)return window.btoa(unescape(encodeURIComponent(n)))}catch(t){console.error("Error encoding cookie values into Base64:"+t)}return this._encode(n)},_encode:function(n){var f="",e,t,i,s,h,o,r,u=0;for(n=yi.encode(n);u<n.length;)e=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),s=e>>2,h=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),f=f+b._keyStr.charAt(s)+b._keyStr.charAt(h)+b._keyStr.charAt(o)+b._keyStr.charAt(r);return f},decode:function(n){try{if(window.btoa&&window.atob)return decodeURIComponent(escape(window.atob(n)))}catch(t){}return b._decode(n)},_decode:function(n){var t="",e,o,s,h,u,r,f,i=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<n.length;)h=b._keyStr.indexOf(n.charAt(i++)),u=b._keyStr.indexOf(n.charAt(i++)),r=b._keyStr.indexOf(n.charAt(i++)),f=b._keyStr.indexOf(n.charAt(i++)),e=h<<2|u>>4,o=(u&15)<<4|r>>2,s=(r&3)<<6|f,t=t+String.fromCharCode(e),r!==64&&(t=t+String.fromCharCode(o)),f!==64&&(t=t+String.fromCharCode(s));return yi.decode(t)}},yi={encode:function(n){for(var t,i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},decode:function(n){for(var r="",t=0,i=0,u=0,f=0;t<n.length;)i=n.charCodeAt(t),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(u=n.charCodeAt(t+1),r+=String.fromCharCode((i&31)<<6|u&63),t+=2):(u=n.charCodeAt(t+1),f=n.charCodeAt(t+2),r+=String.fromCharCode((i&15)<<12|(u&63)<<6|f&63),t+=3);return r}},ct={forEach:function(n,t){var u,i,r,f,e;if(this==null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(u=t),i=0;i<f;)i in r&&(e=r[i],n.call(u,e,i,r)),i++},map:function(n,t){var e,u,i,r,f,o,s;if(this===null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(e=t),u=new Array(f),i=0;i<f;)i in r&&(o=r[i],s=n.call(e,o,i,r),u[i]=s),i++;return u},filter:function(n){var i,f,r,e,t,u;if(this===void 0||this===null)throw new TypeError;if(i=Object(this),f=i.length>>>0,typeof n!="function")throw new TypeError;for(r=[],e=arguments.length>=2?arguments[1]:void 0,t=0;t<f;t++)t in i&&(u=i[t],n.call(e,u,t,i)&&r.push(u));return r},isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"},Base64:b},lt,ni={SessionStart:1,SessionEnd:2,PageView:3,PageEvent:4,CrashReport:5,OptOut:6,AppStateTransition:10,Profile:14,Commerce:16,Media:20,UserAttributeChange:17,UserIdentityChange:18},gr=(lt={},ei(lt,ni.Commerce,1),ei(lt,ni.UserAttributeChange,1),ei(lt,ni.UserIdentityChange,1),lt),nt={Unknown:0,Navigation:1,Location:2,Search:3,Transaction:4,UserContent:5,UserPreference:6,Social:7,Other:8,Media:9,getName:function(n){switch(n){case nt.Unknown:return"Unknown";case nt.Navigation:return"Navigation";case nt.Location:return"Location";case nt.Search:return"Search";case nt.Transaction:return"Transaction";case nt.UserContent:return"User Content";case nt.UserPreference:return"User Preference";case nt.Social:return"Social";case p.ProductAddToCart:return"Product Added to Cart";case p.ProductAddToWishlist:return"Product Added to Wishlist";case p.ProductCheckout:return"Product Checkout";case p.ProductCheckoutOption:return"Product Checkout Options";case p.ProductClick:return"Product Click";case p.ProductImpression:return"Product Impression";case p.ProductPurchase:return"Product Purchased";case p.ProductRefund:return"Product Refunded";case p.ProductRemoveFromCart:return"Product Removed From Cart";case p.ProductRemoveFromWishlist:return"Product Removed from Wishlist";case p.ProductViewDetail:return"Product View Details";case p.PromotionClick:return"Promotion Click";case p.PromotionView:return"Promotion View";default:return"Other"}}},p={ProductAddToCart:10,ProductRemoveFromCart:11,ProductCheckout:12,ProductCheckoutOption:13,ProductClick:14,ProductViewDetail:15,ProductPurchase:16,ProductRefund:17,PromotionView:18,PromotionClick:19,ProductAddToWishlist:20,ProductRemoveFromWishlist:21,ProductImpression:22},r={Other:0,CustomerId:1,Facebook:2,Twitter:3,Google:4,Microsoft:5,Yahoo:6,Email:7,FacebookCustomAudienceId:9,Other2:10,Other3:11,Other4:12,Other5:13,Other6:14,Other7:15,Other8:16,Other9:17,Other10:18,MobileNumber:19,PhoneNumber2:20,PhoneNumber3:21},e,rt,tt,w,o,pi,i,yt,fr,st,bt,ot,dt,sr,s,c,l,u,cr,ui,gt,it,lr,f,yr,fi,pr,wr,br,vi;r.isValid=function(n){if(typeof n=="number")for(var t in r)if(r.hasOwnProperty(t)&&r[t]===n)return!0;return!1};r.getName=function(n){switch(n){case window.mParticle.IdentityType.CustomerId:return"Customer ID";case window.mParticle.IdentityType.Facebook:return"Facebook ID";case window.mParticle.IdentityType.Twitter:return"Twitter ID";case window.mParticle.IdentityType.Google:return"Google ID";case window.mParticle.IdentityType.Microsoft:return"Microsoft ID";case window.mParticle.IdentityType.Yahoo:return"Yahoo ID";case window.mParticle.IdentityType.Email:return"Email";case window.mParticle.IdentityType.FacebookCustomAudienceId:return"Facebook App User ID";default:return"Other ID"}};r.getIdentityType=function(n){switch(n){case"other":return r.Other;case"customerid":return r.CustomerId;case"facebook":return r.Facebook;case"twitter":return r.Twitter;case"google":return r.Google;case"microsoft":return r.Microsoft;case"yahoo":return r.Yahoo;case"email":return r.Email;case"facebookcustomaudienceid":return r.FacebookCustomAudienceId;case"other2":return r.Other2;case"other3":return r.Other3;case"other4":return r.Other4;case"other5":return r.Other5;case"other6":return r.Other6;case"other7":return r.Other7;case"other8":return r.Other8;case"other9":return r.Other9;case"other10":return r.Other10;case"mobile_number":return r.MobileNumber;case"phone_number_2":return r.PhoneNumber2;case"phone_number_3":return r.PhoneNumber3;default:return!1}};r.getIdentityName=function(n){switch(n){case r.Other:return"other";case r.CustomerId:return"customerid";case r.Facebook:return"facebook";case r.Twitter:return"twitter";case r.Google:return"google";case r.Microsoft:return"microsoft";case r.Yahoo:return"yahoo";case r.Email:return"email";case r.FacebookCustomAudienceId:return"facebookcustomaudienceid";case r.Other2:return"other2";case r.Other3:return"other3";case r.Other4:return"other4";case r.Other5:return"other5";case r.Other6:return"other6";case r.Other7:return"other7";case r.Other8:return"other8";case r.Other9:return"other9";case r.Other10:return"other10";case r.MobileNumber:return"mobile_number";case r.PhoneNumber2:return"phone_number_2";case r.PhoneNumber3:return"phone_number_3"}};e={Unknown:0,AddToCart:1,RemoveFromCart:2,Checkout:3,CheckoutOption:4,Click:5,ViewDetail:6,Purchase:7,Refund:8,AddToWishlist:9,RemoveFromWishlist:10};e.getName=function(n){switch(n){case e.AddToCart:return"Add to Cart";case e.RemoveFromCart:return"Remove from Cart";case e.Checkout:return"Checkout";case e.CheckoutOption:return"Checkout Option";case e.Click:return"Click";case e.ViewDetail:return"View Detail";case e.Purchase:return"Purchase";case e.Refund:return"Refund";case e.AddToWishlist:return"Add to Wishlist";case e.RemoveFromWishlist:return"Remove from Wishlist";default:return"Unknown"}};e.getExpansionName=function(n){switch(n){case e.AddToCart:return"add_to_cart";case e.RemoveFromCart:return"remove_from_cart";case e.Checkout:return"checkout";case e.CheckoutOption:return"checkout_option";case e.Click:return"click";case e.ViewDetail:return"view_detail";case e.Purchase:return"purchase";case e.Refund:return"refund";case e.AddToWishlist:return"add_to_wishlist";case e.RemoveFromWishlist:return"remove_from_wishlist";default:return"unknown"}};rt={Unknown:0,PromotionView:1,PromotionClick:2};rt.getName=function(n){switch(n){case rt.PromotionView:return"view";case rt.PromotionClick:return"click";default:return"unknown"}};rt.getExpansionName=function(n){switch(n){case rt.PromotionView:return"view";case rt.PromotionClick:return"click";default:return"unknown"}};var n={MessageType:ni,EventType:nt,CommerceEventType:p,IdentityType:r,ProfileMessageType:{Logout:3},ApplicationTransitionType:{AppInit:1},ProductActionType:e,PromotionActionType:rt,TriggerUploadType:gr,Environment:{Production:"production",Development:"development"}},t={sdkVersion:"2.23.4",sdkVendor:"mparticle",platform:"web",Messages:{DeprecationMessages:{MethodIsDeprecatedPostfix:"is a deprecated method and will be removed in future releases",AlternativeMethodPrefix:"Please use the alternate method:"},ErrorMessages:{NoToken:"A token must be specified.",EventNameInvalidType:"Event name must be a valid string value.",EventDataInvalidType:"Event data must be a valid object hash.",LoggingDisabled:"Event logging is currently disabled.",CookieParseError:"Could not parse cookie",EventEmpty:"Event object is null or undefined, cancelling send",APIRequestEmpty:"APIRequest is null or undefined, cancelling send",NoEventType:"Event type must be specified.",TransactionIdRequired:"Transaction ID is required",TransactionRequired:"A transaction attributes object is required",PromotionIdRequired:"Promotion ID is required",BadAttribute:"Attribute value cannot be object or array",BadKey:"Key value cannot be object or array",BadLogPurchase:"Transaction attributes and a product are both required to log a purchase, https://docs.mparticle.com/?javascript#measuring-transactions"},InformationMessages:{CookieSearch:"Searching for cookie",CookieFound:"Cookie found, parsing values",CookieNotFound:"Cookies not found",CookieSet:"Setting cookie",CookieSync:"Performing cookie sync",SendBegin:"Starting to send event",SendIdentityBegin:"Starting to send event to identity server",SendWindowsPhone:"Sending event to Windows Phone container",SendIOS:"Calling iOS path: ",SendAndroid:"Calling Android JS interface method: ",SendHttp:"Sending event to mParticle HTTP service",SendAliasHttp:"Sending alias request to mParticle HTTP service",SendIdentityHttp:"Sending event to mParticle HTTP service",StartingNewSession:"Starting new Session",StartingLogEvent:"Starting to log event",StartingLogOptOut:"Starting to log user opt in/out",StartingEndSession:"Starting to end session",StartingInitialization:"Starting to initialize",StartingLogCommerceEvent:"Starting to log commerce event",StartingAliasRequest:"Starting to Alias MPIDs",LoadingConfig:"Loading configuration options",AbandonLogEvent:"Cannot log event, logging disabled or developer token not set",AbandonAliasUsers:"Cannot Alias Users, logging disabled or developer token not set",AbandonStartSession:"Cannot start session, logging disabled or developer token not set",AbandonEndSession:"Cannot end session, logging disabled or developer token not set",NoSessionToEnd:"Cannot end session, no active session found"},ValidationMessages:{ModifyIdentityRequestUserIdentitiesPresent:"identityRequests to modify require userIdentities to be present. Request not sent to server. Please fix and try again",IdentityRequesetInvalidKey:"There is an invalid key on your identityRequest object. It can only contain a `userIdentities` object and a `onUserAlias` function. Request not sent to server. Please fix and try again.",OnUserAliasType:"The onUserAlias value must be a function.",UserIdentities:"The userIdentities key must be an object with keys of identityTypes and values of strings. Request not sent to server. Please fix and try again.",UserIdentitiesInvalidKey:"There is an invalid identity key on your `userIdentities` object within the identityRequest. Request not sent to server. Please fix and try again.",UserIdentitiesInvalidValues:"All user identity values must be strings or null. Request not sent to server. Please fix and try again.",AliasMissingMpid:"Alias Request must contain both a destinationMpid and a sourceMpid",AliasNonUniqueMpid:"Alias Request's destinationMpid and sourceMpid must be unique",AliasMissingTime:"Alias Request must have both a startTime and an endTime",AliasStartBeforeEndTime:"Alias Request's endTime must be later than its startTime"}},NativeSdkPaths:{LogEvent:"logEvent",SetUserTag:"setUserTag",RemoveUserTag:"removeUserTag",SetUserAttribute:"setUserAttribute",RemoveUserAttribute:"removeUserAttribute",SetSessionAttribute:"setSessionAttribute",AddToCart:"addToCart",RemoveFromCart:"removeFromCart",ClearCart:"clearCart",LogOut:"logOut",SetUserAttributeList:"setUserAttributeList",RemoveAllUserAttributes:"removeAllUserAttributes",GetUserAttributesLists:"getUserAttributesLists",GetAllUserAttributes:"getAllUserAttributes",Identify:"identify",Logout:"logout",Login:"login",Modify:"modify",Alias:"aliasUsers",Upload:"upload"},StorageNames:{localStorageName:"mprtcl-api",localStorageNameV3:"mprtcl-v3",cookieName:"mprtcl-api",cookieNameV2:"mprtcl-v2",cookieNameV3:"mprtcl-v3",localStorageNameV4:"mprtcl-v4",localStorageProductsV4:"mprtcl-prodv4",cookieNameV4:"mprtcl-v4",currentStorageName:"mprtcl-v4",currentStorageProductsName:"mprtcl-prodv4"},DefaultConfig:{cookieDomain:null,cookieExpiration:365,logLevel:null,timeout:300,sessionTimeout:30,maxProducts:20,forwarderStatsTimeout:5e3,integrationDelayTimeout:5e3,maxCookieSize:3e3,aliasMaxWindow:90,uploadInterval:0},DefaultUrls:{v1SecureServiceUrl:"jssdks.mparticle.com/v1/JS/",v2SecureServiceUrl:"jssdks.mparticle.com/v2/JS/",v3SecureServiceUrl:"jssdks.mparticle.com/v3/JS/",configUrl:"jssdkcdns.mparticle.com/JS/v2/",identityUrl:"identity.mparticle.com/v1/",aliasUrl:"jssdks.mparticle.com/v1/identity/"},Base64CookieKeys:{csm:1,sa:1,ss:1,ua:1,ui:1,csd:1,ia:1,con:1},SDKv2NonMPIDCookieKeys:{gs:1,cu:1,l:1,globalSettings:1,currentUserMPID:1},HTTPCodes:{noHttpCoverage:-1,activeIdentityRequest:-2,activeSession:-3,validationIssue:-4,nativeIdentityRequest:-5,loggingDisabledOrMissingAPIKey:-6,tooManyRequests:429},FeatureFlags:{ReportBatching:"reportBatching",EventBatchingIntervalMillis:"eventBatchingIntervalMillis",OfflineStorage:"offlineStorage"},DefaultInstance:"default_instance",CCPAPurpose:"data_sale_opt_out"},oi=function(n,t){return oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},oi(n,t)};tt=function(){return tt=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tt.apply(this,arguments)};typeof SuppressedError=="function"?SuppressedError:function(n,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=n,r.suppressed=t,r},function(n){n[n.Unknown=0]="Unknown";n[n.AddToCart=1]="AddToCart";n[n.RemoveFromCart=2]="RemoveFromCart";n[n.Checkout=3]="Checkout";n[n.CheckoutOption=4]="CheckoutOption";n[n.Click=5]="Click";n[n.ViewDetail=6]="ViewDetail";n[n.Purchase=7]="Purchase";n[n.Refund=8]="Refund";n[n.AddToWishlist=9]="AddToWishlist";n[n.RemoveFromWishlist=10]="RemoveFromWishlist"}(w||(w={})),function(n){n.other="other";n.customerId="customerid";n.facebook="facebook";n.twitter="twitter";n.google="google";n.microsoft="microsoft";n.yahoo="yahoo";n.email="email";n.alias="alias";n.facebookCustomAudienceId="facebookcustomaudienceid";n.otherId2="other2";n.otherId3="other3";n.otherId4="other4";n.otherId5="other5";n.otherId6="other6";n.otherId7="other7";n.otherId8="other8";n.otherId9="other9";n.otherId10="other10";n.mobileNumber="mobile_number";n.phoneNumber2="phone_number_2";n.phoneNumber3="phone_number_3"}(o||(o={}));pi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};i={},function(n){Object.defineProperty(n,"__esModule",{value:!0}),function(n){n.unknown="Unknown";n.iOS="IOS";n.android="Android";n.windowsPhone="WindowsPhone";n.mobileWeb="MobileWeb";n.unityIOS="UnityIOS";n.unityAndroid="UnityAndroid";n.desktop="Desktop";n.tvOS="TVOS";n.roku="Roku";n.outOfBand="OutOfBand";n.alexa="Alexa";n.smartTV="SmartTV";n.fireTV="FireTV";n.xbox="Xbox"}(n.ApplicationInformationOsEnum||(n.ApplicationInformationOsEnum={})),function(n){n.applicationStateTransition="application_state_transition"}(n.ApplicationStateTransitionEventEventTypeEnum||(n.ApplicationStateTransitionEventEventTypeEnum={})),function(n){n.applicationInitialized="application_initialized";n.applicationExit="application_exit";n.applicationBackground="application_background";n.applicationForeground="application_foreground"}(n.ApplicationStateTransitionEventDataApplicationTransitionTypeEnum||(n.ApplicationStateTransitionEventDataApplicationTransitionTypeEnum={})),function(n){n.unknown="unknown";n.development="development";n.production="production"}(n.BatchEnvironmentEnum||(n.BatchEnvironmentEnum={})),function(n){n.breadcrumb="breadcrumb"}(n.BreadcrumbEventEventTypeEnum||(n.BreadcrumbEventEventTypeEnum={})),function(n){n.commerceEvent="commerce_event"}(n.CommerceEventEventTypeEnum||(n.CommerceEventEventTypeEnum={})),function(n){n.addToCart="add_to_cart";n.removeFromCart="remove_from_cart";n.checkout="checkout";n.checkoutOption="checkout_option";n.click="click";n.viewDetail="view_detail";n.purchase="purchase";n.refund="refund";n.promotionView="promotion_view";n.promotionClick="promotion_click";n.addToWishlist="add_to_wishlist";n.removeFromWishlist="remove_from_wishlist";n.impression="impression"}(n.CommerceEventDataCustomEventTypeEnum||(n.CommerceEventDataCustomEventTypeEnum={})),function(n){n.crashReport="crash_report"}(n.CrashReportEventEventTypeEnum||(n.CrashReportEventEventTypeEnum={})),function(n){n.customEvent="custom_event"}(n.CustomEventEventTypeEnum||(n.CustomEventEventTypeEnum={})),function(n){n.navigation="navigation";n.location="location";n.search="search";n.transaction="transaction";n.userContent="user_content";n.userPreference="user_preference";n.social="social";n.media="media";n.other="other";n.unknown="unknown"}(n.CustomEventDataCustomEventTypeEnum||(n.CustomEventDataCustomEventTypeEnum={})),function(n){n.portrait="portrait";n.portraitUpsideDown="portrait_upside_down";n.landscape="landscape";n.landscapeLeft="LandscapeLeft";n.landscapeRight="LandscapeRight";n.faceUp="FaceUp";n.faceDown="FaceDown";n.square="Square"}(n.DeviceCurrentStateDeviceOrientationEnum||(n.DeviceCurrentStateDeviceOrientationEnum={})),function(n){n.portrait="portrait";n.portraitUpsideDown="portrait_upside_down";n.landscape="landscape";n.landscapeLeft="LandscapeLeft";n.landscapeRight="LandscapeRight";n.faceUp="FaceUp";n.faceDown="FaceDown";n.square="Square"}(n.DeviceCurrentStateStatusBarOrientationEnum||(n.DeviceCurrentStateStatusBarOrientationEnum={})),function(n){n.iOS="iOS";n.android="Android";n.web="web";n.desktop="desktop";n.tvOS="tvOS";n.roku="roku";n.outOfBand="out_of_band";n.smartTV="smart_tv";n.xbox="xbox"}(n.DeviceInformationPlatformEnum||(n.DeviceInformationPlatformEnum={})),function(n){n.unknown="unknown";n.sessionStart="session_start";n.sessionEnd="session_end";n.screenView="screen_view";n.customEvent="custom_event";n.crashReport="crash_report";n.optOut="opt_out";n.firstRun="first_run";n.preAttribution="pre_attribution";n.pushRegistration="push_registration";n.applicationStateTransition="application_state_transition";n.pushMessage="push_message";n.networkPerformance="network_performance";n.breadcrumb="breadcrumb";n.profile="profile";n.pushReaction="push_reaction";n.commerceEvent="commerce_event";n.userAttributeChange="user_attribute_change";n.userIdentityChange="user_identity_change";n.uninstall="uninstall";n.validationResult="validation_result"}(n.EventTypeEnum||(n.EventTypeEnum={})),function(n){n.other="other";n.customerId="customer_id";n.facebook="facebook";n.twitter="twitter";n.google="google";n.microsoft="microsoft";n.yahoo="yahoo";n.email="email";n.alias="alias";n.facebookCustomAudienceId="facebook_custom_audience_id";n.otherId2="other_id_2";n.otherId3="other_id_3";n.otherId4="other_id_4";n.otherId5="other_id_5";n.otherId6="other_id_6";n.otherId7="other_id_7";n.otherId8="other_id_8";n.otherId9="other_id_9";n.otherId10="other_id_10";n.mobileNumber="mobile_number";n.phoneNumber2="phone_number_2";n.phoneNumber3="phone_number_3"}(n.IdentityTypeEnum||(n.IdentityTypeEnum={})),function(n){n.networkPerformance="network_performance"}(n.NetworkPerformanceEventEventTypeEnum||(n.NetworkPerformanceEventEventTypeEnum={})),function(n){n.optOut="opt_out"}(n.OptOutEventEnum||(n.OptOutEventEnum={})),function(n){n.unknown="unknown";n.addToCart="add_to_cart";n.removeFromCart="remove_from_cart";n.checkout="checkout";n.checkoutOption="checkout_option";n.click="click";n.viewDetail="view_detail";n.purchase="purchase";n.refund="refund";n.addToWishlist="add_to_wishlist";n.removeFromWishlist="remove_from_wish_list"}(n.ProductActionActionEnum||(n.ProductActionActionEnum={})),function(n){n.profile="profile"}(n.ProfileEventEventTypeEnum||(n.ProfileEventEventTypeEnum={})),function(n){n.signup="signup";n.login="login";n.logout="logout";n.update="update";n["delete"]="delete"}(n.ProfileEventDataProfileEventTypeEnum||(n.ProfileEventDataProfileEventTypeEnum={})),function(n){n.view="view";n.click="click"}(n.PromotionActionActionEnum||(n.PromotionActionActionEnum={})),function(n){n.pushMessage="push_message"}(n.PushMessageEventEventTypeEnum||(n.PushMessageEventEventTypeEnum={})),function(n){n.sent="sent";n.received="received";n.action="action"}(n.PushMessageEventDataPushMessageTypeEnum||(n.PushMessageEventDataPushMessageTypeEnum={})),function(n){n.notRunning="not_running";n.background="background";n.foreground="foreground"}(n.PushMessageEventDataApplicationStateEnum||(n.PushMessageEventDataApplicationStateEnum={})),function(n){n.received="Received";n.directOpen="DirectOpen";n.read="Read";n.influencedOpen="InfluencedOpen";n.displayed="Displayed"}(n.PushMessageEventDataPushMessageBehaviorEnum||(n.PushMessageEventDataPushMessageBehaviorEnum={})),function(n){n.pushRegistration="push_registration"}(n.PushRegistrationEventEventTypeEnum||(n.PushRegistrationEventEventTypeEnum={})),function(n){n.sessionEnd="session_end"}(n.SessionEndEventEventTypeEnum||(n.SessionEndEventEventTypeEnum={})),function(n){n.sessionStart="session_start"}(n.SessionStartEventEventTypeEnum||(n.SessionStartEventEventTypeEnum={})),function(n){n["native"]="native";n.javascript="javascript";n.pixel="pixel";n.desktop="desktop";n.partner="partner";n.serverToServer="server_to_server"}(n.SourceInformationChannelEnum||(n.SourceInformationChannelEnum={})),function(n){n.userAttributeChange="user_attribute_change"}(n.UserAttributeChangeEventEventTypeEnum||(n.UserAttributeChangeEventEventTypeEnum={})),function(n){n.userIdentityChange="user_identity_change"}(n.UserIdentityChangeEventEventTypeEnum||(n.UserIdentityChangeEventEventTypeEnum={}))}(i);yt={exports:{}};yt.exports,function(n){(function(t,i,r){n.exports=r();n.exports["default"]=r()})("slugify",pi,function(){function t(t,r){if(typeof t!="string")throw new Error("slugify: string argument expected");r=typeof r=="string"?{replacement:r}:r||{};var e=i[r.locale]||{},f=r.replacement===undefined?"-":r.replacement,o=r.trim===undefined?!0:r.trim,u=t.normalize().split("").reduce(function(t,i){var u=e[i];return u===undefined&&(u=n[i]),u===undefined&&(u=i),u===f&&(u=" "),t+u.replace(r.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return r.strict&&(u=u.replace(/[^A-Za-z0-9\s]/g,"")),o&&(u=u.trim()),u=u.replace(/\s+/g,f),r.lower&&(u=u.toLowerCase()),u}var n=JSON.parse('{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E\'","":"Y\'","":"T\'","":"JH","":"I","":"L","":"X","":"C\'","":"K","":"H","":"D\'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R\'","":"S","":"V","":"T","":"R","":"C","":"P\'","":"Q\'","":"O\'\'","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"\'","":"\'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}'),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');return t.extend=function(t){Object.assign(n,t)},t})}(yt,yt.exports);var tu=yt.exports,iu=nu(tu),wi=t.Messages,ru=function(n){return cu(vu(n))},uu=function(n){return lu(au(n))},fu=function(n,t){var i=0,r;if(Array.prototype.indexOf)return n.indexOf(t,0)>=0;for(r=n.length;i<r;i++)if(i in n&&n[i]===t)return!0;return!1},eu=function(n,t){if(t&&n)for(var i in n)if(n.hasOwnProperty(i)&&i.toLowerCase()===t.toLowerCase())return i;return null},ou=function(n,t){var i=[n,wi.DeprecationMessages.MethodIsDeprecatedPostfix];return t&&(i.push(t),i.push(wi.DeprecationMessages.MethodIsDeprecatedPostfix)),i.join(" ")};var su=function(){var t,n;return(window.crypto&&window.crypto.getRandomValues&&(t=window.crypto.getRandomValues(new Uint8Array(1))),t)?(n^t[0]%16>>n/4).toString(16):(n^Math.random()*16>>n/4).toString(16)},bi=function bi(n){return n===void 0&&(n=""),n?su():"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,bi)},hu=function(n){if(!n)return 100;var t=ut(n);return Math.abs(t%100)+1},k=function(n){var t=Object.prototype.toString.call(n);return t==="[object Object]"||t==="[object Error]"},pt=function(n){if(isNaN(n)||!isFinite(n))return 0;var t=parseFloat(n);return isNaN(t)?0:t},et=function(n){return di(n)?n:null},cu=function(n){return n.replace(/,/g,"|")},lu=function(n){return n.replace(/\|/g,",")},au=function(n){return n.replace(/\'/g,'"')},vu=function(n){return n.replace(/\"/g,"'")},yu=function(n){return n==="false"||n==="0"?!1:Boolean(n)},pu=function(n){return decodeURIComponent(n.replace(/\+/g," "))},wu=function(n){return n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),n},ki=function(n){return typeof n=="string"},si=function(n){return typeof n=="number"},bu=function(n){return typeof n=="function"},ku=function(n){return ki(n)&&n===iu(n)},di=function(n){return ki(n)||si(n)},y=function(n){return n==null||!(Object.keys(n)||n).length};var tr=function(){function n(n,t,i){this._storageKey=n;this.storageObject=t;this.logger=(i===null||i===void 0?void 0:i.logger)||{verbose:function(){},warning:function(){},error:function(){}};this.contents=this.retrieve()}return n.prototype.store=function(n){this.contents=n;var t=y(n)?"":JSON.stringify(n);try{this.storageObject.setItem(this._storageKey,t);this.logger.verbose("Saving item to Storage: ".concat(t))}catch(i){this.logger.error("Cannot Save items to Storage: ".concat(t));this.logger.error(i)}},n.prototype.retrieve=function(){var n=this.storageObject.getItem(this._storageKey);return this.contents=n?JSON.parse(n):null,this.logger.verbose("Retrieving item from Storage: ".concat(n)),this.contents},n.prototype.purge=function(){this.logger.verbose("Purging Storage");this.contents=null;this.storageObject.removeItem(this._storageKey)},n}(),te=function(n){function t(t,i){return n.call(this,t,window.localStorage,i)||this}return ti(t,n),t}(tr),ie=function(n){function t(t,i){return n.call(this,t,window.sessionStorage,i)||this}return ti(t,n),t}(tr),re=function(){function i(n,t){var r;this.offlineStorageEnabled=!1;this.mpInstance=n;this.uploadIntervalMillis=t;this.batchingEnabled=t>=i.MINIMUM_INTERVAL_MILLIS;this.uploadIntervalMillis<i.MINIMUM_INTERVAL_MILLIS&&(this.uploadIntervalMillis=i.MINIMUM_INTERVAL_MILLIS);this.eventsQueuedForProcessing=[];this.batchesQueuedForProcessing=[];this.offlineStorageEnabled=this.isOfflineStorageAvailable();this.offlineStorageEnabled&&(this.eventVault=new ie("".concat(n._Store.storageName,"-events"),{logger:n.Logger}),this.batchVault=new te("".concat(n._Store.storageName,"-batches"),{logger:n.Logger}),(r=this.eventsQueuedForProcessing).push.apply(r,this.eventVault.retrieve()));var u=this.mpInstance._Store,f=u.SDKConfig,e=u.devToken,o=this.mpInstance._Helpers.createServiceUrl(f.v3SecureServiceUrl,e);this.uploadUrl="".concat(o,"/events");this.uploader=window.fetch?new ue(this.uploadUrl):new fe(this.uploadUrl);this.triggerUploadInterval(!0,!1);this.addEventListeners()}return i.prototype.isOfflineStorageAvailable=function(){var n=this.mpInstance,i=n._Helpers.getFeatureFlag,r=n._Store.deviceId,u=i(t.FeatureFlags.OfflineStorage),f=parseInt(u,10),e=hu(r);return f>=e},i.prototype.addEventListeners=function(){var n=this;document.addEventListener("visibilitychange",function(){n.prepareAndUpload(!1,n.isBeaconAvailable())});window.addEventListener("beforeunload",function(){n.prepareAndUpload(!1,n.isBeaconAvailable())});window.addEventListener("pagehide",function(){n.prepareAndUpload(!1,n.isBeaconAvailable())})},i.prototype.isBeaconAvailable=function(){return navigator.sendBeacon?!0:!1},i.prototype.triggerUploadInterval=function(n,t){var i=this;n===void 0&&(n=!1);t===void 0&&(t=!1);setTimeout(function(){i.prepareAndUpload(n,t)},this.uploadIntervalMillis)},i.prototype.queueEvent=function(t){y(t)||(this.eventsQueuedForProcessing.push(t),this.offlineStorageEnabled&&this.eventVault&&this.eventVault.store(this.eventsQueuedForProcessing),this.mpInstance.Logger.verbose("Queuing event: ".concat(JSON.stringify(t))),this.mpInstance.Logger.verbose("Queued event count: ".concat(this.eventsQueuedForProcessing.length)),(!this.batchingEnabled||n.TriggerUploadType[t.EventDataType])&&this.prepareAndUpload(!1,!1))},i.createNewBatches=function(n,t,i){var l,e,o,a,v,s,y,h,w,r,u,c,b;if(!t||!n||!n.length)return null;for(l=[],e=new Map,o=0,a=n;o<a.length;o++)r=a[o],r.MPID||(v=t.getMPID(),r.MPID=v),u=e.get(r.MPID),u||(u=[]),u.push(r),e.set(r.MPID,u);for(s=0,y=Array.from(e.entries());s<y.length;s++){var k=y[s],v=k[0],g=k[1],p=new Map;for(h=0,w=g;h<w.length;h++)r=w[h],u=p.get(r.SessionId),u||(u=[]),u.push(r),p.set(r.SessionId,u);for(c=0,b=Array.from(p.entries());c<b.length;c++){var nt=b[c],f=gi(v,nt[1],i),d=i._Store.SDKConfig.onCreateBatch;d&&(f=d(f),f?f.modified=!0:i.Logger.warning("Skiping batch upload because no batch was returned from onCreateBatch callback"));f&&l.push(f)}}return l},i.prototype.prepareAndUpload=function(n,t){return at(this,void 0,void 0,function(){var o,u,r,f,e,s,h,c;return vt(this,function(l){switch(l.label){case 0:return o=this.mpInstance.Identity.getCurrentUser(),u=this.eventsQueuedForProcessing,this.eventsQueuedForProcessing=[],this.offlineStorageEnabled&&this.eventVault&&this.eventVault.store([]),r=[],y(u)||(r=i.createNewBatches(u,o,this.mpInstance)),this.offlineStorageEnabled&&this.batchVault&&((s=this.batchesQueuedForProcessing).unshift.apply(s,this.batchVault.retrieve()),this.batchVault.purge()),y(r)||(h=this.batchesQueuedForProcessing).push.apply(h,r),f=this.batchesQueuedForProcessing,this.batchesQueuedForProcessing=[],t&&this.offlineStorageEnabled&&this.batchVault&&this.batchVault.store(f),[4,this.uploadBatches(this.mpInstance.Logger,f,t)];case 1:return e=l.sent(),y(e)||(c=this.batchesQueuedForProcessing).unshift.apply(c,e),!t&&this.offlineStorageEnabled&&this.batchVault&&(this.batchVault.store(this.batchesQueuedForProcessing),this.batchesQueuedForProcessing=[]),n&&this.triggerUploadInterval(n,!1),[2]}})})},i.prototype.uploadBatches=function(n,t,r){return at(this,void 0,void 0,function(){var u,e,o,s,f,h;return vt(this,function(c){switch(c.label){case 0:if(u=t.filter(function(n){return!y(n.events)}),y(u))return[2,null];n.verbose("Uploading batches: ".concat(JSON.stringify(u)));n.verbose("Batch count: ".concat(u.length));e=0;c.label=1;case 1:return(e<u.length)?(o={method:"POST",headers:{Accept:i.CONTENT_TYPE,"Content-Type":"text/plain;charset=UTF-8"},body:JSON.stringify(u[e])},!(r&&this.isBeaconAvailable()))?[3,2]:(s=new Blob([o.body],{type:"text/plain;charset=UTF-8"}),navigator.sendBeacon(this.uploadUrl,s),[3,5]):[3,6];case 2:return c.trys.push([2,4,,5]),[4,this.uploader.upload(o)];case 3:if(f=c.sent(),f.status>=200&&f.status<300)n.verbose("Upload success for request ID: ".concat(u[e].source_request_id));else{if(f.status>=500||f.status===429)return n.error("HTTP error status ".concat(f.status," received")),[2,u.slice(e,u.length)];if(f.status>=401)return n.error("HTTP error status ".concat(f.status," while uploading - please verify your API key.")),[2,null];console.error("HTTP error status ".concat(f.status," while uploading events."),f);throw new Error("Uncaught HTTP Error ".concat(f.status,".  Batch upload will be re-attempted."));}return[3,5];case 4:return h=c.sent(),n.error("Error sending event to mParticle servers. ".concat(h)),[2,u.slice(e,u.length)];case 5:return e++,[3,1];case 6:return[2,null]}})})},i.CONTENT_TYPE="text/plain;charset=UTF-8",i.MINIMUM_INTERVAL_MILLIS=500,i}(),ir=function(){function n(n){this.url=n}return n}(),ue=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return ti(t,n),t.prototype.upload=function(n){return at(this,void 0,void 0,function(){var t;return vt(this,function(i){switch(i.label){case 0:return[4,fetch(this.url,n)];case 1:return t=i.sent(),[2,t]}})})},t}(ir),fe=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return ti(t,n),t.prototype.upload=function(n){return at(this,void 0,void 0,function(){var t;return vt(this,function(i){switch(i.label){case 0:return[4,this.makeRequest(this.url,n.body)];case 1:return t=i.sent(),[2,t]}})})},t.prototype.makeRequest=function(n,t){return at(this,void 0,void 0,function(){var i;return vt(this,function(){return i=new XMLHttpRequest,[2,new Promise(function(r,u){i.onreadystatechange=function(){i.readyState===4&&(i.status>=200&&i.status<300?r(i):u(i))};i.open("post",n);i.send(t)})]})})},t}(ir);var rr={isNumber:si,isFunction:bu,isStringOrNumber:di,isValidAttributeValue:function(n){return n!==undefined&&!k(n)&&!Array.isArray(n)},isValidKeyValue:function(n){return Boolean(n&&!k(n)&&!Array.isArray(n)&&!this.isFunction(n))},validateIdentities:function(i,r){var e={userIdentities:1,onUserAlias:1,copyUserAttributes:1},u,f;if(i){if(r==="modify"&&(k(i.userIdentities)&&!Object.keys(i.userIdentities).length||!k(i.userIdentities)))return{valid:!1,error:t.Messages.ValidationMessages.ModifyIdentityRequestUserIdentitiesPresent};for(u in i)if(i.hasOwnProperty(u)){if(!e[u])return{valid:!1,error:t.Messages.ValidationMessages.IdentityRequesetInvalidKey};if(u==="onUserAlias"&&!rr.isFunction(i[u]))return{valid:!1,error:t.Messages.ValidationMessages.OnUserAliasType}}if(Object.keys(i).length===0)return{valid:!0};if(i.userIdentities===undefined)return{valid:!1,error:t.Messages.ValidationMessages.UserIdentities};if(i.userIdentities!==null&&!k(i.userIdentities))return{valid:!1,error:t.Messages.ValidationMessages.UserIdentities};if(k(i.userIdentities)&&Object.keys(i.userIdentities).length)for(f in i.userIdentities)if(i.userIdentities.hasOwnProperty(f)){if(n.IdentityType.getIdentityType(f)===!1)return{valid:!1,error:t.Messages.ValidationMessages.UserIdentitiesInvalidKey};if(!(typeof i.userIdentities[f]=="string"||i.userIdentities[f]===null))return{valid:!1,error:t.Messages.ValidationMessages.UserIdentitiesInvalidValues}}}return{valid:!0}}},h=function(){function n(){}return n.hashEventType=function(n){return ut(n)},n.hashEventName=function(n,t){return ut(t+n)},n.hashEventAttributeKey=function(n,t,i){return ut(n+t+i)},n.hashUserAttribute=function(n){return ut(n)},n.hashUserIdentity=function(n){return n},n.hashConsentPurpose=function(n,t){return ut(n+t)},n.hashAttributeConditionalForwarding=function(n){return ut(n).toString()},n.hashConsentPurposeConditionalForwarding=function(n,t){return this.hashConsentPurpose(n,t).toString()},n}(),ii=t.StorageNames;var wt=t.Messages,ur="mParticleAndroid",li="mParticle";fr=t.Messages;st=t.Messages;bt=t.Messages;var g=ct.Base64,ht=t.Messages,ri=t.Base64CookieKeys,kt=t.SDKv2NonMPIDCookieKeys,ft=t.StorageNames;return ot=t.Messages,dt=n.MessageType,sr=n.ApplicationTransitionType,s=t.Messages,c=t.HTTPCodes,l=t.CCPAPurpose,u={ScreenView:"screen_view",CustomEvent:"custom_event",Commerce:"commerce",UserAttributes:"user_attributes",UserIdentities:"user_identities",ProductAction:"product_action",PromotionAction:"promotion_action",ProductImpression:"product_impression"},cr=function(){function t(n,t){var d=this,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,i,r;if(this.dataPlanMatchLookups={},this.blockEvents=!1,this.blockEventAttributes=!1,this.blockUserAttributes=!1,this.blockUserIdentities=!1,this.kitBlockingEnabled=!1,n&&!n.document){this.kitBlockingEnabled=!1;return}if(this.kitBlockingEnabled=!0,this.mpInstance=t,this.blockEvents=(e=(f=(u=n===null||n===void 0?void 0:n.document)===null||u===void 0?void 0:u.dtpn)===null||f===void 0?void 0:f.blok)===null||e===void 0?void 0:e.ev,this.blockEventAttributes=(h=(s=(o=n===null||n===void 0?void 0:n.document)===null||o===void 0?void 0:o.dtpn)===null||s===void 0?void 0:s.blok)===null||h===void 0?void 0:h.ea,this.blockUserAttributes=(a=(l=(c=n===null||n===void 0?void 0:n.document)===null||c===void 0?void 0:c.dtpn)===null||l===void 0?void 0:l.blok)===null||a===void 0?void 0:a.ua,this.blockUserIdentities=(p=(y=(v=n===null||n===void 0?void 0:n.document)===null||v===void 0?void 0:v.dtpn)===null||y===void 0?void 0:y.blok)===null||p===void 0?void 0:p.id,i=(k=(b=(w=n===null||n===void 0?void 0:n.document)===null||w===void 0?void 0:w.dtpn)===null||b===void 0?void 0:b.vers)===null||k===void 0?void 0:k.version_document,r=i===null||i===void 0?void 0:i.data_points,i)try{(r===null||r===void 0?void 0:r.length)>0&&r.forEach(function(n){return d.addToMatchLookups(n)})}catch(g){this.mpInstance.Logger.error("There was an issue with the data plan: "+g)}}return t.prototype.addToMatchLookups=function(n){var r,f,e,t,i;if(!n.match||!n.validator){this.mpInstance.Logger.warning("Data Plan Point is not valid' + ".concat(n));return}t=this.generateMatchKey(n.match);i=this.getPlannedProperties(n.match.type,n.validator);this.dataPlanMatchLookups[t]=i;(((r=n===null||n===void 0?void 0:n.match)===null||r===void 0?void 0:r.type)===u.ProductImpression||((f=n===null||n===void 0?void 0:n.match)===null||f===void 0?void 0:f.type)===u.ProductAction||((e=n===null||n===void 0?void 0:n.match)===null||e===void 0?void 0:e.type)===u.PromotionAction)&&(t=this.generateProductAttributeMatchKey(n.match),i=this.getProductProperties(n.match.type,n.validator),this.dataPlanMatchLookups[t]=i)},t.prototype.generateMatchKey=function(n){var t=n.criteria||"",i,r,f,e,o;switch(n.type){case u.CustomEvent:return i=t,[u.CustomEvent,i.custom_event_type,i.event_name].join(":");case u.ScreenView:return r=t,[u.ScreenView,"",r.screen_name].join(":");case u.ProductAction:return f=t,[n.type,f.action].join(":");case u.PromotionAction:return e=t,[n.type,e.action].join(":");case u.ProductImpression:return o=t,[n.type,o.action].join(":");case u.UserIdentities:case u.UserAttributes:return[n.type].join(":");default:return null}},t.prototype.generateProductAttributeMatchKey=function(n){var t=n.criteria||"",i,r;switch(n.type){case u.ProductAction:return i=t,[n.type,i.action,"ProductAttributes"].join(":");case u.PromotionAction:return r=t,[n.type,r.action,"ProductAttributes"].join(":");case u.ProductImpression:return[n.type,"ProductAttributes"].join(":");default:return null}},t.prototype.getPlannedProperties=function(n,t){var s,h,c,l,a,v,y,p,r,w,f,b,i,d,o,k,e;switch(n){case u.CustomEvent:case u.ScreenView:case u.ProductAction:case u.PromotionAction:case u.ProductImpression:if(r=(l=(c=(h=(s=t===null||t===void 0?void 0:t.definition)===null||s===void 0?void 0:s.properties)===null||h===void 0?void 0:h.data)===null||c===void 0?void 0:c.properties)===null||l===void 0?void 0:l.custom_attributes,r){if(r.additionalProperties===!0||r.additionalProperties===undefined)return!0;for(i={},f=0,b=Object.keys(r.properties);f<b.length;f++)e=b[f],i[e]=!0;return i}return((y=(v=(a=t===null||t===void 0?void 0:t.definition)===null||a===void 0?void 0:a.properties)===null||v===void 0?void 0:v.data)===null||y===void 0?void 0:y.additionalProperties)===!1?{}:!0;case u.UserAttributes:case u.UserIdentities:if(w=(p=t===null||t===void 0?void 0:t.definition)===null||p===void 0?void 0:p.additionalProperties,w===!0||w===undefined)return!0;for(i={},d=t.definition.properties,o=0,k=Object.keys(d);o<k.length;o++)e=k[o],i[e]=!0;return i;default:return null}},t.prototype.getProductProperties=function(n,t){var s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,i,f,et,r,o,ot,e;switch(n){case u.ProductImpression:if(i=(b=(w=(p=(y=(v=(a=(l=(c=(h=(s=t===null||t===void 0?void 0:t.definition)===null||s===void 0?void 0:s.properties)===null||h===void 0?void 0:h.data)===null||c===void 0?void 0:c.properties)===null||l===void 0?void 0:l.product_impressions)===null||a===void 0?void 0:a.items)===null||v===void 0?void 0:v.properties)===null||y===void 0?void 0:y.products)===null||p===void 0?void 0:p.items)===null||w===void 0?void 0:w.properties)===null||b===void 0?void 0:b.custom_attributes,(i===null||i===void 0?void 0:i.additionalProperties)===!1){for(r={},f=0,et=Object.keys(i===null||i===void 0?void 0:i.properties);f<et.length;f++)e=et[f],r[e]=!0;return r}return!0;case u.ProductAction:case u.PromotionAction:if(i=(ft=(ut=(rt=(it=(tt=(nt=(g=(d=(k=t===null||t===void 0?void 0:t.definition)===null||k===void 0?void 0:k.properties)===null||d===void 0?void 0:d.data)===null||g===void 0?void 0:g.properties)===null||nt===void 0?void 0:nt.product_action)===null||tt===void 0?void 0:tt.properties)===null||it===void 0?void 0:it.products)===null||rt===void 0?void 0:rt.items)===null||ut===void 0?void 0:ut.properties)===null||ft===void 0?void 0:ft.custom_attributes,i&&i.additionalProperties===!1){for(r={},o=0,ot=Object.keys(i===null||i===void 0?void 0:i.properties);o<ot.length;o++)e=ot[o],r[e]=!0;return r}return!0;default:return null}},t.prototype.getMatchKey=function(n){var e,r,t,f;switch(n.event_type){case i.EventTypeEnum.screenView:return(e=n,e.data)?["screen_view","",e.data.screen_name].join(":"):null;case i.EventTypeEnum.commerceEvent:if(r=n,t=[],r&&r.data){var o=r.data,s=o.product_action,c=o.product_impressions,h=o.promotion_action;s?(t.push(u.ProductAction),t.push(s.action)):h?(t.push(u.PromotionAction),t.push(h.action)):c&&t.push(u.ProductImpression)}return t.join(":");case i.EventTypeEnum.customEvent:return(f=n,f.data)?["custom_event",f.data.custom_event_type,f.data.event_name].join(":"):null;default:return null}},t.prototype.getProductAttributeMatchKey=function(n){switch(n.event_type){case i.EventTypeEnum.commerceEvent:var o=n,t=[],r=o.data,f=r.product_action,s=r.product_impressions,e=r.promotion_action;return f?(t.push(u.ProductAction),t.push(f.action),t.push("ProductAttributes")):e?(t.push(u.PromotionAction),t.push(e.action),t.push("ProductAttributes")):s&&(t.push(u.ProductImpression),t.push("ProductAttributes")),t.join(":");default:return null}},t.prototype.createBlockedEvent=function(t){try{return t&&(t=this.transformEventAndEventAttributes(t)),t&&t.EventDataType===n.MessageType.Commerce&&(t=this.transformProductAttributes(t)),t&&(t=this.transformUserAttributes(t),t=this.transformUserIdentities(t)),t}catch(i){return t}},t.prototype.transformEventAndEventAttributes=function(n){var t=tt({},n),e=hi(t),o=this.getMatchKey(e),i=this.dataPlanMatchLookups[o],r,u,f;if(this.blockEvents&&!i)return null;if(this.blockEventAttributes){if(i===!0)return t;if(i){for(r=0,u=Object.keys(t.EventAttributes);r<u.length;r++)f=u[r],i[f]||delete t.EventAttributes[f];return t}return t}return t},t.prototype.transformProductAttributes=function(t){function f(n,t){t.forEach(function(t){for(var u,i=0,r=Object.keys(t.Attributes);i<r.length;i++)u=r[i],n[u]||delete t.Attributes[u]})}var u,i=tt({},t),e=hi(i),o=this.getProductAttributeMatchKey(e),r=this.dataPlanMatchLookups[o];if(this.blockEvents&&!r)return null;if(this.blockEventAttributes){if(r===!0)return i;if(r){switch(t.EventCategory){case n.CommerceEventType.ProductImpression:i.ProductImpressions.forEach(function(n){f(r,n===null||n===void 0?void 0:n.ProductList)});break;case n.CommerceEventType.ProductPurchase:f(r,(u=i.ProductAction)===null||u===void 0?void 0:u.ProductList);break;default:this.mpInstance.Logger.warning("Product Not Supported ")}return i}return i}return i},t.prototype.transformUserAttributes=function(n){var i=tt({},n),r,t,u,f;if(this.blockUserAttributes&&(r=this.dataPlanMatchLookups.user_attributes,this.mpInstance._Helpers.isObject(r)))for(t=0,u=Object.keys(i.UserAttributes);t<u.length;t++)f=u[t],r[f]||delete i.UserAttributes[f];return i},t.prototype.isAttributeKeyBlocked=function(n){if(!this.blockUserAttributes)return!1;if(this.blockUserAttributes){var t=this.dataPlanMatchLookups.user_attributes;if(t===!0)return!1;if(!t[n])return!0}return!1},t.prototype.isIdentityBlocked=function(n){if(!this.blockUserIdentities)return!1;if(this.blockUserIdentities){var t=this.dataPlanMatchLookups.user_identities;if(t===!0)return!1;if(!t[n])return!0}else return!1;return!1},t.prototype.transformUserIdentities=function(t){var f=this,r,i=tt({},t),u;return this.blockUserIdentities&&(u=this.dataPlanMatchLookups.user_identities,this.mpInstance._Helpers.isObject(u)&&((r=i===null||i===void 0?void 0:i.UserIdentities)===null||r===void 0?void 0:r.length)&&i.UserIdentities.forEach(function(t,r){var e=n.IdentityType.getIdentityName(f.mpInstance._Helpers.parseNumber(t.Type));u[e]||i.UserIdentities.splice(r,1)})),i},t}(),ui=t.HTTPCodes,gt=t.Messages,it=t.Messages,lr=t.HTTPCodes,f=function(){return null},yr=function(){function n(){}return n.prototype.getMPInstance=function(){return{_Helpers:{sanitizeAttributes:window.mParticle.getInstance()._Helpers.sanitizeAttributes,generateHash:function(){return"mockHash"},generateUniqueId:function(){return"mockId"},extend:window.mParticle.getInstance()._Helpers.extend,createServiceUrl:f,parseNumber:f,isObject:f,returnConvertedBoolean:f,Validators:null},_resetForTests:f,_APIClient:null,MPSideloadedKit:null,_Consent:null,_Events:null,_Forwarders:null,_NativeSdkHelpers:null,_Persistence:null,_preInit:null,Consent:null,_ServerModel:null,_SessionManager:null,_Store:{sessionId:"mockSessionId",sideloadedKits:[],devToken:"test_dev_token",isFirstRun:!0,isEnabled:!0,sessionAttributes:{},currentSessionMPIDs:[],consentState:null,clientId:null,deviceId:null,serverSettings:{},dateLastEventSent:null,sessionStartDate:null,currentPosition:null,isTracking:!1,watchPositionId:null,cartProducts:[],eventQueue:[],currencyCode:null,globalTimer:null,context:null,configurationLoaded:!1,identityCallInFlight:!1,nonCurrentUserMPIDs:{},identifyCalled:!1,isLoggedIn:!1,cookieSyncDates:{},integrationAttributes:{},requireDelay:!0,isLocalStorageAvailable:null,integrationDelayTimeoutStart:null,storageName:null,prodStorageName:null,activeForwarders:[],kits:{},configuredForwarders:[],pixelConfigurations:[],wrapperSDKInfo:{name:"none",version:null,isInfoSet:!1},SDKConfig:{isDevelopmentMode:!1,onCreateBatch:f}},config:null,eCommerce:null,Identity:{getCurrentUser:f,IdentityAPI:{},identify:f,login:f,logout:f,modify:f},Logger:{verbose:f,error:f,warning:f},ProductActionType:null,ServerModel:null,addForwarder:f,generateHash:f,getAppVersion:f,getAppName:f,getInstance:f,getDeviceId:f,init:f,logBaseEvent:f,logEvent:f,logLevel:"none",setPosition:f,upload:f}},n.prototype.createSDKEventFunction=function(n){return new hr(this.getMPInstance()).createEventObject(n)},n.prototype.returnBatch=function(n){var t=this,i=this.getMPInstance(),r=Array.isArray(n)?n.map(function(n){return t.createSDKEventFunction(n)}):[this.createSDKEventFunction(n)];return gi("0",r,i)},n}(),function(n){n[n.Unknown=0]="Unknown";n[n.Navigation=1]="Navigation";n[n.Location=2]="Location";n[n.Search=3]="Search";n[n.Transaction=4]="Transaction";n[n.UserContent=5]="UserContent";n[n.UserPreference=6]="UserPreference";n[n.Social=7]="Social";n[n.Other=8]="Other";n[n.Media=9]="Media"}(fi||(fi={})),function(n){n[n.SessionStart=1]="SessionStart";n[n.SessionEnd=2]="SessionEnd";n[n.PageView=3]="PageView";n[n.PageEvent=4]="PageEvent";n[n.CrashReport=5]="CrashReport";n[n.OptOut=6]="OptOut";n[n.AppStateTransition=10]="AppStateTransition";n[n.Profile=14]="Profile";n[n.Commerce=16]="Commerce";n[n.UserAttributeChange=17]="UserAttributeChange";n[n.UserIdentityChange=18]="UserIdentityChange";n[n.Media=20]="Media"}(pr||(pr={})),function(n){n[n.Other=0]="Other";n[n.CustomerId=1]="CustomerId";n[n.Facebook=2]="Facebook";n[n.Twitter=3]="Twitter";n[n.Google=4]="Google";n[n.Microsoft=5]="Microsoft";n[n.Yahoo=6]="Yahoo";n[n.Email=7]="Email";n[n.FacebookCustomAudienceId=9]="FacebookCustomAudienceId";n[n.Other2=10]="Other2";n[n.Other3=11]="Other3";n[n.Other4=12]="Other4";n[n.Other5=13]="Other5";n[n.Other6=14]="Other6";n[n.Other7=15]="Other7";n[n.Other8=16]="Other8";n[n.Other9=17]="Other9";n[n.Other10=18]="Other10";n[n.MobileNumber=19]="MobileNumber";n[n.PhoneNumber2=20]="PhoneNumber2";n[n.PhoneNumber3=21]="PhoneNumber3"}(wr||(wr={})),br=function(){function n(n){this.filterDictionary={eventTypeFilters:[],eventNameFilters:[],screenNameFilters:[],screenAttributeFilters:[],userIdentityFilters:[],userAttributeFilters:[],attributeFilters:[],consentRegulationFilters:[],consentRegulationPurposeFilters:[],messageTypeFilters:[],messageTypeStateFilters:[],filteringEventAttributeValue:{},filteringUserAttributeValue:{},filteringConsentRuleValues:{}};this.kitInstance=n}return n.prototype.addEventTypeFilter=function(n){var t=h.hashEventType(n);this.filterDictionary.eventTypeFilters.push(t)},n.prototype.addEventNameFilter=function(n,t){var i=h.hashEventName(t,n);this.filterDictionary.eventNameFilters.push(i)},n.prototype.addEventAttributeFilter=function(n,t,i){var r=h.hashEventAttributeKey(n,t,i);this.filterDictionary.attributeFilters.push(r)},n.prototype.addScreenNameFilter=function(n){var t=h.hashEventName(n,fi.Unknown);this.filterDictionary.screenNameFilters.push(t)},n.prototype.addScreenAttributeFilter=function(n,t){var i=h.hashEventAttributeKey(fi.Unknown,n,t);this.filterDictionary.screenAttributeFilters.push(i)},n.prototype.addUserIdentityFilter=function(n){var t=h.hashUserIdentity(n);this.filterDictionary.userIdentityFilters.push(t)},n.prototype.addUserAttributeFilter=function(n){var t=h.hashUserAttribute(n);this.filterDictionary.userAttributeFilters.push(t)},n}(),Array.prototype.forEach||(Array.prototype.forEach=ct.forEach),Array.prototype.map||(Array.prototype.map=ct.map),Array.prototype.filter||(Array.prototype.filter=ct.filter),Array.isArray||(Array.prototype.isArray=ct.isArray),vi=new oo,typeof window!="undefined"&&(window.mParticle=vi,window.mParticle._BatchValidator=new yr),vi}() ;;
; var mpFacebookKit=function(n){
/*!
   * isobject <https://github.com/jonschlinkert/isobject>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   */
function f(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1}function b(){return s}function k(n){if(!n){console.log("You must pass a config object to register the kit "+t);return}if(!f(n)){console.log("'config' must be an object. You passed in a "+typeof n);return}f(n.kits)?n.kits[t]={constructor:r}:(n.kits={},n.kits[t]={constructor:r});console.log("Successfully registered "+t+" to your mParticle configuration")}var t="Facebook",s=45,i={SessionStart:1,SessionEnd:2,PageView:3,PageEvent:4,CrashReport:5,OptOut:6,Commerce:16},h={Other:0,CustomerId:1,Facebook:2,Twitter:3,Google:4,Microsoft:5,Yahoo:6,Email:7,FacebookCustomAudienceId:9,Other2:10,Other3:11,Other4:12,Other5:13,Other6:14,Other7:15,Other8:16,Other9:17,Other10:18,MobileNumber:19,PhoneNumber2:20,PhoneNumber3:21},e=[],c="AddToCart",l="AddToWishlist",a="InitiateCheckout",v="PageView",y="Purchase",p="RemoveFromCart",w="ViewContent",r=function(){function k(n,i,u,o,s,c){var l,v,a;r=i;e=[mParticle.ProductActionType.Checkout,mParticle.ProductActionType.Purchase,mParticle.ProductActionType.AddToCart,mParticle.ProductActionType.RemoveFromCart,mParticle.ProductActionType.AddToWishlist,mParticle.ProductActionType.ViewDetail];try{return u||(!function(n,t,i,r,u,f,e){n.fbq||(u=n.fbq=function(){u.callMethod?u.callMethod.apply(u,arguments):u.queue.push(arguments)},n._fbq||(n._fbq=u),u.push=u,u.loaded=!0,u.version="2.0",u.queue=[],f=t.createElement(i),f.async=!0,f.src=r,e=t.getElementsByTagName(i)[0],e.parentNode.insertBefore(f,e))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),l={},n.externalUserIdentityType&&c&&c.length>0&&(v=h[n.externalUserIdentityType],a=c.filter(function(n){if(n.Type===v)return n.Identity}),a.length>0&&(l.external_id=a[0].Identity))),n.disablePushState==="True"&&(fbq.disablePushState=!0),fbq("init",n.pixelId,l),f=!0,"Successfully initialized: "+t}catch(y){return"Can't initialize forwarder: "+t+":"+y}}function d(n){var e=!1;if(!f)return"Can't send forwarder "+t+", not initialized";try{return n.EventDataType==i.PageView?(e=!0,nt(n)):n.EventDataType==i.PageEvent?(e=!0,o(n)):n.EventDataType==i.Commerce&&(e=g(n)),e&&r&&r(u,n),"Successfully sent to forwarder "+t}catch(s){return"Can't send to forwarder: "+t+" "+s}}function g(t){var r,u,i,o,f,h,v;if(t.ProductAction&&t.ProductAction.ProductList&&t.ProductAction.ProductActionType&&e.indexOf(t.ProductAction.ProductActionType)>-1){if(i=s(t),o=b(t),i.currency=t.CurrencyCode||"USD",t.EventName&&(i.content_name=t.EventName),f=t.ProductAction.ProductList.reduce(function(n,t){return t.Sku&&n.push(t.Sku),n},[]),f&&f.length>0&&(i.content_ids=f),(t.ProductAction.ProductActionType==mParticle.ProductActionType.AddToWishlist||t.ProductAction.ProductActionType==mParticle.ProductActionType.Checkout)&&(h=tt(t),h&&(i.content_category=h),t.ProductAction.ProductActionType==mParticle.ProductActionType.Checkout&&t.ProductAction.CheckoutStep&&(i.checkout_step=t.ProductAction.CheckoutStep)),t.ProductAction.ProductActionType==mParticle.ProductActionType.AddToCart||t.ProductAction.ProductActionType==mParticle.ProductActionType.AddToWishlist||t.ProductAction.ProductActionType==mParticle.ProductActionType.ViewDetail)u=t.ProductAction.ProductList.reduce(function(t,i){return n(i.Price)&&n(i.Quantity)&&(t+=i.Price*i.Quantity),t},0),i.value=u,r=t.ProductAction.ProductActionType==mParticle.ProductActionType.AddToWishlist?l:t.ProductAction.ProductActionType==mParticle.ProductActionType.AddToCart?c:w;else if(t.ProductAction.ProductActionType==mParticle.ProductActionType.Checkout||t.ProductAction.ProductActionType==mParticle.ProductActionType.Purchase)r=t.ProductAction.ProductActionType==mParticle.ProductActionType.Checkout?a:y,t.ProductAction.TotalAmount&&(i.value=t.ProductAction.TotalAmount),v=t.ProductAction.ProductList.reduce(function(t,i){return n(i.Quantity)&&(t+=i.Quantity),t},0),i.num_items=v;else if(t.ProductAction.ProductActionType==mParticle.ProductActionType.RemoveFromCart)return r=p,u=t.ProductAction.TotalAmount?t.ProductAction.TotalAmount:t.ProductAction.ProductList.reduce(function(t,i){return n(i.TotalAmount)&&(t+=i.TotalAmount),t},0),i.value=u,fbq("trackCustom",r||"customEvent",i,o),!0;if(r)fbq("track",r,i,o);else return!1;return!0}return!1}function nt(n){o(n,v)}function o(n,t){var i=s(n),r=b(n);t=t||n.EventName;n.EventName&&(i.content_name=n.EventName);fbq("trackCustom",t||"customEvent",i,r)}function s(n){var t={};if(n&&n.EventAttributes)try{t=JSON.parse(JSON.stringify(n.EventAttributes))}catch(i){}return t}function n(n){return!isNaN(parseFloat(n))&&isFinite(n)}function tt(n){var t,r,u;if(n.EventDataType==i.Commerce?(t=n.EventCategory?mParticle.CommerceEventType:mParticle.ProductActionType,r=n.EventCategory||n.ProductAction.ProductActionType):(t=mParticle.EventType,r=n.EventCategory),t&&r)for(u in t)if(r==t[u])return u;return null}function b(n){return{eventID:n.SourceMessageId||null}}var u=this,f=!1,r=null;u.name=t;this.init=k;this.process=d},u,o;return typeof window!="undefined"&&window&&window.mParticle&&window.mParticle.addForwarder&&window.mParticle.addForwarder({name:t,constructor:r,getId:b}),u={register:k},o=u.register,n.default=u,n.register=o,n}({}) ;;
; var mpBrazeKitV3=function(n){function c(n,t){return t={exports:{}},n(t,t.exports),t.exports}function v(){return u}function y(n){var i=[t,r].join("-");if(!n){window.console.log("You must pass a config object to register the kit "+i);return}if(!e(n)){window.console.log("'config' must be an object. You passed in a "+typeof n);return}e(n.kits)?n.kits[i]={constructor:f}:(n.kits={},n.kits[i]={constructor:f});window.console.log("Successfully registered "+i+" to your mParticle configuration")}function p(){for(var r,t,n,u={},i=0;i<arguments.length;i+=1)for(r=arguments[i],t=Object.keys(r),n=0;n<t.length;n+=1)u[t[n]]=r[t[n]];return u}function e(n){return n!=null&&typeof n=="object"&&Array.isArray(n)===!1}var s=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},l=c(function(n){(function(){(function(t,i){var r,u,f;if(n.exports)r=i(),n.exports=r,n.exports.default=r;else if(t.appboy){u=i();for(f in u)t.appboy[f]=u[f]}else t.appboy=i()})("undefined"!=typeof self?self:this,function(){function la(n){var t=0;return function(){return t<n.length?{done:!1,value:n[t++]}:{done:!0}}}function rt(n){var t="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];return t?t.call(n):{next:la(n)}}function ya(n){var t,i;for(n=["object"==typeof globalThis&&globalThis,n,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof s&&s],t=0;t<n.length;++t)if(i=n[t],i&&i.Math==Math)return i;throw Error("Cannot find global object");}function ih(n,t){var r,i,u;if(t)n:{for(r=nu,n=n.split("."),i=0;i<n.length-1;i++){if(u=n[i],!(u in r))break n;r=r[u]}n=n[n.length-1];i=r[n];t=t(i);t!=i&&null!=t&&va(r,n,{configurable:!0,writable:!0,value:t})}}function pt(n,t){var i,r;if(n.prototype=aa(t.prototype),n.prototype.constructor=n,pe)pe(n,t);else for(i in t)"prototype"!=i&&(Object.defineProperties?(r=Object.getOwnPropertyDescriptor(t,i),r&&Object.defineProperty(n,i,r)):n[i]=t[i]);n.gi=t.prototype}function ct(n){var i=t;this.Le="undefined"==typeof window?self:window;this.C=n;this.F=i}function we(n){if("indexedDB"in n.Le)return n.Le.indexedDB}function rr(n){try{if(null==we(n))return!1;if(we(n).open("Braze IndexedDB Support Test"),"undefined"!=typeof window){var t=window.bi||window.Ya||window.di;if(t&&t.wh&&t.wh.id)return n.F.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}catch(i){return n.F.info("Not using IndexedDB for storage due to following error: "+i),!1}}function ur(n,t,i){var r=we(n).open(n.C.P,n.C.VERSION);return null==r?("function"==typeof i&&i(),!1):(r.onupgradeneeded=function(t){n.F.info("Upgrading indexedDB "+n.C.P+" to v"+n.C.VERSION+"...");t=t.target.result;for(var i in n.C.G)n.C.G.hasOwnProperty(i)&&!t.objectStoreNames.contains(n.C.G[i])&&t.createObjectStore(n.C.G[i])},r.onsuccess=function(r){var u=r.target.result;u.onversionchange=function(){u.close();"function"==typeof i&&i();n.F.error("Needed to close the database unexpectedly because of an upgrade in another tab")};t(u)},r.onerror=function(t){return n.F.info("Could not open indexedDB "+n.C.P+" v"+n.C.VERSION+": "+t.target.errorCode),"function"==typeof i&&i(),!0},!0)}function fh(n,t,i,r){rr(n)?ur(n,function(u){u.objectStoreNames.contains(t)?(u=u.transaction([t],"readonly").objectStore(t).openCursor(null,"prev"),u.onerror=function(){n.F.error("Could not open cursor for "+t+" on indexedDB "+n.C.P);"function"==typeof r&&r()},u.onsuccess=function(n){n=n.target.result;null!=n&&null!=n.value&&null!=n.key?i(n.key,n.value):"function"==typeof r&&r()}):(n.F.error("Could not retrieve last record from "+t+" on indexedDB "+n.C.P+" - "+t+" is not a valid objectStore"),"function"==typeof r&&r())},r):"function"==typeof r&&r()}function pu(n,t,i){rr(n)&&ur(n,function(r){r.objectStoreNames.contains(t)?r.transaction([t],"readwrite").objectStore(t)["delete"](i).onerror=function(){n.F.error("Could not delete record "+i+" from "+t+" on indexedDB "+n.C.P)}:n.F.error("Could not delete record "+i+" from "+t+" on indexedDB "+n.C.P+" - "+t+" is not a valid objectStore")})}function eh(n,t,i){rr(n)&&ur(n,function(r){var f,u;r.objectStoreNames.contains(t)?(f=r.transaction([t],"readwrite").objectStore(t),r=f.openCursor(),u=[],r.onerror=function(){0<u.length?(n.F.info("Cursor closed midway through for "+t+" on indexedDB "+n.C.P),i(u)):n.F.error("Could not open cursor for "+t+" on indexedDB "+n.C.P)},r.onsuccess=function(n){var t=n.target.result;null!=t?(null!=t.value&&null!=t.key&&(f["delete"](t.key).onsuccess=function(){u.push(t.value)}),t.continue()):0<u.length&&i(u)}):n.F.error("Could not retrieve objects from "+t+" on indexedDB "+n.C.P+" - "+t+" is not a valid objectStore")})}function ti(n,i,r,u){return n=wu(n),-1===n.indexOf(i)?(t.error(r+" Valid values from "+u+' are "'+n.join('"/"')+'".'),!1):!0}function ft(n){return Array.isArray?Array.isArray(n):"[object Array]"===Object.prototype.toString.call(n)}function ii(n){return"[object Date]"===Object.prototype.toString.call(n)}function be(n){return"[object Object]"===Object.prototype.toString.call(n)}function pa(n){var i,t;null==n&&(n=[]);for(var r=[],f=arguments.length,u=0,e=n.length;u<e;u++)if(i=n[u],-1===r.indexOf(i)){for(t=1;t<f&&-1!==arguments[t].indexOf(i);t++);t===f&&r.push(i)}return r}function ki(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t}function wu(n){var i=[];for(var t in n)n.hasOwnProperty(t)&&void 0!==n[t]&&i.push(n[t]);return i}function di(n,t){var r,u,f,i,e;if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;if(r=n.toString(),r!==t.toString())return!1;switch(r){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!=+n?+t!=+t:0==+n?1/+n==1/t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t}if(r="[object Array]"===r,!r&&("object"!=typeof n||"object"!=typeof t||(u=n.constructor,f=t.constructor,u!==f&&!("function"==typeof u&&u instanceof u&&"function"==typeof f&&f instanceof f)&&"constructor"in n&&"constructor"in t)))return!1;for(u=[],f=[],i=u.length;i--;)if(u[i]===n)return f[i]===t;if(u.push(n),f.push(t),r){if(i=n.length,i!==t.length)return!1;for(;i--;)if(!di(n[i],t[i]))return!1}else{if(r=ki(n),i=r.length,ki(t).length!==i)return!1;for(;i--;)if(e=r[i],!t.hasOwnProperty(e)||!di(n[e],t[e]))return!1}return u.pop(),f.pop(),!0}function tu(n,t){return n/=1e3,t&&(n=Math.floor(n)),n}function ri(n){var t=parseInt(n);return null==n||isNaN(t)?null:new Date(1e3*t)}function bu(n){return null!=n&&ii(n)?n.toISOString().replace(/\.[0-9]{3}Z$/,""):n}function gi(n){return null==n||""===n?null:new Date(n)}function y(n,t,i,r,u){this.gb=n;this.type=t;this.time=null==i||""===i?(new Date).valueOf():i;this.sessionId=r;this.data=u}function sh(n){return null!=n&&be(n)&&null!=n.t&&""!==n.t}function hh(n){return new y(n.u,n.t,n.ts,n.s,n.d)}function fr(n,t,i){null==n&&(n=ai.Ia());i=parseInt(i);(isNaN(i)||0===i)&&(i=(new Date).valueOf());this.ia=n;this.Ib=i;this.Ob=(new Date).valueOf();this.Cd=t}function ku(n){for(var t,r=n.length,i=n.length-1;0<=i;i--)t=n.charCodeAt(i),127<t&&2047>=t?r++:2047<t&&65535>=t&&(r+=2),56320<=t&&57343>=t&&i--;return r}function dt(n,i,r,u){return(u="string"==typeof n||null===n&&u)||t.error("Cannot "+i+" because "+r+' "'+n+'" is invalid.'),u}function gt(n,i,r){var u=null!=n&&"string"==typeof n&&(""===n||n.match(wa));return u||t.error("Cannot "+i+" because "+r+' "'+n+'" is invalid.'),u}function ch(n,i,r,u,f){var o,e,s,h;if(null==n&&(n={}),"object"!=typeof n||ft(n))return t.error(i+" requires that "+r+" be an object. Ignoring "+f+"."),[!1,null];if(i=JSON.stringify(n),ku(i)>ka)return t.error("Could not "+u+" because "+r+" was greater than the max size of "+da+"."),[!1,null];try{o=JSON.parse(i)}catch(c){return t.error("Could not "+u+" because "+r+" did not contain valid JSON."),[!1,null]}for(e in n){if(!gt(e,u,"the "+f+" property name"))return[!1,null];if(r=n[e],null==r)delete n[e],delete o[e];else if(ii(r)&&(o[e]=bu(r)),s=u,h="the "+f+' property "'+e+'"',(i=be(r)||ft(r)?ke(r,o[e]):lh(r))||t.error("Cannot "+s+" because "+h+' "'+r+'" is invalid.'),!i)return[!1,null]}return[!0,o]}function ke(n,t){var i,r;if(ft(n)&&ft(t)){for(i=0;i<n.length&&i<t.length;i++)if(ii(n[i])&&(t[i]=bu(n[i])),!ke(n[i],t[i]))return!1}else if(be(n)){for(i=rt(ki(n)),r=i.next();!r.done;r=i.next())if(r=r.value,ii(n[r])&&(t[r]=bu(n[r])),!ke(n[r],t[r]))return!1}else return lh(n);return!0}function lh(n){var t=typeof n;return null==n||"number"===t||"boolean"===t||ii(n)||"string"===t}function w(n,t){this.f=n;this.H=t}function iu(){}function vh(n,t){if(n&&t)if(n=n.toLowerCase(),ft(t.O)){for(var i=0;i<t.O.length;i++)if(-1!==n.indexOf(t.O[i].toLowerCase()))return t.S}else if(-1!==n.indexOf(t.O.toLowerCase()))return t.S}function ru(){var n,t,i,r,u,f;if(this.userAgentData=navigator.userAgentData){if(n=this.userAgentData.brands,n&&n.length)for(n=rt(n),t=n.next();!t.done;t=n.next()){t=t.value;i=void 0;r=[];for(i in et)et[i]!==et.dc&&r.push(et[i]);if((i=t.brand.match(new RegExp("("+r.join("|")+")","i")))&&0<i.length){u=i[0];f=t.version;break}}this.Ya=u||"Unknown Browser";this.version=f||"Unknown Version"}}function uu(){this.We=iv()}function iv(){var t=navigator.userAgent||"",i=t.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[],n;return/trident/i.test(i[1])?(n=/\brv[ :]+(\.?\d+(\.\d+)*)/g.exec(t)||[],[et.dc,n[1]||""]):-1!==t.indexOf("(Web0S; Linux/SmartTV)")?["LG Smart TV",null]:-1!==t.indexOf("CrKey")?["Chromecast",null]:-1!==t.indexOf("BRAVIA")||-1!==t.indexOf("SonyCEBrowser")||-1!==t.indexOf("SonyDTV")?["Sony Smart TV",null]:-1!==t.indexOf("PhilipsTV")?["Philips Smart TV",null]:t.match(/\b(Roku)\b/)?["Roku",null]:t.match(/\bAFTM\b/)?["Amazon Fire Stick",null]:i[1]===et.ae&&(n=t.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/),null!=n)?(n=n.slice(1),n[0]=n[0].replace("OPR",et.le),n[0]=n[0].replace("EdgA",et.Wc),"Edg"===n[0]&&(n[0]=et.Wc),[n[0],n[1]]):i[1]===et.hd&&(n=t.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=n)?(n=n.slice(1),n[0]=n[0].replace("EdgiOS",et.Wc),[n[0],n[1]]):(i=i[2]?[i[1],i[2]]:[null,null],i[0]===et.hd&&null!=(n=t.match(/version\/(\.?\d+(\.\d+)*)/i))&&i.splice(1,1,n[1]),null!=(n=t.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&i.splice(1,1,n[2]),i[0]===et.le&&null!=(n=t.match(/mini\/(\.?\d+(\.\d+)*)/i)))?["Opera Mini",n[1]||""]:(i[0]&&(t=i[0].toLowerCase(),"msie"===t&&(i[0]=et.dc),"crios"===t&&(i[0]=et.ae),"tizen"===t&&(i[0]="Samsung Smart TV",i[1]=null),"samsungbrowser"===t&&(i[0]="Samsung Browser")),i)}function yh(){var n=this;this.Md=new(navigator.userAgentData?ru:uu);this.userAgent=navigator.userAgent;this.Ya=this.Md.Ed();this.version=this.Md.Fd();this.qb().then(function(t){return n.ga=t});this.language=(navigator.ji||navigator.language||navigator.browserLanguage||navigator.ii||"").toLowerCase();this.lh=rv(this.userAgent)}function rv(n){n=n.toLowerCase();for(var i="googlebot bingbot slurp duckduckbot baiduspider yandex facebookexternalhit sogou ia_archiver https://github.com/prerender/prerender aolbuild bingpreview msnbot adsbot mediapartners-google teoma".split(" "),t=0;t<i.length;t++)if(-1!==n.indexOf(i[t]))return!0;return!1}function wh(n,t){this.rc=n;this.R=t}function er(n,t,i){var r=i;null!=i&&i instanceof fr&&(r=i.A());n.rc.store(t,r)}function bh(n,t){var i=nr(n,t);null!=i&&(i.Ob=(new Date).valueOf(),er(n,t,i))}function nr(n,t){return n=n.rc.Z(t),null==n||null==n.g?n=null:(t=new fr(n.g,n.e,n.c),t.Ob=n.l,n=t),n}function d(n,t){var r,u;if(null==t||0===t.length)return!1;for(ft(t)||(t=[t]),r=n.R.Z(i.Wb),null!=r&&ft(r)||(r=[]),u=0;u<t.length;u++)r.push(t[u].A());return n.R.store(i.Wb,r)}function kh(n){var r=n.R.Z(i.Wb),f,u,t;if(n.R.remove(i.Wb),null==r&&(r=[]),n=[],f=!1,u=null,ft(r))for(t=0;t<r.length;t++)sh(r[t])?n.push(hh(r[t])):u=t;else f=!0;return(f||null!=u)&&(t="Stored events could not be deserialized as Events",f&&(t+=", was "+Object.prototype.toString.call(r)+" not an array"),null!=u&&(t+=", value at index "+u+" does not look like an event"),t+=", serialized values were of type "+typeof r+": "+JSON.stringify(r),n.push(new y(null,a.Yc,(new Date).valueOf(),null,{e:t}))),n}function v(n,t,r){ti(i,t,"StorageManager cannot store object.","StorageManager.KEYS.OBJECTS")&&n.R.store(t,r)}function l(n,t){return ti(i,t,"StorageManager cannot retrieve object.","StorageManager.KEYS.OBJECTS")?n.R.Z(t):!1}function b(n,t){ti(i,t,"StorageManager cannot remove object.","StorageManager.KEYS.OBJECTS")&&n.R.remove(t)}function dh(n,t){var u=n.R.Z(i.Qa),f,r;null==u&&(u={});f=t.user_id||i.Qc;for(r in t)"user_id"===r||null!=u[f]&&null!=u[f][r]||gh(n,t.user_id,r,t[r])}function gh(n,t,r,u){var e=n.R.Z(i.Qa),o,f,s;if(null==e&&(e={}),o=t||i.Qc,f=e[o],null==f&&(f={},null!=t&&(f.user_id=t)),"custom"===r){null==f[r]&&(f[r]={});for(s in u)f[r][s]=u[s]}else f[r]=u;return e[o]=f,n.R.store(i.Qa,e)}function uv(n){var t=n.R.Z(i.Qa),r;n.R.remove(i.Qa);n=[];for(r in t)null!=t[r]&&n.push(t[r]);return n}function or(n){this.$=n;this.df=yt.Ya===et.hd?3:10}function ui(n,t){this.$=n;n=0;for(var i=document.location.hostname,r=i.split(".");n<r.length-1&&-1===document.cookie.indexOf("ab._gd=ab._gd");)n++,i="."+r.slice(-1-n).join("."),document.cookie="ab._gd=ab._gd;domain="+i+";";document.cookie="ab._gd=;expires="+new Date(0).toGMTString()+";domain="+i+";";this.Me=i;this.Ee=525949;this.Qe=!!t}function ge(n){var t=new Date;return t.setTime(t.getTime()+6e4*n.Ee),t.getFullYear()}function nc(n,t){t=t+"=;expires="+new Date(0).toGMTString();document.cookie=t;document.cookie=t+";path=/";document.cookie=t+";path="+document.location.pathname;n=t+";domain="+n.Me;document.cookie=n;document.cookie=n+";path=/";document.cookie=n+";path="+document.location.pathname}function fu(){this.ud={};this.Ke=5242880;this.df=3}function du(n,t,i){this.ma=[];t&&this.ma.push(new ui(n));i&&this.ma.push(new or(n));this.ma.push(new fu)}function bt(){this.Fb={}}function lt(n,t){if("function"!=typeof t)return null;var i=ai.Ia();return n.Fb[i]=t,i}function nt(n,t){var i=[];for(var r in n.Fb)i.push(n.Fb[r](t))}function tc(){if(null==gu){gu=!1;try{var n=Object.defineProperty({},"passive",{get:function(){gu=!0}});window.addEventListener("testPassive",null,n);window.removeEventListener("testPassive",null,n)}catch(t){}}return gu}function eu(n,t,i){n.addEventListener(t,i,tc()?{passive:!0}:!1)}function no(n,t,i,r){return null==n?!1:(t=t||!1,i=i||!1,n=n.getBoundingClientRect(),null==n?!1:(0<=n.top&&n.top<=(window.innerHeight||document.documentElement.clientHeight)||!t)&&(0<=n.left||!r)&&(0<=n.bottom&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!i)&&(n.right<=(window.innerWidth||document.documentElement.clientWidth)||!r))}function ic(n){if(n.onclick){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0);n.onclick.apply(n,[t])}}function ou(n,t,i){var r=null,u=null;eu(n,"touchstart",function(n){r=n.touches[0].clientX;u=n.touches[0].clientY});eu(n,"touchmove",function(f){if(null!=r&&null!=u){var e=r-f.touches[0].clientX,o=u-f.touches[0].clientY;Math.abs(e)>Math.abs(o)&&25<=Math.abs(e)?(0<e&&t===to?i(f):0>e&&t===io&&i(f),u=r=null):25<=Math.abs(o)&&(0<o&&t===uc&&n.scrollTop===n.scrollHeight-n.offsetHeight?i(f):0>o&&t===fc&&0===n.scrollTop&&i(f),u=r=null)}})}function rc(n,t,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("viewBox",n),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path"),n.setAttribute("d",t),null!=i&&n.setAttribute("fill",i),r.appendChild(n),r}function ec(n,t,i){var r=document.createElement("button");return r.setAttribute("aria-label",n),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),eu(r,"touchstart",function(){}),r.className="ab-close-button",n=rc("0 0 15 15","M15 1.5L13.5 0l-6 6-6-6L0 1.5l6 6-6 6L1.5 15l6-6 6 6 1.5-1.5-6-6 6-6z",t),r.appendChild(n),r.addEventListener("keydown",function(n){(32===n.keyCode||13===n.keyCode)&&(i(),n.stopPropagation())}),r.onclick=function(n){i();n.stopPropagation()},r}function ut(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.id=n;this.viewed=t||!1;this.title=i||"";this.imageUrl=r;this.description=u||"";this.created=f||null;this.updated=e||null;this.categories=o||[];this.expiresAt=s||null;this.url=h;this.linkText=c;l=parseFloat(l);this.aspectRatio=isNaN(l)?null:l;this.extras=a;this.pinned=v||!1;this.dismissible=y||!1;this.dismissed=!1;this.clicked=p||!1;this.test=!1;this.pd=this.X=null}function nf(n){return null==n.X&&(n.X=new bt),n.X}function tf(n){return null==n.pd&&(n.pd=new bt),n.pd}function oc(n,t){if(null==t||t[e.wa]!==n.id)return!0;if(t[e.pe])return!1;if(null!=t[e.ea]&&null!=n.updated&&t[e.ea]<tu(n.updated.valueOf()))return!0;if(t[e.za]&&!n.viewed&&(n.viewed=!0),t[e.ta]&&!n.clicked&&(n.clicked=t[e.ta]),null!=t[e.Ua]&&(n.title=t[e.Ua]),null!=t[e.xa]&&(n.imageUrl=t[e.xa]),null!=t[e.Ra]&&(n.description=t[e.Ra]),null!=t[e.ea]){var i=ri(t[e.ea]);null!=i&&(n.updated=i)}return null!=t[e.ca]&&(n.expiresAt=t[e.ca]===cc?null:ri(t[e.ca])),null!=t[e.URL]&&(n.url=t[e.URL]),null!=t[e.ya]&&(n.linkText=t[e.ya]),null!=t[e.sa]&&(i=parseFloat(t[e.sa]),n.aspectRatio=isNaN(i)?null:i),null!=t[e.ka]&&(n.extras=t[e.ka]),null!=t[e.la]&&(n.pinned=t[e.la]),null!=t[e.va]&&(n.dismissible=t[e.va]),null!=t[e.V]&&(n.test=t[e.V]),!0}function rf(n){if(n[e.pe])return null;var i=n[e.wa],r=n[e.TYPE],u=n[e.za],w=n[e.Ua],c=n[e.xa],b=n[e.Ra],f=ri(n[e.ea]),o=n[e.ca]===cc?null:ri(n[e.ca]),l=n[e.URL],a=n[e.ya],v=n[e.sa],s=n[e.ka],h=n[e.la],y=n[e.va],p=n[e.ta];if(n=n[e.V]||!1,r===ht.xe||r===ht.ic)i=new cr(i,u,w,c,b,null,f,null,o,l,a,v,s,h,y,p);else if(r===ht.Yb)i=new hr(i,u,w,c,b,null,f,null,o,l,a,v,s,h,y,p);else if(r===ht.Xb)i=new sr(i,u,c,null,f,null,o,l,a,v,s,h,y,p);else if(r===ht.Sc)i=new wi(i,u,f,o,s,h);else return t.error("Ignoring card with unknown type "+r),null;return i.test=n,i}function sc(n){var t=n[u.wa],i=n[u.TYPE],r=n[u.za],b=n[u.Ua],h=n[u.xa],k=n[u.Ra],c=gi(n[u.bc]),f=gi(n[u.ea]),l=n[u.Zb],e=gi(n[u.ca]),a=n[u.URL],v=n[u.ya],y=n[u.sa],o=n[u.ka],s=n[u.la],p=n[u.va],w=n[u.ta];if(n=n[u.V]||!1,i===ht.ic)t=new cr(t,r,b,h,k,c,f,l,e,a,v,y,o,s,p,w);else if(i===ht.Yb)t=new hr(t,r,b,h,k,c,f,l,e,a,v,y,o,s,p,w);else if(i===ht.Xb)t=new sr(t,r,h,c,f,l,e,a,v,y,o,s,p,w);else if(i===ht.Sc)t=new wi(t,r,f,e,o,s);else return;return t.test=n,t}function hc(n){null!=n&&(n=n.querySelectorAll(".ab-unread-indicator")[0],null!=n&&(n.className+=" read"))}function sr(n,t,i,r,u,f,e,o,s,h,c,l,a,v){ut.call(this,n,t,null,i,null,r,u,f,e,o,s,h,c,l,a,v);this.Dc="ab-banner";this.Gc=!1}function hr(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){ut.call(this,n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p);this.Dc="ab-captioned-image";this.Gc=!0}function cr(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){ut.call(this,n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p);this.Dc="ab-classic-card";this.Gc=!0}function wi(n,t,i,r,u,f){ut.call(this,n,t,null,null,null,null,i,null,r,null,null,null,u,f,null);this.Dc="ab-control-card";this.Gc=!1}function ev(n){return n=parseInt(n),!isNaN(n)&&0==(n&4278190080)>>>24}function fi(n){var t;if(n=parseInt(n),isNaN(n))return"";t=parseFloat(t);isNaN(t)&&(t=1);n>>>=0;var i=n&255,r=(n&65280)>>>8,u=(n&16711680)>>>16;return(yt.Ya===et.dc?8<yt.version:1)?"rgba("+[u,r,i,((n&4278190080)>>>24)/255*t].join()+")":"rgb("+[u,r,i].join()+")"}function p(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht){this.message=n;this.messageAlignment=t||lr;this.duration=l||5e3;this.slideFrom=i||ac;this.extras=r||{};this.campaignId=u;this.cardId=f;this.triggerId=e;this.clickAction=o||ef;this.uri=s;this.openTarget=h||vc;this.dismissType=c||fo;this.icon=a;this.imageUrl=v;this.imageStyle=y||yc;this.iconColor=p||ei.nd;this.iconBackgroundColor=w||ei.$d;this.backgroundColor=b||ei.nd;this.textColor=k||ei.ce;this.closeButtonColor=d||ei.Sf;this.animateIn=g;null==this.animateIn&&(this.animateIn=!0);this.animateOut=nt;null==this.animateOut&&(this.animateOut=!0);this.header=tt;this.headerAlignment=it||lr;this.headerTextColor=rt||ei.ce;this.frameColor=ut||ei.vg;this.buttons=ft||[];this.cropType=et||oo;this.orientation=ot;this.htmlId=st;this.css=ht;this.Fe=this.Wa=this.Ge=!1;this.X=new bt;this.nc=new bt}function uf(n){return null!=n.htmlId&&4<n.htmlId.length}function si(n){return uf(n)&&null!=n.css&&0<n.css.length}function ff(n){if(uf(n)&&si(n))return n.htmlId+"-css"}function ro(n){var r,s,i;if(n.is_control)return new ar(n.trigger_id);r=n.type;null!=r&&(r=r.toUpperCase());var u=n.message,w=n.text_align_message,at=n.slide_from,h=n.extras,c=n.campaign_id,l=n.card_id,a=n.trigger_id,b=n.click_action,k=n.uri,d=n.open_target,v=n.message_close,y=n.duration,g=n.icon,nt=n.image_url,st=n.image_style,tt=n.icon_color,it=n.icon_bg_color,rt=n.bg_color,ut=n.text_color,ft=n.close_btn_color,ht=n.header,ct=n.text_align_header,lt=n.header_text_color,et=n.frame_color,ot=[],f=n.btns;for(null==f&&(f=[]),s=0;s<f.length;s++)i=f[s],ot.push(new hi(i.text,i.bg_color,i.text_color,i.border_color,i.click_action,i.uri,i.id));f=n.crop_type;s=n.orientation;i=n.animate_in;var p=n.animate_out,e=n.html_id,o=n.css;if((null==e||""===e||null==o||""===o)&&(o=e=void 0),r===bv||r===kv)u=new yr(u,w,h,c,l,a,b,k,d,v,y,g,nt,st,tt,it,rt,ut,ft,i,p,ht,ct,lt,et,ot,f,e,o);else if(r===dv)u=new vr(u,w,h,c,l,a,b,k,d,v,y,g,nt,st,tt,it,rt,ut,ft,i,p,ht,ct,lt,et,ot,f,s,e,o);else if(r===wv)u=new pr(u,w,at,h,c,l,a,b,k,d,v,y,g,nt,tt,it,rt,ut,ft,i,p,e,o);else if(r===wc||r===bc)u=new yi(u,h,c,l,a,v,y,i,p,et,e,o,n.message_fields),u.Th=n.trusted||!1;else{t.error("Ignoring message with unknown type "+r);return}return u.nf=r,u}function ov(n,t){if(t&&t.parentNode){var i=t.closest(".ab-iam-root");null==i&&(i=t);n.Ja()&&null!=i.parentNode&&((t=i.parentNode.classList)&&t.contains(cf)&&t.remove(cf),document.body.removeEventListener("touchmove",lc));i.className=i.className.replace(kc,ny)}return n.animateOut}function vi(n,t,i){var r,f,u,e;null!=t&&(n.sc=null,r=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t,f=!1,r&&(f=ov(n,r)),u=document.body,null!=u&&(e=u.scrollTop),r=function(){if(t&&t.parentNode){var r=t.closest(".ab-iam-root");null==r&&(r=t);r.parentNode&&r.parentNode.removeChild(r)}null!=ff(n)&&(r=document.getElementById(ff(n)))&&r.parentNode&&r.parentNode.removeChild(r);null!=u&&"Safari"===yt.Ya&&(u.scrollTop=e);i?i():n.Nd()},f?setTimeout(r,gv):r(),n.tc&&n.tc.focus())}function lc(n){n.targetTouches&&1<n.targetTouches.length||n.target.classList&&n.target.classList.contains("ab-message-text")&&n.target.scrollHeight>n.target.clientHeight||document.querySelector("."+cf)&&n.preventDefault()}function hi(n,t,i,r,u,f,e){this.text=n||"";this.backgroundColor=t||ei.$d;this.textColor=i||ei.nd;this.borderColor=r||this.backgroundColor;this.clickAction=u||ef;this.uri=f;null==e&&(e=so);this.id=e;this.Wa=!1;this.X=new bt}function ar(n){this.triggerId=n}function dc(n){for(var r,u,t=n.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button"),i=0;i<t.length;i++)t[i].tabIndex=0;0<t.length&&(r=t[0],u=t[t.length-1],n.addEventListener("keydown",function(t){var i=document.activeElement;9===t.keyCode&&(t.shiftKey||i!==u&&i!==n?!t.shiftKey||i!==r&&i!==n||(t.preventDefault(),u.focus()):(t.preventDefault(),r.focus()))}))}function gc(n,t){t.setAttribute("role","dialog");t.setAttribute("aria-modal",!0);t.setAttribute("aria-label","Modal Message");n&&t.setAttribute("aria-labelledby",n)}function nl(n,t,i,r,u){var s,o,h,e,f,c;if(0<n.buttons.length)for(s=document.createElement("div"),s.className="ab-message-buttons",r.appendChild(s),o=r.getElementsByClassName("ab-message-text")[0],null!=o&&(o.className+=" ab-with-buttons"),o=function(f){return function(e){return vi(n,r,function(){t.Ic(f,n);f.clickAction===su?at.openUri(f.uri,e,u||n.openTarget===sf):f.clickAction===uo&&i()}),e.stopPropagation(),!1}},h=0;h<n.buttons.length;h++)e=n.buttons[h],f=document.createElement("button"),f.className="ab-message-button",f.setAttribute("type","button"),eu(f,"touchstart",function(){}),c=e.text,""===e.text&&(c=""),f.appendChild(document.createTextNode(c)),si(n)||(f.style.backgroundColor=fi(e.backgroundColor),f.style.color=fi(e.textColor),f.style.borderColor=fi(e.borderColor)),f.onclick=o(e),s.appendChild(f)}function vr(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht){et=et||eo;p.call(this,n,t,null,i,r,u,f,e,o,s,h||"SWIPE",c,l,a,v,y,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot||"PORTRAIT",st,ht)}function ty(n){var t,i,r;if(null==n&&(n=""),t=n.split("?").slice(1).join("?"),n={},null!=t)for(t=t.split("&"),i=0;i<t.length;i++)r=t[i].split("="),""!==r[0]&&(n[r[0]]=r[1]);return n}function co(n){return n&&(n=n.toString().toLowerCase(),0===n.lastIndexOf("javascript:",0)||0===n.lastIndexOf("data:",0))?!0:!1}function yi(n,t,i,r,u,f,e,o,s,h,c,l,a){null!=n&&0<n.length&&0<n.indexOf('"ab-in-app-message ab-html-message ab-email-capture"')&&0<n.indexOf('"ab-in-app-message ab-show ab-modal ab-effect-modal"')&&(s=o=!0);p.call(this,n,null,null,t,i,r,u,null,null,null,f||"SWIPE",e,null,null,null,null,null,null,null,null,o,s,null,null,null,h,void 0,void 0,void 0,c,l);this.messageFields=a}function yr(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st){et=et||oo;p.call(this,n,t,null,i,r,u,f,e,o,s,h||"SWIPE",c,l,a,v,y,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,void 0,ot,st)}function pr(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,w,b,k,d,g,nt,tt,it){k=k||ei.Uf;b=b||ei.Tf;p.call(this,n,t||"START",i,r,u,f,e,o,s,h,c,l,a,v,null,y,w,b,k,d,g,nt,void 0,void 0,void 0,void 0,void 0,void 0,void 0,tt,it)}function iy(n,i){if(hu={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"   .     ",FEED_TIMEOUT_MESSAGE:"   "},cs:{NO_CARDS_MESSAGE:"V tuto chvli pro vs nemme dn aktualizace.<br/>Zkontrolujte prosm znovu pozdji.",FEED_TIMEOUT_MESSAGE:"Prosm zkuste to znovu pozdji."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Prv venligst senere.",FEED_TIMEOUT_MESSAGE:"Prv venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verfgbar.<br/>Bitte spter noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte spter noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor comprubelo ms tarde.",FEED_TIMEOUT_MESSAGE:"Por favor intntelo ms tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualizacin.<br/>Vuelva a verificar ms tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo ms tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"Pivityksi ei ole saatavilla.<br/>Tarkista myhemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yrit myhemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise  jour disponible.<br/>Veuillez vrifier ultrieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez ressayer ultrieurement."},he:{NO_CARDS_MESSAGE:".  .    ",FEED_TIMEOUT_MESSAGE:".   "},hi:{NO_CARDS_MESSAGE:"            .",FEED_TIMEOUT_MESSAGE:"     ."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare pi tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare pi tardi."},ja:{NO_CARDS_MESSAGE:"<br/>",FEED_TIMEOUT_MESSAGE:""},ko:{NO_CARDS_MESSAGE:" .    .",FEED_TIMEOUT_MESSAGE:"   ."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst prv igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Prosz sprawdzi ponownie pniej.",FEED_TIMEOUT_MESSAGE:"Prosz sprbowa ponownie pniej."},pt:{NO_CARDS_MESSAGE:"No temos atualizaes.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"No temos nenhuma atualizao.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:",   ."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>Frsk igen senare.",FEED_TIMEOUT_MESSAGE:"Frsk igen senare."},th:{NO_CARDS_MESSAGE:" .",FEED_TIMEOUT_MESSAGE:"."},uk:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:" ,    ."},vi:{NO_CARDS_MESSAGE:"Chng ti khng c cp nht no.<br/>Vui lng kim tra li sau.",FEED_TIMEOUT_MESSAGE:"Vui lng th li sau."},"zh-hk":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hans":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hant":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-tw":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},zh:{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."}},null!=n&&(n=n.toLowerCase()),null!=n&&null==hu[n]){var r=n.indexOf("-");0<r&&(n=n.substring(0,r))}null==hu[n]&&(n="Braze does not yet have a localization for language "+n+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.",i?t.error(n):t.info(n),n="en");lo=n}function ci(n,t){this.cards=n;this.lastUpdated=t}function wr(n,t){t&&(t.className=t.className.replace("ab-show","ab-hide"),setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},il));var i=t.getAttribute(vo);null!=i&&n.N(i)}function tl(n,i,r){var u=document.createElement("div"),f,o;if(u.className="ab-feed-body",u.setAttribute("aria-label","Feed"),u.setAttribute("role","feed"),null==n.lastUpdated)r=document.createElement("div"),r.className="ab-no-cards-message",f=document.createElement("i"),f.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",r.appendChild(f),u.appendChild(r);else{f=!1;for(var s=function(t){n.La(i,t)},h=function(n){i.Hc(n)},e=0;e<n.cards.length;e++)o=n.cards[e]instanceof wi,!o||n instanceof ni?(u.appendChild(n.cards[e].aa(s,h,r)),f=f||!o):t.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.");f||(r=document.createElement("div"),r.className="ab-no-cards-message",r.innerHTML=hu[lo].NO_CARDS_MESSAGE,r.setAttribute("role","article"),u.appendChild(r))}return u}function lf(n,t,i){var o,r,s,u,f,e;if(null!=i){for(o=[],i=i.querySelectorAll(".ab-card"),n.od||(n.od={}),r=0;r<i.length;r++)if(s=i[r].getAttribute("data-ab-card-id"),!n.od[s]){u=i[r];u=null!=u&&!!u.getAttribute("data-ab-had-top-impression");f=i[r];f=null!=f&&!!f.getAttribute("data-ab-had-bottom-impression");var l=u,a=f,h=no(i[r],!0,!1,!1),c=no(i[r],!1,!0,!1);if(!u&&h&&(u=!0,e=i[r],null!=e&&e.setAttribute("data-ab-had-top-impression",!0)),!f&&c&&(f=!0,e=i[r],null!=e&&e.setAttribute("data-ab-had-bottom-impression",!0)),u&&f&&(h||c||hc(i[r]),!l||!a))for(u=0;u<n.cards.length;u++)if(n.cards[r].id===s){n.od[n.cards[r].id]=!0;o.push(n.cards[r]);break}}0<o.length&&n.Ma(t,o)}}function ao(n,t,i){var r,u;i.setAttribute("aria-busy","true");r=i.querySelectorAll(".ab-refresh-button")[0];null!=r&&(r.className+=" fa-spin");u=(new Date).valueOf().toString();i.setAttribute(vf,u);setTimeout(function(){if(i.getAttribute(vf)===u){for(var n=i.querySelectorAll(".fa-spin"),t=0;t<n.length;t++)n[t].className=n[t].className.replace(/fa-spin/g,"");n=i.querySelectorAll(".ab-initial-spinner")[0];null!=n&&(t=document.createElement("span"),t.innerHTML=hu[lo].FEED_TIMEOUT_MESSAGE,n.parentNode.appendChild(t),n.parentNode.removeChild(n));"true"===i.getAttribute("aria-busy")&&i.setAttribute("aria-busy","false")}},ry);n.Se(t)}function af(n,t,i,r,u,f){if(ft(t)){for(var o=[],e=0;e<t.length;e++)t[e]instanceof ut&&o.push(t[e]);n.cards=o;n.lastUpdated=i;null!=r&&(r.setAttribute("aria-busy","false"),null==n.lastUpdated?wr(u,r):(t=r.querySelectorAll(".ab-feed-body")[0],null!=t&&(f=tl(n,u,f),t.parentNode.replaceChild(f,t),lf(n,u,f.parentNode))))}}function ni(n,t){ci.call(this,n,t)}function vt(){this.h=!1;this.j=[]}function yf(n){this.bb=n}function pf(n,t,i,r){this.lf=n;this.Mc=t;this.nb=i;this.I=r;this.Mc===yo&&this.nb!==rl&&this.nb!==ul&&this.nb!==fl&&this.nb!==el&&(this.I=ri(this.I))}function wf(n){this.filters=n}function ol(n){var r,i,t;if(null==n||!ft(n))return null;for(r=[],i=0;i<n.length;i++){for(var f=[],e=n[i],u=0;u<e.length;u++)t=e[u],f.push(new pf(t.property_key,t.property_type,t.comparator,t.property_value));r.push(f)}return new wf(r)}function sl(n){for(var t,r=[],i=0;i<n.length;i++){for(var f=[],e=n[i],u=0;u<e.length;u++)t=e[u],f.push(new pf(t.k,t.t,t.c,t.v));r.push(f)}return new wf(r)}function bf(n,t){this.bb=n;this.eb=t}function kf(n,t){this.Za=n;this.Gb=t}function df(n){this.cb=n}function gf(n,t){this.cb=n;this.eb=t}function ne(n){this.Za=n}function po(n,t){this.type=n;this.data=t}function hl(n,t,i){return pi[n.type]===t&&(null==n.data||n.data.fa(i))}function cl(n,i){var r=null;try{r=window.atob(n)}catch(u){return t.info("Failed to unencode analytics id "+n+": "+u.message),!1}return i===r.split("_")[0]}function ay(n){var i=n.type,t;switch(i){case wo:t=null;break;case bo:n=n.data;t=new df(n?n.product_id:null);break;case ko:n=n.data;t=new gf(n?n.product_id:null,n?ol(n.property_filters):null);break;case go:n=n.data;t=new ne(n?n.campaign_id:null);break;case ns:n=n.data;t=new yf(n?n.event_name:null);break;case ts:n=n.data;t=new bf(n?n.event_name:null,n?ol(n.property_filters):null);break;case is:n=n.data;t=new kf(n?n.id:null,n?n.buttons:null);break;case rs:t=null}return new po(i,t)}function vy(n){switch(n.t){case wo:var t=null;break;case bo:t=new df(n.d);break;case ko:t=n.d||{};t=new gf(t.id,sl(t.pf||[]));break;case go:t=new ne(n.d);break;case ns:t=new yf(n.d);break;case ts:t=n.d||{};t=new bf(t.e,sl(t.pf||[]));break;case is:t=new kf(n.d);break;case rs:t=null}return new po(n.t,t)}function us(n,t,i,r,u,f,e,o,s,h,c,l){this.id=n;this.ob=t||[];void 0===i&&(i=null);this.startTime=i;void 0===r&&(r=null);this.endTime=r;this.priority=u||0;this.type=f;this.ab=o||0;null==h&&(h=1e3*(this.ab+30));this.Oa=h;this.data=e;null==s&&(s=te);this.Rb=s;this.kf=c;this.Ca=l||null}function ll(n,i){var r=(new Date).valueOf()-i;return(i=null==i||isNaN(r)||null==n.Oa||r<n.Oa)||t.info("Trigger action "+n.type+" is no longer eligible for display - fired "+r+"ms ago and has a timeout of "+n.Oa+"ms"),!i}function yy(n){for(var i=[],t=0;t<n.c.length;t++)i.push(vy(n.c[t]));return new us(n.i,i,gi(n.s),gi(n.e),n.p,n.t,n.da,n.d,n.r,n.tm,n.ss,n.ld)}function al(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n+1))+n}function fs(n){var i,e=!1,u,o,f,r;try{if(window.XMLHttpRequest&&(i=new XMLHttpRequest)&&"undefined"!=typeof i.withCredentials||("undefined"!=typeof XDomainRequest?(i=new XDomainRequest,e=i.async=!0):t.error("This browser does not have any supported ajax options!")),null!=i){if(u=function(){"function"==typeof n.error&&n.error(i.status);"function"==typeof n.zc&&n.zc(!1)},i.onload=function(){var t,r;if(e)t=!0;else{if(4!==i.readyState)return;t=200<=i.status&&300>i.status||304===i.status}if(t){if("function"==typeof n.h){try{r=JSON.parse(i.responseText)}catch(f){n.h({error:""===i.responseText?"empty_response":"invalid_json_response",response:i.responseText})}r&&n.h(r)}"function"==typeof n.zc&&n.zc(!0)}else u()},i.onerror=function(){u()},i.ontimeout=function(){u()},o=JSON.stringify(n.data),e)i.onprogress=function(){},i.open("post",n.url);else for(i.open("POST",n.url,!0),i.setRequestHeader("Content-type","application/json"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),f=n.headers||[],r=0;r<f.length;r++)i.setRequestHeader(f[r][0],f[r][1]);i.send(o)}}catch(s){t.error("Network request error: "+s.message)}}function vl(n,t,i,r,u,f,e,o,s,h,c,l){var a=this;this.$=n;this.Kg=t;this.Oe=i;this.Fg=r;this.Bb=u;this.lb=0;this.pc=h.R.df;this.Ie=null;this.D=f;this.mc=e;this.f=o;this.J=s;this.b=h;this.W=l;this.Dg=c;this.sd=new bt;this.Eb=["npm"];this.Ag=50;this.Va=0;up(this.W,function(){a.Va=0});this.Cg=1e3;this.Bg=6e4}function es(n,t){var r=se(n.mc),u=r.Ac(),f=l(n.b,i.cc);return di(f,u)||(t.device=u),t.api_key=n.$,t.time=tu((new Date).valueOf(),!0),t.sdk_version=n.Kg,n.Oe&&(t.sdk_flavor=n.Oe),t.app_version=n.Fg,t.device_id=r.id,r=l(n.b,i.se)||[],u=l(n.b,i.ue)||"",0<n.Eb.length&&(!di(r,n.Eb)||u!==n.D.Kb())&&(t.sdk_metadata=n.Eb),t}function os(n,i,r,u){var f=r.auth_error,e=r.error;if(!f&&!e)return!0;if(f){for(n.Va+=1,r={errorCode:f.error_code},u=rt(u),e=u.next();!e.done;e=u.next())e=e.value,ft(e)&&"X-Braze-Auth-Signature"===e[0]&&(r.signature=e[1]);return i.respond_with&&i.respond_with.user_id?r.userId=i.respond_with.user_id:i.user_id&&(r.userId=i.user_id),(u=f.reason)?(r.reason=u,f="due to "+u):f="with error code "+f.error_code+".",n.W.Db||(f+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),t.error("SDK Authentication failed "+f),ie(n,i),nt(n.W.ze,r),!1}if(e){f=e;switch(f){case"empty_response":return d(n.b,[new y(n.f.o(),a.Yc,(new Date).valueOf(),n.D.Kb,{e:"Received successful response with empty body."})]),t.info("Received successful response with empty body."),!1;case"invalid_json_response":return d(n.b,[new y(n.f.o(),a.Yc,(new Date).valueOf(),n.D.Kb,{e:"Received successful response with invalid JSON: "+r.response})]),t.info("Received successful response with invalid JSON"),!1;case"invalid_api_key":f='The API key "'+i.api_key+'" is invalid for the baseUrl '+n.Bb;break;case"blacklisted":f="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case"no_device_identifier":f="No device identifier. Please contact support@braze.com"}t.error("Backend error: "+f)}return!1}function bi(n,r,u,f,e,o,s,h){var g,b;null==f&&(f=!0);f&&fe(n);var c=kh(n.b),y=uv(n.b),w=ip(n.D);if(0<c.length)for(var k=n.f.o(),d=rt(c),p=d.next();!p.done;p=d.next())p=p.value,g=null==p.gb&&null==k||p.gb===k,p.type===a.ve&&g&&(w=!0);if(!h&&!w&&n.Va>=n.Ag)t.info("Declining to flush data due to 50 consecutive authentication failures");else if(h=u||w,!f||0!==c.length||0!==y.length||r||h){var tt=!1,ut=function(t,r){var u=!1;fs({url:""+n.Bb+"/data/",data:t,headers:r,h:function(f){var s,o,h,c;null!=t.respond_with&&t.respond_with.triggers&&(n.lb=Math.max(n.lb-1,0));os(n,t,f,r)?(n.Va=0,s=n.J,null!=f&&null!=f.config&&(o=f.config,o.time>kt(s).Nb&&(o=new ce(o.time,o.events_blacklist,o.attributes_blacklist,o.purchases_blacklist,o.messaging_session_timeout,o.vapid_public_key,o.content_cards),h=!1,null!=o.ra&&kt(s).ra!==o.ra&&(h=!0),c=!1,null!=o.Hb.enabled&&(kt(s).Hb.enabled||!1)!==o.Hb.enabled&&(c=!0),s.uc=o,v(s.b,i.te,o.A()),h&&nt(s.xd),c&&nt(s.Ae))),(null==t.respond_with||t.respond_with.user_id==n.f.o())&&(null!=t.device&&v(n.b,i.cc,t.device),null!=t.sdk_metadata&&(v(n.b,i.se,t.sdk_metadata),v(n.b,i.ue,n.D.Kb())),n.Dg(f),"function"==typeof e&&e())):f.auth_error&&(u=!0)},error:function(){null!=t.respond_with&&t.respond_with.triggers&&(n.lb=Math.max(n.lb-1,0));ie(n,t);"function"==typeof o&&o()},zc:function(t){"function"==typeof s&&s(t);f&&!tt&&(t&&!u?cu(n):(t=n.Ie,(null==t||t<1e3*n.pc)&&(t=1e3*n.pc),cu(n,Math.min(3e5,al(1e3*n.pc,3*t)))),tt=!0)}})},it=function(n){return null!=n?n:""},l={};for(u=it(n.f.o()),(r||h)&&(l[u]=hs(n,r,h),h&&n.lb++),r=function(t,i){var r=it(i.user_id);l[r]||(l[r]=hs(n,!1,!1,r));l[r][t]||(l[r][t]=[]);l[r][t].push(i)},c=rt(c),h=c.next();!h.done;h=c.next())r("events",h.value.Ac());for(y=rt(y),c=y.next();!c.done;c=y.next())r("attributes",c.value);y=!1;c={};for(b in l)n.W.Db&&b!==u?ie(n,l[b]):(c.ub=es(n,l[b]),c.Pc=wl(n,c.ub),ss(c.ub,function(n){return function(){return ut(n.ub,n.Pc)}}(c)),y=!0),c={ub:c.ub,Pc:c.Pc};f&&!y?cu(n):w&&(t.info("Invoking new session subscriptions"),nt(n.sd))}else cu(n),"function"==typeof s&&s(!0)}function ss(n,t){var i=n.device;i&&i.os_version instanceof Promise?i.os_version.then(function(i){n.device.os_version=i;t()}):t()}function ie(n,t){if(t.events){for(var r=[],u=rt(t.events),i=u.next();!i.done;i=u.next())i=i.value,i=new y(i.user_id,i.name,i.time,i.session_id,i.data),i.time*=1e3,r.push(i);d(n.b,r)}if(t.attributes)for(t=rt(t.attributes),r=t.next();!r.done;r=t.next())dh(n.b,r.value)}function yl(n,i){var r="HTTP error ";null!=n&&(r+=n+" ");t.error(r+i)}function pl(n,t,i,r,u){var f=hs(n,!1,!1),e;f=es(n,f);f.template={trigger_id:t.Pa,trigger_event_type:i};null!=r&&(f.template.data=r.Ac());e=wl(n,f);ss(f,function(){fs({url:""+n.Bb+"/template/",data:f,headers:e,h:function(i){os(n,f,i,e)?(n.Va=0,null==i||null==i.templated_message?n.M(t.Pa,st.yb):(i=i.templated_message,i.type!==tr.Xc?n.M(t.Pa,st.Ab):(i=ro(i.data),null==i?n.M(t.Pa,st.Ab):"function"==typeof t.zf?t.zf(i):n.M(t.Pa,st.yb)))):(n.M(t.Pa,st.yb),"function"==typeof t.yf&&t.yf())},error:function(f){var s="getting user personalization for message "+t.Pa,h,o,e;(new Date).valueOf()-t.Ec>t.Oa?n.M(t.Pa,st.yb):(h=Math.min(t.Oa,n.Bg),o=n.Cg,null==u&&(u=o),e=Math.min(h,al(o,3*u)),s+=". Retrying in "+e+"ms",setTimeout(function(){pl(n,t,i,r,e)},e));yl(f,s)}})})}function hs(n,t,i,r){var u={};return t&&(u.feed=!0),i&&(u.triggers=!0),(t=null!=r?r:n.f.o())&&(u.user_id=t),u.config={config_time:kt(n.J).Nb},{respond_with:u}}function wl(n,t){var r=[["X-Braze-Api-Key",n.$]],u=!1;return null!=t.respond_with&&t.respond_with.triggers&&(r.push(["X-Braze-TriggersRequest","true"]),u=!0),null!=t.respond_with&&t.respond_with.feed&&(r.push(["X-Braze-FeedRequest","true"]),u=!0),u&&r.push(["X-Braze-DataRequest","true"]),n.W.Db&&(n=l(n.W.b,i.jb),null!=n&&r.push(["X-Braze-Auth-Signature",n])),r}function re(n){if(null==n.campaignId&&null==n.cardId&&null==n.triggerId)return t.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;var i={};return null!=n.cardId&&(i.card_ids=[n.cardId]),null!=n.campaignId&&(i.campaign_ids=[n.campaignId]),null!=n.triggerId&&(i.trigger_ids=[n.triggerId]),i}function ue(n){for(var t=null,i=0;i<n.length;i++)null!=n[i].id&&""!==n[i].id&&(t=t||{},t.ids=t.ids||[],t.ids.push(n[i].id));return t}function cu(n,t){n.Ce||(null==t&&(t=1e3*n.pc),fe(n),n.qc=setTimeout(function(){if(document.hidden){var t=function(){document.hidden||(document.removeEventListener("visibilitychange",t,!1),bi(n))};document.addEventListener("visibilitychange",t,!1)}else bi(n)},t),n.Ie=t)}function fe(n){null!=n.qc&&(clearTimeout(n.qc),n.qc=null)}function py(n,t){lt(n.sd,t)}function wy(n,i,r){tt(n.D);t.info("Requesting explicit trigger refresh.");bi(n,null,!0,null,i,r)}function ee(n,i,r,u){var f=new vt,e=tt(n.D);return ys(n.J,r)?(t.info('Custom Attribute "'+r+'" is blocklisted, ignoring.'),f):(f.j.push(new y(n.f.o(),i,(new Date).valueOf(),e,{key:r,value:u})),f.h=d(n.b,f.j),f)}function bl(n,t){var i=new vt,r=tt(n.D);return i.j.push(new y(n.f.o(),a.fg,(new Date).valueOf(),r,{n:t})),i.h=d(n.b,i.j),i}function by(n,t,i){var r=tt(n.D);return new y(n.f.o(),a.sg,t,r,{cid:i})}function kl(n){var t=wt.ba;new ct(t).setItem(t.G.Rf,1,{baseUrl:n.Bb,data:{api_key:n.$,device_id:se(n.mc).id},userId:n.f.o(),sdkAuthEnabled:n.W.Db})}function dl(n,t,i){var r=new vt,u=tt(n.D);return t={group_id:t,status:i},r.j.push(new y(n.f.o(),a.zg,(new Date).valueOf(),u,t)),r.h=d(n.b,r.j),r}function gl(n){this.id=n}function ky(n,t){this.b=n;null==t&&(t=wu(oe));this.De=t}function se(n){var r=nr(n.b,ot.Uc),o,u,f,s,e,c,h;for(null==r&&(r=new fr(ai.Ia()),er(n.b,ot.Uc,r)),r=new gl(r.ia),o=0;o<n.De.length;o++){u=n.De[o];switch(u){case"browser":r[u]=yt.Ya;break;case"browserVersion":r[u]=yt.version;break;case"os":f=yt.ga?yt.ga||null:(f=l(n.b,i.cc))&&f.os_version?f.os_version:yt.qb();r[u]=f;break;case"resolution":r[u]=screen.width+"x"+screen.height;break;case"language":r[u]=yt.language;break;case"timeZone":n:{if(f=new Date,"undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions&&(s=Intl.DateTimeFormat().resolvedOptions().timeZone,null!=s&&""!==s)){e=s;break n}}catch(a){t.info("Intl.DateTimeFormat threw an error, probably https://bugs.chromium.org/p/chromium/issues/detail?id=811403, falling back to GTM offset: "+a.message)}e=f.getTimezoneOffset();f=parseInt(e/60);c=parseInt(e%60);h="GMT";0!==e&&(h=h+(0>e?"+":"-")+(("00"+Math.abs(f)).slice(-2)+":"+("00"+Math.abs(c)).slice(-2)));e=h}r[u]=e;break;case"userAgent":r[u]=yt.userAgent}}return r}function he(n){this.Fa=n;this.wc=null;this.Re="geolocation"in navigator}function cs(n){n.Re?null!=n.wc&&(navigator.geolocation.clearWatch(n.wc),n.wc=null,t.info("Stopped watching Geolocation")):t.info(n.ed)}function ls(n,t,i,r,u){this.endpoint=n||null;this.Ze=t||null;this.publicKey=i||null;this.Wh=r||null;this.ra=u||null}function na(n,t,i,r,u,f,e,o,s,h){this.Fa=n;this.$=t;this.mc=i;this.Jg=r;this.Pe=u||"/service-worker.js";this.Ne=f;this.J=e;this.rd=o||!1;this.Hg=s||!1;this.b=h;this.vc="serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window;this.vd="safari"in window&&"pushNotification"in window.safari}function lu(n,i,r,u,f,e){i.unsubscribe().then(function(i){i?ia(n,r,u,f,e):(t.error("Failed to unsubscribe device from push."),"function"==typeof e&&e(!1))}).catch(function(n){t.error("Push unsubscription error: "+n);"function"==typeof e&&e(!1)})}function as(n,t,i,r){var u=function(n){if("string"==typeof n)return n;if(0!==n.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return n.endpoint;var t=n.endpoint;return n.subscriptionId&&-1===n.endpoint.indexOf(n.subscriptionId)&&(t=n.endpoint+"/"+n.subscriptionId),t}(t),f=null,e=null;if(null!=t.getKey)try{f=btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("p256dh"))));e=btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("auth"))))}catch(o){if("invalid arguments"!==o.message)throw o;}t=function(n){var t;return n.options&&(t=n.options.applicationServerKey)&&t.byteLength&&0<t.byteLength?btoa(String.fromCharCode.apply(null,new Uint8Array(t))).replace(/\+/g,"-").replace(/\//g,"_"):null}(t);n.Fa.Pd(u,r,f,e,t);u&&"function"==typeof i&&i(u,f,e)}function vs(n,i,r){n.Fa.Sb(!1);t.info(i);"function"==typeof r&&r(!1)}function ta(n,i,r,u,f){if("default"===r.permission)try{window.safari.pushNotification.requestPermission(n.Jg,i,{api_key:n.$,device_id:se(n.mc).id},function(t){"granted"===t.permission&&n.Fa.Ud("opted_in");ta(n,i,t,u,f)})}catch(e){vs(n,"Could not request permission for push: "+e,f)}else"denied"===r.permission?vs(n,"The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",f):"granted"===r.permission&&(t.info("Device successfully subscribed to push."),as(n,r.deviceToken,u,new Date))}function dy(n,i,r){function u(u){switch(u){case"granted":"function"==typeof n&&n();break;case"default":"function"==typeof i&&i();break;case"denied":"function"==typeof r&&r();break;default:t.error("Received unexpected permission result "+u)}}var f=!1,e=window.Notification.requestPermission(function(n){f&&u(n)});e?e.then(function(n){u(n)}):f=!0}function ia(n,i,r,u,f){var e={userVisibleOnly:!0};null!=r&&(e.applicationServerKey=r);i.pushManager.subscribe(e).then(function(i){t.info("Device successfully subscribed to push.");as(n,i,u,new Date)}).catch(function(i){n.Ka()?(t.info("Permission for push notifications was denied."),"function"==typeof f&&f(!1)):t.error("Push subscription failed: "+i)})}function ra(n){return n.rd?navigator.serviceWorker.getRegistration():navigator.serviceWorker.register(n.Pe).then(function(){return navigator.serviceWorker.ready.then(function(n){return n&&"function"==typeof n.update&&n.update().catch(function(n){t.info("ServiceWorker update failed: "+n)}),n})})}function ce(n,t,i,r,u,f,e){this.Nb=n||0;this.cf=t||[];this.Ve=i||[];this.mf=r||[];this.Ld=u;(null==u||""===u)&&(this.Ld=null);this.ra=f||null;this.Hb=e||{}}function gy(n){this.b=n;this.xd=new bt;this.Ae=new bt;this.uc=null}function kt(n){var t,r;return null==n.uc&&(t=l(n.b,i.te),null!=t?(r=t.l,"3.5.0"!==t.s&&(r=0),t=new ce(r,t.e,t.a,t.p,t.m,t.v,t.c)):t=new ce,n.uc=t),n.uc}function np(n,t){t=lt(n.xd,t);n.Be&&n.xd.N(n.Be);n.Be=t}function tp(n,t){lt(n.Ae,t)}function ys(n,t){return-1!==kt(n).Ve.indexOf(t)}function ua(n,i,r,u){this.b=n;this.f=i;this.J=r;this.Cb=1e3;u=parseFloat(u);isNaN(u)&&(u=1800);u<this.Cb/1e3&&(t.info("Specified session timeout of "+u+"s is too small, using the minimum session timeout of "+this.Cb/1e3+"s instead."),u=this.Cb/1e3);this.Lg=u}function fa(n,t,i){return new y(n.f.o(),a.yg,t,i.ia,{d:tu(t-i.Ib)})}function ip(n){var u=(new Date).valueOf(),t=kt(n.J).Ld,r=l(n.b,i.hc);return null!=r&&null==t?!1:((t=null==r||u-r>1e3*t)&&v(n.b,i.hc,u),t)}function tt(n){var u=(new Date).valueOf(),f=u+1e3*n.Lg,r=nr(n.b,ot.Ta),e,o;return null==r||(u-r.Ib<n.Cb?0:r.Cd<u)?(e="Generating session start event with time "+u,null!=r&&(o=r.Ob,o-r.Ib<n.Cb&&(o=r.Ib+n.ai),r=fa(n,o,r),null==r||d(n.b,[r]),e+=" (old session ended "+o+")"),e+=". Will expire "+f.valueOf(),t.info(e),f=new fr(ai.Ia(),f),e=new y(n.f.o(),a.ve,u,f.ia),null==e||d(n.b,[e]),er(n.b,ot.Ta,f),null==l(n.b,i.hc)&&v(n.b,i.hc,u),f.ia):(r.Ob=u,r.Cd=f,er(n.b,ot.Ta,r),r.ia)}function rp(n,r){var u=!1,e;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(i.jd,!0);localStorage.getItem(i.jd)&&(localStorage.removeItem(i.jd),u=!0)}catch(f){if(("QuotaExceededError"===f.name||"NS_ERROR_DOM_QUOTA_REACHED"===f.name)&&0<localStorage.length)u=!0;else throw f;}}catch(f){t.info("Local Storage not supported!")}return e=navigator.cookieEnabled||"cookie"in document&&(0<document.cookie.length||-1<(document.cookie="test").indexOf.call(document.cookie,"test")),r=new du(n,e&&!r,u),new wh(r,u?new or(n):new fu)}function au(n,t){this.J=n;this.b=t}function g(n,t,i){return gh(n.b,n.o(),t,i)}function ps(n,t,i){this.b=n;this.Db=t||!1;this.ze=i;this.td=new bt;this.ye=1}function up(n,t){lt(n.td,t)}function br(){}function ws(n,t,i,r,u){this.ha=n;this.H=t;this.b=i;this.J=r;this.Eg=u;this.Aa=this.Da=0;this.Ga()}function fp(n,t){if(ks(n)){n.Ga();var i=n.B.slice();n.H.rb().o(function(r){for(var e=0;e<t.length;e++)if(r===t[e].userId||null==r&&null==t[e].userId){for(var f=t[e].card,u=null,o=0;o<n.B.length;o++)if(f.id===n.B[o].id){u=n.B[o];break}if(null==u)f=rf(f),null!=f&&i.push(f);else if(!oc(u,f))for(u=0;u<i.length;u++)if(f.id===i[u].id){i.splice(u,1);break}}n.B=le(n,bs(n,i,!1));n.yc();nt(n.ha,n.pb(!0))})}}function bs(n,t,r){for(var s=l(n.b,i.hb)||{},h=l(n.b,i.ib)||{},c=l(n.b,i.ua)||{},f={},e={},o={},u=0;u<t.length;u++)s[t[u].id]&&(t[u].clicked=!0,f[t[u].id]=!0),h[t[u].id]&&(t[u].viewed=!0,e[t[u].id]=!0),c[t[u].id]&&(t[u].dismissed=!0,o[t[u].id]=!0);return r&&(v(n.b,i.hb,f),v(n.b,i.ib,e),v(n.b,i.ua,o)),t}function le(n,r){for(var f,e=[],h=new Date,o=l(n.b,i.ua)||{},s=!1,u=0;u<r.length;u++)f=r[u].url,!n.Eg&&f&&co(f)?t.error('Card with url "'+f+'" will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for appboy.initialize to enable this card.'):(null==r[u].expiresAt||r[u].expiresAt>=h)&&!r[u].dismissed?e.push(r[u]):s=o[r[u].id]=!0;return s&&v(n.b,i.ua,o),e}function ks(n){return kt(n.J).Hb.enabled?!0:(0!==kt(n.J).Nb&&(nt(n.ha,new ni([],(new Date).valueOf())),b(n.b,i.wb)),!1)}function ds(n,t){this.ha=n;this.b=t;this.Ga()}function ep(n,t,i,r,u){this.Pa=n;this.zf=t;this.yf=i;this.Ec=r;this.Oa=u}function op(n,t,i,r,u){return null==n||null==n.trigger_id?null:new ep(n.trigger_id,t,i,r,u)}function kr(n,t,i,r){this.Ig=n;this.ha=t;this.b=i;this.H=r;this.oc=[];this.na=[];this.Ba=null;this.L={};this.Y={};ea(this);sp(this)}function ir(n){var t,r;for(n.Ba=l(n.b,i.ad)||n.Ba,n.L=l(n.b,i.zb)||n.L,n.Y=l(n.b,i.fc)||n.Y,t=0;t<n.T.length;t++)r=n.T[t],null!=n.Y[r.id]&&(r.Ca=n.Y[r.id])}function ea(n){n.wd=l(n.b,i.md)||0;for(var r=l(n.b,i.kd)||[],u=[],t=0;t<r.length;t++)u.push(yy(r[t]));n.T=u;ir(n)}function sp(n){function b(t,i,r,u,f){return function(){vu(n,t,i,r,u,f)}}for(var f,r,t,c,l,a,y,e,p,o={},u=0;u<n.T.length;u++)o[n.T[u].id]=n.T[u];for(u=!1,f=0;f<n.T.length;f++)if(r=n.T[f],null!=n.L[r.id]){for(var w=n.L[r.id],s=[],h=0;h<w.length;h++)if(t=w[h],c=Math.max(t.Ec+1e3*r.ab-(new Date).valueOf(),0),0<c){if(s.push(t),l=void 0,a=void 0,null!=t.wf&&(l=t.wf),null!=t.yd&&sh(t.yd)&&(a=hh(t.yd)),y=[],ft(t.Dd))for(e=0;e<t.Dd.length;e++)p=o[t.Dd[e]],null!=p&&y.push(p);n.na.push(setTimeout(b(r,t.Ec,l,a,y),c))}n.L[r.id].length>s.length&&(n.L[r.id]=s,u=!0,0===n.L[r.id].length&&delete n.L[r.id])}u&&v(n.b,i.zb,n.L)}function vu(n,r,u,f,e,o){function h(){var i,r;ir(n);i=o.pop();null!=i&&((sa(n,i,u,f,e,o),ll(i,u))?(r="Server aborted in-app message display, but the timeout on fallback trigger "+i.id+"has already elapsed.",0<o.length&&(r+=" Continuing to fall back."),t.info(r),n.H.M(i.id,st.ie),h()):(t.info("Server aborted in-app message display. Falling back to lower priority "+i.type+" trigger action "+i.id),r=1e3*i.ab-((new Date).valueOf()-u),0<r?n.na.push(setTimeout(function(){vu(n,i,u,f,e,o)},r)):vu(n,i,u,f,e,o)))}function c(e){ir(n);var o=(new Date).valueOf();ll(r,u)?r.type===tr.we?n.H.M(r.id,st.yb):n.H.M(r.id,st.ie):!1===navigator.onLine&&r.type===tr.Xc&&e.imageUrl?(t.info("Not showing "+r.type+" trigger action "+r.id+" due to offline state."),n.H.M(r.id,st.Vf)):(null==r.Ca||r.Rb!==te&&o-r.Ca>=1e3*r.Rb)&&oa(n,r,o,f)?(nt(n.ha,[e]),ir(n),r.Ca=o,n.Ba=o,v(n.b,i.ad,o),n.Y[r.id]=o,v(n.b,i.fc,n.Y)):t.info("Not displaying trigger "+r.id+" because display time fell outside of the acceptable time window.")}switch(r.type){case tr.Xc:var s=ro(r.data);if(null==s){t.error("Could not parse trigger data for trigger "+r.id+", ignoring.");n.H.M(r.id,st.Ab);break}c(s);break;case tr.we:if(s=op(r.data,c,h,u,r.Oa),null==s){t.error("Could not parse trigger data for trigger "+r.id+", ignoring.");n.H.M(r.id,st.Ab);break}pl(n.H,s,f,e);break;default:t.error("Trigger "+r.id+" was of unexpected type "+r.type+", ignoring.");n.H.M(r.id,st.Ab)}}function oa(n,i,r,u){return null==n.Ba?!0:u===it.V?(t.info("Ignoring minimum interval between trigger because it is a test type."),!0):(i=i.kf,null==i&&(i=n.Ig),r-n.Ba>=1e3*i)}function sa(n,t,r,u,f,e){var o,s;for(ir(n),n.L[t.id]=n.L[t.id]||[],o={},o.Ec=r,o.wf=u,null!=f&&(s=f.A()),o.yd=s,r=[],u=0;u<e.length;u++)r.push(e[u].id);o.Dd=r;n.L[t.id].push(o);v(n.b,i.zb,n.L)}var gr={},r,aa="function"==typeof Object.create?Object.create:function(n){function t(){}return t.prototype=n,new t},va="function"==typeof Object.defineProperties?Object.defineProperty:function(n,t,i){return n==Array.prototype||n==Object.prototype?n:(n[t]=i.value,n)},nu=ya(this),ae,ve,rh,ye,pe,uh,ai,et,ph,yt,ot,i,at,so,ho,hu,lo,it,te,tr,oe,gs,dr,nh,th,yu,oi,li;if("function"==typeof Object.setPrototypeOf)ae=Object.setPrototypeOf;else{n:{rh={Og:!0};ye={};try{ye.__proto__=rh;ve=ye.Og;break n}catch(hp){}ve=!1}ae=ve?function(n,t){if(n.__proto__=t,n.__proto__!==t)throw new TypeError(n+" is not extensible");return n}:null}pe=ae;ih("String.prototype.repeat",function(n){return n?n:function(n){var t,i;if(null==this)throw new TypeError("The 'this' value for String.prototype.repeat must not be null or undefined");if(t=this+"",0>n||1342177279<n)throw new RangeError("Invalid count value");for(n|=0,i="";n;)(n&1&&(i+=t),n>>>=1)&&(t+=t);return i}});ih("Promise",function(n){function t(n){this.Ub=0;this.Rd=void 0;this.sb=[];var t=this.Ad();try{n(t.resolve,t.reject)}catch(i){t.reject(i)}}function i(){this.Ha=null}function r(n){return n instanceof t?n:new t(function(t){t(n)})}var f,u;return n?n:(i.prototype.Te=function(n){if(null==this.Ha){this.Ha=[];var t=this;this.Ue(function(){t.eh()})}this.Ha.push(n)},f=nu.setTimeout,i.prototype.Ue=function(n){f(n,0)},i.prototype.eh=function(){for(var t,n,i;this.Ha&&this.Ha.length;)for(t=this.Ha,this.Ha=[],n=0;n<t.length;++n){i=t[n];t[n]=null;try{i()}catch(r){this.Sg(r)}}this.Ha=null},i.prototype.Sg=function(n){this.Ue(function(){throw n;})},t.prototype.Ad=function(){function n(n){return function(r){t||(t=!0,n.call(i,r))}}var i=this,t=!1;return{resolve:n(this.uh),reject:n(this.Qd)}},t.prototype.uh=function(n){if(n===this)this.Qd(new TypeError("A Promise cannot resolve to itself"));else if(n instanceof t)this.Kh(n);else{n:switch(typeof n){case"object":var i=null!=n;break n;case"function":i=!0;break n;default:i=!1}i?this.sh(n):this.ef(n)}},t.prototype.sh=function(n){var t=void 0;try{t=n.then}catch(i){this.Qd(i);return}"function"==typeof t?this.Lh(t,n):this.ef(n)},t.prototype.Qd=function(n){this.qf(2,n)},t.prototype.ef=function(n){this.qf(1,n)},t.prototype.qf=function(n,t){if(0!=this.Ub)throw Error("Cannot settle("+n+", "+t+"): Promise already settled in state"+this.Ub);this.Ub=n;this.Rd=t;this.fh()},t.prototype.fh=function(){if(null!=this.sb){for(var n=0;n<this.sb.length;++n)u.Te(this.sb[n]);this.sb=null}},u=new i,t.prototype.Kh=function(n){var t=this.Ad();n.Cc(t.resolve,t.reject)},t.prototype.Lh=function(n,t){var i=this.Ad();try{n.call(t,i.resolve,i.reject)}catch(r){i.reject(r)}},t.prototype.then=function(n,i){function f(n,t){return"function"==typeof n?function(t){try{r(n(t))}catch(i){u(i)}}:t}var r,u,e=new t(function(n,t){r=n;u=t});return this.Cc(f(n,r),f(i,u)),e},t.prototype.catch=function(n){return this.then(void 0,n)},t.prototype.Cc=function(n,t){function r(){switch(i.Ub){case 1:n(i.Rd);break;case 2:t(i.Rd);break;default:throw Error("Unexpected state: "+i.Ub);}}var i=this;null==this.sb?u.Te(r):this.sb.push(r)},t.resolve=r,t.reject=function(n){return new t(function(t,i){i(n)})},t.race=function(n){return new t(function(t,i){for(var f=rt(n),u=f.next();!u.done;u=f.next())r(u.value).Cc(t,i)})},t.all=function(n){var u=rt(n),i=u.next();return i.done?r([]):new t(function(n,t){function o(t){return function(i){f[t]=i;e--;0==e&&n(f)}}var f=[],e=0;do f.push(void 0),e++,r(i.value).Cc(o(f.length-1),t),i=u.next();while(!i.done)})},t)});uh={Vh:function(n){var i="=".repeat((4-n.length%4)%4),t;for(n=(n+i).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(n),i=new Uint8Array(n.length),t=0;t<n.length;++t)i[t]=n.charCodeAt(t);return i}};ai={Ia:function(){function n(n){var t=(Math.random().toString(16)+"000000000").substr(2,8);return n?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return n()+n(!0)+n(!0)+n()}};ct.prototype.setItem=function(n,t,i,r,u){if(!rr(this))return"function"==typeof u&&u(),!1;var f=this;return ur(this,function(e){e.objectStoreNames.contains(n)?(e=e.transaction([n],"readwrite").objectStore(n).put(i,t),e.onerror=function(){f.F.error("Could not store object "+t+" in "+n+" on indexedDB "+f.C.P);"function"==typeof u&&u()},e.onsuccess=function(){"function"==typeof r&&r()}):(f.F.error("Could not store object "+t+" in "+n+" on indexedDB "+f.C.P+" - "+n+" is not a valid objectStore"),"function"==typeof u&&u())},u)};ct.prototype.getItem=function(n,t,i){if(!rr(this))return!1;var r=this;return ur(this,function(u){u.objectStoreNames.contains(n)?(u=u.transaction([n],"readonly").objectStore(n).get(t),u.onerror=function(){r.F.error("Could not retrieve object "+t+" in "+n+" on indexedDB "+r.C.P)},u.onsuccess=function(n){n=n.target.result;null!=n&&i(n)}):r.F.error("Could not retrieve object "+t+" in "+n+" on indexedDB "+r.C.P+" - "+n+" is not a valid objectStore")})};ct.prototype.clearData=function(){var n,i,t;if(!rr(this))return!1;n=[];for(i in this.C.G)this.C.G.hasOwnProperty(i)&&this.C.G[i]!==this.C.G.xb&&n.push(this.C.G[i]);return t=this,ur(this,function(i){i=i.transaction(n,"readwrite");for(var r=0;r<n.length;r++)i.objectStore(n[r]).clear().onerror=function(){t.F.error("Could not clear "+this.source.name+" on indexedDB "+t.C.P)};i.onerror=function(){t.F.error("Could not clear object stores on indexedDB "+t.C.P)}})};var k={Gd:function(n){(void 0!==n||void 0===k.Ea)&&(k.Ea=!!n);k.He||(k.He=!0)},Jb:function(){k.He=!1;k.Ea=void 0;k.F=void 0},Td:function(n){"function"!=typeof n?k.info("Ignoring setLogger call since logger is not a function"):(k.Gd(),k.F=n)},Yd:function(){k.Gd();k.Ea?(console.log("Disabling Appboy logging"),k.Ea=!1):(console.log("Enabled Appboy logging"),k.Ea=!0)},info:function(n){k.Ea&&(n="Appboy: "+n,null!=k.F?k.F(n):console.log(n))},warn:function(n){k.Ea&&(n="Appboy SDK Warning: "+n+" (v3.5.0)",null!=k.F?k.F(n):console.warn(n))},error:function(n){k.Ea&&(n="Appboy SDK Error: "+n+" (v3.5.0)",null!=k.F?k.F(n):console.error(n))}},a={CustomEvent:"ce",eg:"p",sg:"pc",$h:"ca",fg:"i",Yc:"ie",Jf:"cci",Lf:"ccic",Hf:"ccc",If:"ccd",ve:"ss",yg:"se",dg:"si",ke:"sc",je:"sbc",cg:"sfe",Mf:"iec",lg:"lr",Df:"uae",Gf:"ci",Ff:"cc",jg:"lcaa",kg:"lcar",Of:"inc",Nf:"add",Pf:"rem",Qf:"set",zg:"sgu"},oh={$f:"feed_displayed",Kf:"content_cards_displayed"},wt={ba:{P:"AppboyServiceWorkerAsyncStorage",VERSION:6,G:{Rf:"data",oe:"pushClicks",gd:"pushSubscribed",Yh:"fallbackDevice",Ef:"cardUpdates",xb:"optOut",me:"pendingData",qe:"sdkAuthenticationSignature"},kb:1}},t=k,c={Af:"allowCrawlerActivity",Rc:"baseUrl",ng:"noCookies",ee:"devicePropertyAllowlist",Vc:"devicePropertyWhitelist",Wf:"disablePushTokenMaintenance",Yf:"enableLogging",Zf:"enableSdkAuthentication",mg:"manageServiceWorkerExternally",ag:"minimumIntervalBetweenTriggerActionsInSeconds",xg:"sessionTimeoutInSeconds",Cf:"appVersion",wg:"serviceWorkerLocation",ug:"safariWebsitePushId",cd:"localization",be:"contentSecurityNonce",fe:"enableHtmlInAppMessages",Zd:"allowUserSuppliedJavascript",bg:"inAppMessageZIndex",pg:"openInAppMessagesInNewTab",qg:"openNewsFeedCardsInNewTab",tg:"requireExplicitInAppMessageDismissal",Xf:"doNotLoadFontAwesome",re:"sdkFlavor",$c:"language",og:"openCardsInNewTab"};y.prototype.Ac=function(){var n={name:this.type,time:tu(this.time),data:this.data||{},session_id:this.sessionId};return null!=this.gb&&(n.user_id=this.gb),n};y.prototype.A=function(){return{u:this.gb,t:this.type,ts:this.time,s:this.sessionId,d:this.data}};fr.prototype.A=function(){return{g:this.ia,e:this.Cd,c:this.Ib,l:this.Ob}};var wa=/^[^\x00-\x1F\x22]+$/,ba=new RegExp(/^.+@.+\..+$/),ka=51200,da="50KB",f={};r=w.prototype;r.o=function(n){null==n&&t.error("getUserId must be supplied with a callback. e.g., appboy.getUser().getUserId(function(userId) {console.log('the user id is ' + userId)})");"function"==typeof n&&n(this.f.o())};r.Pg=function(n,i){if(!dt(n,"add alias","the alias",!1)||0>=n.length)return t.error("addAlias requires a non-empty alias"),!1;if(!dt(i,"add alias","the label",!1)||0>=i.length)return t.error("addAlias requires a non-empty label"),!1;var u=this.H,r=new vt,f=tt(u.D),e=a.Df;return r.j.push(new y(u.f.o(),e,(new Date).valueOf(),f,{a:n,l:i})),r.h=d(u.b,r.j),r.h};r.Eh=function(n){return dt(n,"set first name","the firstName",!0)?g(this.f,"first_name",n):!1};r.Ih=function(n){return dt(n,"set last name","the lastName",!0)?g(this.f,"last_name",n):!1};r.Ch=function(n){return null===n||"string"==typeof n&&null!=n.toLowerCase().match(ba)?g(this.f,"email",n):(t.error('Cannot set email address - "'+n+'" did not pass RFC-5322 validation.'),!1)};r.Fh=function(n){return"string"==typeof n&&(n=n.toLowerCase()),null===n||ti(ah,n,'Gender "'+n+'" is not a valid gender.',"User.Genders")?g(this.f,"gender",n):!1};r.Bh=function(n,i,r){return null===n&&null===i&&null===r?g(this.f,"dob",null):(n=parseInt(n),i=parseInt(i),r=parseInt(r),isNaN(n)||isNaN(i)||isNaN(r)||12<i||1>i||31<r||1>r?(t.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):g(this.f,"dob",""+n+"-"+i+"-"+r))};r.yh=function(n){return dt(n,"set country","the country",!0)?g(this.f,"country",n):!1};r.Gh=function(n){return dt(n,"set home city","the homeCity",!0)?g(this.f,"home_city",n):!1};r.Hh=function(n){return dt(n,"set language","the language",!0)?g(this.f,"language",n):!1};r.Dh=function(n){return ti(de,n,'Email notification setting "'+n+'" is not a valid subscription type.',"User.NotificationSubscriptionTypes")?g(this.f,"email_subscribe",n):!1};r.Ud=function(n){return ti(de,n,'Push notification setting "'+n+'" is not a valid subscription type.',"User.NotificationSubscriptionTypes")?g(this.f,"push_subscribe",n):!1};r.Jh=function(n){return dt(n,"set phone number","the phoneNumber",!0)?null===n||n.match(ga)?g(this.f,"phone",n):(t.error('Cannot set phone number - "'+n+'" did not pass validation.'),!1):!1};r.xh=function(n){return g(this.f,"image_url",n)};r.Oc=function(n,i,r,u,f){return null==n||null==i?(t.error("Cannot set last-known location - latitude and longitude are required."),!1):(n=parseFloat(n),i=parseFloat(i),null!=r&&(r=parseFloat(r)),null!=u&&(u=parseFloat(u)),null!=f&&(f=parseFloat(f)),isNaN(n)||isNaN(i)||null!=r&&isNaN(r)||null!=u&&isNaN(u)||null!=f&&isNaN(f)?(t.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):90<n||-90>n||180<i||-180>i?(t.error("Cannot set last-known location - latitude and longitude are bounded by 90 and 180 respectively."),!1):null!=r&&0>r||null!=f&&0>f?(t.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.H.Oc(this.f.o(),n,i,u,r,f).h)};r.Sd=function(n,t){if(!gt(n,"set custom user attribute","the given key"))return!1;var i=typeof t,r=ii(t),u=ft(t);if("number"!==i&&"boolean"!==i&&!r&&!u&&null!==t&&!gt(t,'set custom user attribute "'+n+'"',"the given value"))return!1;if(r&&(t=bu(t)),u){for(i=0;i<t.length;i++)if(!gt(t[i],'set custom user attribute "'+n+'"',"the element in the given array"))return!1;return ee(this.H,a.Qf,n,t).h}return this.f.Sd(n,t)};r.Qg=function(n,t){return!gt(n,"add to custom user attribute array","the given key")||null!=t&&!gt(t,"add to custom user attribute array","the given value")?!1:ee(this.H,a.Nf,n,t).h};r.qh=function(n,t){return!gt(n,"remove from custom user attribute array","the given key")||null!=t&&!gt(t,"remove from custom user attribute array","the given value")?!1:ee(this.H,a.Pf,n,t).h};r.kh=function(n,i){if(!gt(n,"increment custom user attribute","the given key"))return!1;null==i&&(i=1);var r=parseInt(i);return isNaN(r)||r!==parseFloat(i)?(t.error('Cannot increment custom user attribute because the given incrementValue "'+i+'" is not an integer.'),!1):ee(this.H,a.Of,n,r).h};r.Pd=function(n,t,i,r,u){this.f.Pd(n,t,i,r,u);kl(this.H)};r.Sb=function(n){this.f.Sb(n)};r.Ah=function(n,i,r){var u,f,o,e;return gt(n,"set custom location attribute","the given key")?(null!==i||null!==r)&&(i=parseFloat(i),r=parseFloat(r),isNaN(i)||90<i||-90>i||isNaN(r)||180<r||-180>r)?(t.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by 90 and 180 respectively, or must both be null for removal."),!1):(u=this.H,f=r,r=new vt,ys(u.J,n)?(t.info('Custom Attribute "'+n+'" is blocklisted, ignoring.'),r.h=!1):(o=tt(u.D),null===i&&null===f?(e=a.kg,n={key:n}):(e=a.jg,n={key:n,latitude:i,longitude:f}),r.j.push(new y(u.f.o(),e,(new Date).valueOf(),o,n)),r.h=d(u.b,r.j)),r.h):!1};r.Rg=function(n){return!dt(n,"add user to subscription group","subscription group ID",!1)||0>=n.length?(t.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):dl(this.H,n,nv).h};r.rh=function(n){return!dt(n,"remove user from subscription group","subscription group ID",!1)||0>=n.length?(t.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):dl(this.H,n,tv).h};var ga=/^[0-9 .\\(\\)\\+\\-]+$/,ah={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},de={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},nv="subscribed",tv="unsubscribed";f.User=w;f.User.Genders=ah;f.User.NotificationSubscriptionTypes=de;f.User.prototype.getUserId=w.prototype.o;f.User.prototype.setFirstName=w.prototype.Eh;f.User.prototype.setLastName=w.prototype.Ih;f.User.prototype.setEmail=w.prototype.Ch;f.User.prototype.setGender=w.prototype.Fh;f.User.prototype.setDateOfBirth=w.prototype.Bh;f.User.prototype.setCountry=w.prototype.yh;f.User.prototype.setHomeCity=w.prototype.Gh;f.User.prototype.setLanguage=w.prototype.Hh;f.User.prototype.setEmailNotificationSubscriptionType=w.prototype.Dh;f.User.prototype.setPushNotificationSubscriptionType=w.prototype.Ud;f.User.prototype.setPhoneNumber=w.prototype.Jh;f.User.prototype.setAvatarImageUrl=w.prototype.xh;f.User.prototype.setLastKnownLocation=w.prototype.Oc;f.User.prototype.setCustomUserAttribute=w.prototype.Sd;f.User.prototype.addToCustomAttributeArray=w.prototype.Qg;f.User.prototype.removeFromCustomAttributeArray=w.prototype.qh;f.User.prototype.incrementCustomUserAttribute=w.prototype.kh;f.User.prototype.addAlias=w.prototype.Pg;f.User.prototype.setCustomLocationAttribute=w.prototype.Ah;f.User.prototype.addToSubscriptionGroup=w.prototype.Rg;f.User.prototype.removeFromSubscriptionGroup=w.prototype.rh;iu.prototype.Ed=function(){};iu.prototype.Fd=function(){};iu.prototype.qb=function(){};et={ae:"Chrome",Wc:"Edge",dc:"Internet Explorer",le:"Opera",hd:"Safari",Zh:"Firefox"};pt(ru,iu);ru.prototype.Ed=function(){return this.Ya};ru.prototype.Fd=function(){return this.version};ru.prototype.qb=function(n){var t=this;return this.ga?Promise.resolve(this.ga):(this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()).then(function(i){var r,u;for(i=i.platform,r=0;r<n.length;r++)if(u=vh(i,n[r]),u)return t.ga=u,t.ga;return i}).catch(function(){return navigator.platform})};pt(uu,iu);uu.prototype.Ed=function(){return this.We[0]||"Unknown Browser"};uu.prototype.Fd=function(){return this.We[1]||"Unknown Version"};uu.prototype.qb=function(n){for(var i,t=0;t<n.length;t++)if(i=vh(n[t].U,n[t]),i)return"Mac"===i&&1<navigator.maxTouchPoints&&(i="iOS"),Promise.resolve(i);return Promise.resolve(navigator.platform)};yh.prototype.qb=function(){var n=this;return this.ga?Promise.resolve(this.ga):this.Md.qb(ph).then(function(t){return n.ga=t})};ph=[{U:navigator.platform,O:"Win",S:"Windows"},{U:navigator.platform,O:"Mac",S:"Mac"},{U:navigator.platform,O:"BlackBerry",S:"BlackBerry"},{U:navigator.platform,O:"FreeBSD",S:"FreeBSD"},{U:navigator.platform,O:"OpenBSD",S:"OpenBSD"},{U:navigator.platform,O:"Nintendo",S:"Nintendo"},{U:navigator.platform,O:"SunOS",S:"SunOS"},{U:navigator.platform,O:"PlayStation",S:"PlayStation"},{U:navigator.platform,O:"X11",S:"X11"},{U:navigator.userAgent,O:["iPhone","iPad","iPod"],S:"iOS"},{U:navigator.platform,O:"Pike v",S:"iOS"},{U:navigator.userAgent,O:["Web0S"],S:"WebOS"},{U:navigator.platform,O:["Linux armv7l","Android"],S:"Android"},{U:navigator.userAgent,O:["Android"],S:"Android"},{U:navigator.platform,O:"Linux",S:"Linux"}];yt=new yh;wh.prototype.clearData=function(){for(var n=ki(ot),r=ki(i),t=0;t<n.length;t++)this.rc.remove(ot[n[t]]);for(n=0;n<r.length;n++)this.R.remove(i[r[n]])};ot={lc:"ab.storage.userId",Uc:"ab.storage.deviceId",Ta:"ab.storage.sessionId"};i={jd:"ab.test",Wb:"ab.storage.events",Qa:"ab.storage.attributes",Qc:"ab.storage.attributes.anonymous_user",cc:"ab.storage.device",se:"ab.storage.sdk_metadata",ue:"ab.storage.session_id_for_cached_metadata",kc:"ab.storage.pushToken",dd:"ab.storage.newsFeed",bd:"ab.storage.lastNewsFeedRefresh",vb:"ab.storage.cardImpressions",te:"ab.storage.serverConfig",kd:"ab.storage.triggers",md:"ab.storage.triggers.ts",hg:"ab.storage.lastTriggeredTime",gg:"ab.storage.lastTriggeredTimesById",ig:"ab.storage.lastTriggerEventDataById",hc:"ab.storage.messagingSessionStart",wb:"ab.storage.cc",ac:"ab.storage.ccLastFullSync",$b:"ab.storage.ccLastCardUpdated",hb:"ab.storage.ccClicks",ib:"ab.storage.ccImpressions",ua:"ab.storage.ccDismissals",fc:"ab.storage.lastDisplayedTriggerTimesById",ad:"ab.storage.lastDisplayedTriggerTime",zb:"ab.storage.triggerFireInstancesById",jb:"ab.storage.signature"};or.prototype.Xa=function(n){return n+"."+this.$};or.prototype.store=function(n,i){i={v:i};try{return localStorage.setItem(this.Xa(n),JSON.stringify(i)),!0}catch(r){return t.info("Storage failure: "+r.message),!1}};or.prototype.Z=function(n){try{var i=JSON.parse(localStorage.getItem(this.Xa(n)));return null==i?null:i.v}catch(r){return t.info("Storage retrieval failure: "+r.message),null}};or.prototype.remove=function(n){try{localStorage.removeItem(this.Xa(n))}catch(i){return t.info("Storage removal failure: "+i.message),!1}};ui.prototype.Xa=function(n){return null!=this.$?n+"."+this.$:n};ui.prototype.store=function(n,i){for(var r,s,e,u=wu(ot),f=document.cookie.split(";"),o=0;o<f.length;o++){for(r=f[o];" "===r.charAt(0);)r=r.substring(1);for(s=!1,e=0;e<u.length;e++)if(0===r.indexOf(u[e])){s=!0;break}s&&(r=r.split("=")[0],-1===r.indexOf("."+this.$)&&nc(this,r))}return(u=new Date,u.setTime(u.getTime()+6e4*this.Ee),u="expires="+u.toUTCString(),f="domain="+this.Me,i=this.Qe?i:encodeURIComponent(JSON.stringify(i)),n=this.Xa(n)+"="+i+";"+u+";"+f+";path=/",4093<=n.length)?(t.info("Storage failure: string is "+n.length+" chars which is too large to store as a cookie."),!1):(document.cookie=n,!0)};ui.prototype.Z=function(n){for(var i,e,r=[],u=this.Xa(n)+"=",o=document.cookie.split(";"),f=0;f<o.length;f++){for(i=o[f];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(u))try{e=void 0;e=this.Qe?i.substring(u.length,i.length):JSON.parse(decodeURIComponent(i.substring(u.length,i.length)));r.push(e)}catch(s){return t.info("Storage retrieval failure: "+s.message),this.remove(n),null}}return 0<r.length?r[r.length-1]:null};ui.prototype.remove=function(n){nc(this,this.Xa(n))};fu.prototype.store=function(n,i){var o={value:i},u=[],f,r,e;for(i=[i],f=0;i.length;)if(r=i.pop(),"boolean"==typeof r)f+=4;else if("string"==typeof r)f+=2*r.length;else if("number"==typeof r)f+=8;else if("object"==typeof r&&-1===u.indexOf(r)){u.push(r);for(e in r)i.push(r[e])}return(u=f,u>this.Ke)?(t.info("Storage failure: object is "+u+" bytes which is greater than the max of "+this.Ke),!1):(this.ud[n]=o,!0)};fu.prototype.Z=function(n){return n=this.ud[n],null==n?null:n.value};fu.prototype.remove=function(n){this.ud[n]=null};du.prototype.store=function(n,t){for(var i=!0,r=0;r<this.ma.length;r++)i=this.ma[r].store(n,t)&&i;return i};du.prototype.Z=function(n){for(var i,t=0;t<this.ma.length;t++)if(i=this.ma[t].Z(n),null!=i)return i;return null};du.prototype.remove=function(n){for(var t=0;t<this.ma.length;t++)this.ma[t].remove(n)};bt.prototype.N=function(n){delete this.Fb[n]};bt.prototype.K=function(){this.Fb={}};var gu=null,uc="up",fc="down",to="left",io="right";at={nh:function(){return 600>=screen.width},hh:function(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?at.Sa.Zc:at.Sa.jc;if("screen"in window){var n=window.screen.orientation||screen.ci||screen.ei;if(null!=n&&"object"==typeof n&&(n=n.type),"landscape-primary"===n||"landscape-secondary"===n)return at.Sa.Zc}return at.Sa.jc},oh:function(n,t,i){i||null!=t&&t.metaKey?window.open(n):window.location=n},Sa:{jc:0,Zc:1}};f.WindowUtils=at;f.WindowUtils.openUri=at.oh;r=ut.prototype;r.Vb=function(n){return lt(nf(this),n)};r.Wd=function(n){return lt(tf(this),n)};r.N=function(n){nf(this).N(n);tf(this).N(n)};r.K=function(){nf(this).K();tf(this).K()};r.Od=function(){this.viewed=!0};r.fb=function(){this.clicked=this.viewed=!0;nt(nf(this))};r.Nd=function(){return this.dismissible&&!this.dismissed?(this.dismissed=!0,nt(tf(this)),!0):!1};r.aa=function(n,t,i){function h(t){return hc(f),o&&(n(c),at.openUri(c.url,t,i)),!1}var c=this,f=document.createElement("div"),o,u,r,s,e;return f.className="ab-card ab-effect-card "+this.Dc,f.setAttribute("data-ab-card-id",this.id),f.setAttribute("role","article"),f.setAttribute("tabindex","0"),o=this.url&&""!==this.url,this.pinned&&(u=document.createElement("div"),u.className="ab-pinned-indicator",r=document.createElement("i"),r.className="fa fa-star",u.appendChild(r),f.appendChild(u)),this.imageUrl&&""!==this.imageUrl&&(u=document.createElement("div"),u.className="ab-image-area",r=document.createElement("img"),r.setAttribute("src",this.imageUrl),this.xc(r),u.appendChild(r),f.className+=" with-image",o&&!this.Gc?(r=document.createElement("a"),r.setAttribute("href",this.url),r.onclick=h,r.appendChild(u),f.appendChild(r)):f.appendChild(u)),u=document.createElement("div"),u.className="ab-card-body",this.dismissible&&(this.Je=t,s=ec("Dismiss Card",void 0,this.bf.bind(this)),f.appendChild(s),ou(u,to,function(n){f.className+=" ab-swiped-left";s.onclick(n)}),ou(u,io,function(n){f.className+=" ab-swiped-right";s.onclick(n)})),(t=this.title&&""!==this.title)&&(r=document.createElement("h1"),r.className="ab-title",r.id=ai.Ia(),f.setAttribute("aria-labelledby",r.id),o?(e=document.createElement("a"),e.setAttribute("href",this.url),e.onclick=h,e.appendChild(document.createTextNode(this.title)),r.appendChild(e)):r.appendChild(document.createTextNode(this.title)),u.appendChild(r)),r=document.createElement("div"),r.className=t?"ab-description":"ab-description ab-no-title",r.id=ai.Ia(),f.setAttribute("aria-describedby",r.id),r.appendChild(document.createTextNode(this.description)),o&&(t=document.createElement("div"),t.className="ab-url-area",e=document.createElement("a"),e.setAttribute("href",this.url),e.appendChild(document.createTextNode(this.linkText)),e.onclick=h,t.appendChild(e),r.appendChild(t)),u.appendChild(r),f.appendChild(u),u=document.createElement("div"),u.className="ab-unread-indicator",this.viewed&&(u.className+=" read"),f.appendChild(u),this.Gg=f};r.xc=function(n){var t="";this.title||this.description||(t="Feed Image");n.setAttribute("alt",t)};r.bf=function(){if(this.dismissible&&!this.dismissed){this.Je&&this.Je(this);var n=this.Gg;n&&(n.style.height=n.offsetHeight+"px",n.className+=" ab-hide",setTimeout(function(){n&&n.parentNode&&(n.style.height="0",n.style.margin="0",setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},fv))},il))}};var cc=-1,ht={Yb:"captioned_image",xe:"text_announcement",ic:"short_news",Xb:"banner_image",Sc:"control"},e={wa:"id",za:"v",va:"db",pe:"r",ea:"ca",la:"p",ca:"ea",ka:"e",TYPE:"tp",xa:"i",Ua:"tt",Ra:"ds",URL:"u",ya:"dm",sa:"ar",ta:"cl",V:"t"},u={wa:"id",za:"v",va:"db",bc:"cr",ea:"ca",la:"p",Zb:"t",ca:"ea",ka:"e",TYPE:"tp",xa:"i",Ua:"tt",Ra:"ds",URL:"u",ya:"dm",sa:"ar",ta:"cl",V:"s"},fv=400;f.Card=ut;f.Card.fromContentCardsJson=rf;f.Card.prototype.dismissCard=ut.prototype.bf;f.Card.prototype.subscribeToClickedEvent=ut.prototype.Vb;f.Card.prototype.subscribeToDismissedEvent=ut.prototype.Wd;f.Card.prototype.removeSubscription=ut.prototype.N;f.Card.prototype.removeAllSubscriptions=ut.prototype.K;pt(sr,ut);sr.prototype.A=function(){var n={};return n[u.TYPE]=ht.Xb,n[u.wa]=this.id,n[u.za]=this.viewed,n[u.xa]=this.imageUrl,n[u.ea]=this.updated,n[u.bc]=this.created,n[u.Zb]=this.categories,n[u.ca]=this.expiresAt,n[u.URL]=this.url,n[u.ya]=this.linkText,n[u.sa]=this.aspectRatio,n[u.ka]=this.extras,n[u.la]=this.pinned,n[u.va]=this.dismissible,n[u.ta]=this.clicked,n[u.V]=this.test,n};f.Banner=sr;pt(hr,ut);hr.prototype.A=function(){var n={};return n[u.TYPE]=ht.Yb,n[u.wa]=this.id,n[u.za]=this.viewed,n[u.Ua]=this.title,n[u.xa]=this.imageUrl,n[u.Ra]=this.description,n[u.ea]=this.updated,n[u.bc]=this.created,n[u.Zb]=this.categories,n[u.ca]=this.expiresAt,n[u.URL]=this.url,n[u.ya]=this.linkText,n[u.sa]=this.aspectRatio,n[u.ka]=this.extras,n[u.la]=this.pinned,n[u.va]=this.dismissible,n[u.ta]=this.clicked,n[u.V]=this.test,n};f.CaptionedImage=hr;pt(cr,ut);cr.prototype.A=function(){var n={};return n[u.TYPE]=ht.ic,n[u.wa]=this.id,n[u.za]=this.viewed,n[u.Ua]=this.title,n[u.xa]=this.imageUrl,n[u.Ra]=this.description,n[u.ea]=this.updated,n[u.bc]=this.created,n[u.Zb]=this.categories,n[u.ca]=this.expiresAt,n[u.URL]=this.url,n[u.ya]=this.linkText,n[u.sa]=this.aspectRatio,n[u.ka]=this.extras,n[u.la]=this.pinned,n[u.va]=this.dismissible,n[u.ta]=this.clicked,n[u.V]=this.test,n};f.ClassicCard=cr;pt(wi,ut);wi.prototype.A=function(){var n={};return n[u.TYPE]=ht.Sc,n[u.wa]=this.id,n[u.za]=this.viewed,n[u.ea]=this.updated,n[u.ca]=this.expiresAt,n[u.ka]=this.extras,n[u.la]=this.pinned,n[u.V]=this.test,n};f.ControlCard=wi;r=p.prototype;r.Ja=function(){return!0};r.xf=function(){return this.Ja()};r.Vb=function(n){return lt(this.X,n)};r.Wd=function(n){return lt(this.nc,n)};r.N=function(n){this.X.N(n);this.nc.N(n)};r.K=function(){this.X.K();this.nc.K()};r.Od=function(){return this.Ge?!1:this.Ge=!0};r.fb=function(){return this.Wa?!1:(this.Wa=!0,nt(this.X),!0)};r.Nd=function(){return this.Fe?!1:(this.Fe=!0,nt(this.nc),!0)};r.Ye=function(){vi(this,this.sc)};r.aa=function(n,t,i,r,u){function l(){-1!==f.className.indexOf("ab-start-hidden")&&(f.className=f.className.replace("ab-start-hidden",""),i(f))}var s=this,f=document.createElement("div"),h,o,e,c;return f.className="ab-in-app-message ab-start-hidden ab-background",u&&(f.style.zIndex=u+1),this.Ja()&&(f.className+=" ab-modal-interactions",f.setAttribute("tabindex","-1")),si(this)||(f.style.color=fi(this.textColor),f.style.backgroundColor=fi(this.backgroundColor),ev(this.backgroundColor)&&(f.className+=" ab-no-shadow")),this.imageStyle===pc&&(f.className+=" graphic"),this.orientation===hf&&(f.className+=" landscape"),0===this.buttons.length&&(this.clickAction!==ef&&(f.className+=" ab-clickable"),f.onclick=function(i){return vi(s,f,function(){n.Jc(s);s.clickAction===su?at.openUri(s.uri,i,r||s.openTarget===sf):s.clickAction===uo&&t()}),i.stopPropagation(),!1}),h=ec("Close Message",si(this)?void 0:fi(this.closeButtonColor),function(){vi(s,f)}),f.appendChild(h),u&&(h.style.zIndex=u+2),u=document.createElement("div"),u.className="ab-message-text",u.className+=" "+(this.messageAlignment||this.Bd).toLowerCase()+"-aligned",h=!1,o=document.createElement("div"),o.className="ab-image-area",this.imageUrl?(this.cropType===eo?(e=document.createElement("span"),e.className="ab-center-cropped-img",e.style.backgroundImage="url("+this.imageUrl+")",e.setAttribute("role","img"),e.setAttribute("aria-label","Modal Image"),this.xc(e),o.appendChild(e)):(e=document.createElement("img"),e.setAttribute("src",this.imageUrl),this.xc(e),h=!0,e.onload=l,setTimeout(l,1e3),o.appendChild(e)),f.appendChild(o),u.className+=" ab-with-image"):this.icon&&(o.className+=" ab-icon-area",e=document.createElement("span"),e.className="ab-icon",si(this)||(e.style.backgroundColor=fi(this.iconBackgroundColor),e.style.color=fi(this.iconColor)),c=document.createElement("i"),c.className="fa",c.appendChild(document.createTextNode(this.icon)),c.setAttribute("aria-hidden",!0),e.appendChild(c),o.appendChild(e),f.appendChild(o),u.className+=" ab-with-icon"),eu(u,"touchstart",function(){}),this.header&&0<this.header.length&&(o=document.createElement("h1"),o.className="ab-message-header",this.qd=ai.Ia(),o.id=this.qd,o.className+=" "+(this.headerAlignment||lr).toLowerCase()+"-aligned",si(this)||(o.style.color=fi(this.headerTextColor)),o.appendChild(document.createTextNode(this.header)),u.appendChild(o)),u.appendChild(this.Xe()),f.appendChild(u),h||l(),this.sc=f};r.Xe=function(){return document.createTextNode(this.message)};r.xc=function(n){var t="";this.message||this.header||!this.Ja()||(t="Modal Image");n.setAttribute("alt",t)};r.Kc=function(n){this.Ja()&&null!=n.parentNode&&this.orientation!==hf&&(null!=n.parentNode.classList&&n.parentNode.classList.add(cf),document.body.addEventListener("touchmove",lc,tc()?{passive:!1}:!1));n.className+=" "+kc};r.oa=function(){var n="";return this.animateIn&&(n+=" ab-animate-in"),this.animateOut&&(n+=" ab-animate-out"),n};var ei={ce:4281545523,nd:4294967295,$d:4278219733,Tf:4293914607,Uf:4283782485,vg:3224580915,Sf:4288387995},st={ge:"hd",Bf:"ias",rg:"of",Vf:"do",Ab:"umt",yb:"tf",ie:"te"},ac="BOTTOM",sv={TOP:"TOP",BOTTOM:ac},uo="NEWS_FEED",su="URI",ef="NONE",hv={NEWS_FEED:uo,URI:su,NONE:ef},fo="AUTO_DISMISS",cv={AUTO_DISMISS:fo,MANUAL:"SWIPE"},vc="NONE",sf="BLANK",lv={NONE:vc,BLANK:sf},yc="TOP",pc="GRAPHIC",av={TOP:yc,GRAPHIC:pc},hf="LANDSCAPE",vv={PORTRAIT:"PORTRAIT",LANDSCAPE:hf},lr="CENTER",yv={START:"START",CENTER:lr,END:"END"},eo="CENTER_CROP",oo="FIT_CENTER",pv={CENTER_CROP:eo,FIT_CENTER:oo},wv="SLIDEUP",bv="MODAL",kv="MODAL_STYLED",dv="FULL",wc="WEB_HTML",bc="HTML",gv=500,kc="ab-show",ny="ab-hide",cf="ab-pause-scrolling";f.InAppMessage=p;f.InAppMessage.SlideFrom=sv;f.InAppMessage.ClickAction=hv;f.InAppMessage.DismissType=cv;f.InAppMessage.OpenTarget=lv;f.InAppMessage.ImageStyle=av;f.InAppMessage.TextAlignment=yv;f.InAppMessage.Orientation=vv;f.InAppMessage.CropType=pv;f.InAppMessage.fromJson=ro;f.InAppMessage.prototype.subscribeToClickedEvent=p.prototype.Vb;f.InAppMessage.prototype.subscribeToDismissedEvent=p.prototype.Wd;f.InAppMessage.prototype.removeSubscription=p.prototype.N;f.InAppMessage.prototype.removeAllSubscriptions=p.prototype.K;f.InAppMessage.prototype.closeMessage=p.prototype.Ye;hi.prototype.Vb=function(n){return lt(this.X,n)};hi.prototype.N=function(n){this.X.N(n)};hi.prototype.K=function(){this.X.K()};hi.prototype.fb=function(){return this.Wa?!1:(this.Wa=!0,nt(this.X),!0)};so=-1;f.InAppMessageButton=hi;f.InAppMessageButton.prototype.subscribeToClickedEvent=hi.prototype.Vb;f.InAppMessageButton.prototype.removeSubscription=hi.prototype.N;f.InAppMessageButton.prototype.removeAllSubscriptions=hi.prototype.K;f.ControlMessage=ar;pt(vr,p);vr.prototype.aa=function(n,t,i,r,u,f){return this.tc=document.activeElement,t=p.prototype.aa.call(this,n,i,r,u,f),t.className+=" ab-fullscreen ab-centered",nl(this,n,i,t,u),dc(t),gc(this.qd,t),t};vr.prototype.oa=function(){return p.prototype.oa.call(this)+" ab-effect-fullscreen"};nu.Object.defineProperties(vr.prototype,{Bd:{configurable:!0,enumerable:!0,get:function(){return lr}}});f.FullScreenMessage=vr;ho=new function(){this.$e=".ab-pause-scrolling,body.ab-pause-scrolling,html.ab-pause-scrolling{overflow:hidden;touch-action:none}.ab-centering-div,.ab-iam-root.v3{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:1050;-webkit-tap-highlight-color:transparent}.ab-centering-div:focus,.ab-iam-root.v3:focus{outline:0}.ab-centering-div.ab-effect-fullscreen,.ab-centering-div.ab-effect-html,.ab-centering-div.ab-effect-modal,.ab-iam-root.v3.ab-effect-fullscreen,.ab-iam-root.v3.ab-effect-html,.ab-iam-root.v3.ab-effect-modal{opacity:0}.ab-centering-div.ab-effect-fullscreen.ab-show,.ab-centering-div.ab-effect-html.ab-show,.ab-centering-div.ab-effect-modal.ab-show,.ab-iam-root.v3.ab-effect-fullscreen.ab-show,.ab-iam-root.v3.ab-effect-html.ab-show,.ab-iam-root.v3.ab-effect-modal.ab-show{opacity:1}.ab-centering-div.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-centering-div.ab-effect-html.ab-show.ab-animate-in,.ab-centering-div.ab-effect-modal.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-html.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-modal.ab-show.ab-animate-in{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-centering-div.ab-effect-fullscreen.ab-hide,.ab-centering-div.ab-effect-html.ab-hide,.ab-centering-div.ab-effect-modal.ab-hide,.ab-iam-root.v3.ab-effect-fullscreen.ab-hide,.ab-iam-root.v3.ab-effect-html.ab-hide,.ab-iam-root.v3.ab-effect-modal.ab-hide{opacity:0}.ab-centering-div.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-centering-div.ab-effect-html.ab-hide.ab-animate-out,.ab-centering-div.ab-effect-modal.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-html.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-modal.ab-hide.ab-animate-out{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-centering-div.ab-effect-slide .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-centering-div.ab-effect-slide.ab-show .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide.ab-show .ab-in-app-message{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-centering-div.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-centering-div.ab-effect-slide.ab-hide .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-centering-div.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left,.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left{-webkit-transform:translateX(-535px);-moz-transform:translateX(-535px);-ms-transform:translateX(-535px);transform:translateX(-535px)}.ab-centering-div.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up,.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up{-webkit-transform:translateY(-535px);-moz-transform:translateY(-535px);-ms-transform:translateY(-535px);transform:translateY(-535px)}.ab-centering-div.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down,.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down{-webkit-transform:translateY(535px);-moz-transform:translateY(535px);-ms-transform:translateY(535px);transform:translateY(535px)}.ab-centering-div.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message,.ab-iam-root.v3.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-centering-div .ab-ios-scroll-wrapper,.ab-iam-root.v3 .ab-ios-scroll-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;pointer-events:all;touch-action:auto;-webkit-overflow-scrolling:touch}.ab-centering-div .ab-in-app-message,.ab-iam-root.v3 .ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 0 4px rgba(0,0,0,.3);-moz-box-shadow:0 0 4px rgba(0,0,0,.3);box-shadow:0 0 4px rgba(0,0,0,.3);line-height:normal;letter-spacing:normal;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;z-index:1050;max-width:100%;overflow:hidden;display:inline-block;pointer-events:all;color:#333}.ab-centering-div .ab-in-app-message.ab-no-shadow,.ab-iam-root.v3 .ab-in-app-message.ab-no-shadow{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.ab-centering-div .ab-in-app-message :focus,.ab-centering-div .ab-in-app-message:focus,.ab-iam-root.v3 .ab-in-app-message :focus,.ab-iam-root.v3 .ab-in-app-message:focus{outline:0}.ab-centering-div .ab-in-app-message.ab-clickable,.ab-iam-root.v3 .ab-in-app-message.ab-clickable{cursor:pointer}.ab-centering-div .ab-in-app-message.ab-background,.ab-iam-root.v3 .ab-in-app-message.ab-background{background-color:#fff}.ab-centering-div .ab-in-app-message .ab-close-button,.ab-iam-root.v3 .ab-in-app-message .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:1060}.ab-centering-div .ab-in-app-message .ab-close-button svg,.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b}.ab-centering-div .ab-in-app-message .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg.ab-chevron{display:none}.ab-centering-div .ab-in-app-message .ab-close-button:active,.ab-iam-root.v3 .ab-in-app-message .ab-close-button:active{background-color:transparent}.ab-centering-div .ab-in-app-message .ab-close-button:focus,.ab-iam-root.v3 .ab-in-app-message .ab-close-button:focus{background-color:transparent}.ab-centering-div .ab-in-app-message .ab-close-button:hover,.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover{background-color:transparent}.ab-centering-div .ab-in-app-message .ab-close-button:hover svg,.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover svg{fill-opacity:.8}.ab-centering-div .ab-in-app-message .ab-message-text,.ab-iam-root.v3 .ab-in-app-message .ab-message-text{float:none;line-height:1.5;margin:20px 25px;max-width:100%;overflow:hidden;overflow-y:auto;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-centering-div .ab-in-app-message .ab-message-text.start-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-text.start-aligned{text-align:left;text-align:start}.ab-centering-div .ab-in-app-message .ab-message-text.end-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-text.end-aligned{text-align:right;text-align:end}.ab-centering-div .ab-in-app-message .ab-message-text.center-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-centering-div .ab-in-app-message .ab-message-text::-webkit-scrollbar,.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:14px}.ab-centering-div .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb,.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;background-color:rgba(0,0,0,.2)}.ab-centering-div .ab-in-app-message .ab-message-text::-webkit-scrollbar-button,.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-button{width:0;height:0;display:none}.ab-centering-div .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner,.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner{background-color:transparent}.ab-centering-div .ab-in-app-message .ab-message-header,.ab-iam-root.v3 .ab-in-app-message .ab-message-header{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;font-size:20px;margin-bottom:10px;line-height:1.3}.ab-centering-div .ab-in-app-message .ab-message-header.start-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-header.start-aligned{text-align:left;text-align:start}.ab-centering-div .ab-in-app-message .ab-message-header.end-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-header.end-aligned{text-align:right;text-align:end}.ab-centering-div .ab-in-app-message .ab-message-header.center-aligned,.ab-iam-root.v3 .ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-centering-div .ab-in-app-message.ab-fullscreen,.ab-centering-div .ab-in-app-message.ab-modal,.ab-centering-div .ab-in-app-message.ab-slideup,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-centering-div .ab-in-app-message.ab-slideup,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;cursor:pointer;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:14px;font-weight:700;margin:20px;margin-top:calc(constant(safe-area-inset-top,0) + 20px);margin-right:calc(constant(safe-area-inset-right,0) + 20px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 20px);margin-left:calc(constant(safe-area-inset-left,0) + 20px);margin-top:calc(env(safe-area-inset-top,0) + 20px);margin-right:calc(env(safe-area-inset-right,0) + 20px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 20px);margin-left:calc(env(safe-area-inset-left,0) + 20px);max-height:150px;padding:10px;right:0;background-color:#efefef}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button{display:none}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron),.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron){display:none}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text{border-right-width:40px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text{max-width:100%;border-right-width:10px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span{max-height:66px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area{width:50px;height:50px}.ab-centering-div .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text{opacity:.8}.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-centering-div .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron{fill-opacity:.8}.ab-centering-div .ab-in-app-message.ab-slideup .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 25px 5px 10px;max-width:430px;vertical-align:middle;margin:0}.ab-centering-div .ab-in-app-message.ab-slideup .ab-message-text span,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{display:block;max-height:150px;overflow:auto}.ab-centering-div .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-centering-div .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:365px;border-top:0;border-bottom:0}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:1060}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button svg,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron{display:none}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button:active,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:active{background-color:transparent}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button:focus,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:focus{background-color:transparent}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button:hover,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover{background-color:transparent}.ab-centering-div .ab-in-app-message.ab-slideup .ab-close-button:hover svg,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover svg{fill-opacity:.8}.ab-centering-div .ab-in-app-message.ab-slideup .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;vertical-align:top;width:60px;margin:0}.ab-centering-div .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-centering-div .ab-in-app-message.ab-slideup .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{float:none;width:100%}.ab-centering-div .ab-in-app-message.ab-fullscreen,.ab-centering-div .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal{font-size:14px}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{float:none;position:relative;display:block;overflow:hidden}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{background-size:cover;background-repeat:no-repeat;background-position:50% 50%;position:absolute;top:0;right:0;bottom:0;left:0}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-icon,.ab-centering-div .ab-in-app-message.ab-modal .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic,.ab-centering-div .ab-in-app-message.ab-modal.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{padding:0}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{float:none;height:auto;margin:0}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none}.ab-centering-div .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-modal{padding-top:20px;width:450px;max-width:450px;max-height:720px}.ab-centering-div .ab-in-app-message.ab-modal.simulate-phone,.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone{max-width:91%;max-width:calc(100% - 30px)}.ab-centering-div .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text{max-height:660px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-image{max-height:524.82758621px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon{max-height:610px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons{margin-bottom:93px;max-height:587px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image{max-height:451.82758621px}.ab-centering-div .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon{max-height:537px}.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;max-height:155.17241379px}.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:155.17241379px}.ab-centering-div .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-centering-div .ab-in-app-message.ab-modal.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-centering-div .ab-in-app-message.ab-modal.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{max-height:720px;max-width:450px}.ab-centering-div .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen{width:450px;max-height:720px}.ab-centering-div .ab-in-app-message.ab-fullscreen.landscape,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape{width:720px;max-height:450px}.ab-centering-div .ab-in-app-message.ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:225px}.ab-centering-div .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:450px}.ab-centering-div .ab-in-app-message.ab-fullscreen.landscape .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:112px}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text{max-height:247px}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons{margin-bottom:93px}.ab-centering-div .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area{height:360px}.ab-centering-div .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:720px}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area{height:50%}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic),.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic{display:block}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area{height:100%}.ab-centering-div .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}.ab-centering-div .ab-in-app-message.ab-html-message,.ab-iam-root.v3 .ab-in-app-message.ab-html-message{background-color:transparent;border:none;height:100%;overflow:auto;position:relative;touch-action:auto;width:100%}.ab-centering-div .ab-in-app-message .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:17px 25px 30px 25px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-centering-div .ab-in-app-message .ab-message-button,.ab-iam-root.v3 .ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;cursor:pointer;display:inline-block;font-size:14px;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;height:44px;line-height:normal;letter-spacing:normal;margin:0;max-width:100%;min-width:80px;padding:0 12px;position:relative;text-transform:none;width:48%;width:calc(50% - 5px);border:1px solid #1b78cf;-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-centering-div .ab-in-app-message .ab-message-button:first-of-type,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type{float:left;background-color:#fff;color:#1b78cf}.ab-centering-div .ab-in-app-message .ab-message-button:last-of-type,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:last-of-type{float:right;background-color:#1b78cf;color:#fff}.ab-centering-div .ab-in-app-message .ab-message-button:first-of-type:last-of-type,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type:last-of-type{float:none;width:auto}.ab-centering-div .ab-in-app-message .ab-message-button:after,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}.ab-centering-div .ab-in-app-message .ab-message-button:after,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease}.ab-centering-div .ab-in-app-message .ab-message-button:hover,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:hover{opacity:.8}.ab-centering-div .ab-in-app-message .ab-message-button:active:after,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:active:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.08)}.ab-centering-div .ab-in-app-message .ab-message-button:focus:after,.ab-iam-root.v3 .ab-in-app-message .ab-message-button:focus:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.ab-centering-div .ab-in-app-message .ab-message-button a,.ab-iam-root.v3 .ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-centering-div .ab-in-app-message img,.ab-iam-root.v3 .ab-in-app-message img{float:none;display:inline-block}.ab-centering-div .ab-in-app-message .ab-icon,.ab-iam-root.v3 .ab-in-app-message .ab-icon{float:none;display:inline-block;padding:10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-centering-div .ab-in-app-message .ab-icon .fa,.ab-iam-root.v3 .ab-in-app-message .ab-icon .fa{float:none;font-size:30px;width:30px}.ab-centering-div .ab-start-hidden,.ab-iam-root.v3 .ab-start-hidden{visibility:hidden}.ab-centering-div .ab-centered,.ab-centering-div.ab-centering-div .ab-modal,.ab-iam-root.v3 .ab-centered,.ab-iam-root.v3.ab-centering-div .ab-modal{margin:auto;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ab-email-capture,.ab-iam-root.v3{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-email-capture .ab-page-blocker,.ab-iam-root.v3 .ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1040;pointer-events:all;background-color:rgba(51,51,51,.75)}.ab-email-capture .ab-in-app-message.ab-modal .ab-email-capture-input{margin-bottom:30px}.ab-email-capture .ab-in-app-message.ab-modal .ab-message-buttons~.ab-message-text{max-height:541px;margin-bottom:160px}.ab-email-capture .ab-in-app-message.ab-modal .ab-message-buttons~.ab-message-text.with-explanatory-link{max-height:513px;margin-bottom:188px}.ab-email-capture .ab-in-app-message.ab-modal .ab-image-area~.ab-message-text{max-height:385.82758621px}.ab-email-capture .ab-in-app-message.ab-modal .ab-image-area~.ab-message-text.with-explanatory-link{max-height:357.82758621px}.ab-email-capture .ab-in-app-message.ab-modal .ab-email-validation-error{margin-top:62px}.ab-email-capture .ab-in-app-message.ab-modal .ab-explanatory-link{display:block}.ab-email-capture .ab-in-app-message.ab-modal .ab-background,.ab-email-capture .ab-in-app-message.ab-modal .ab-mask{position:absolute;top:0;right:0;bottom:0;left:0;z-index:-1}.ab-email-capture .ab-in-app-message.ab-modal .ab-close-button{line-height:normal}.ab-email-capture .ab-in-app-message.ab-modal .ab-html-close-button{right:3px;top:-1px;font-size:34px;padding-top:0}@media (max-width:600px){.ab-iam-root.v3 .ab-in-app-message.ab-slideup{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic),.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:480px){.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop),.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-width:91%;max-width:calc(100% - 30px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}}@media (max-height:750px){.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop),.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-height:91%;max-height:calc(100% - 30px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-height:91vh;max-height:calc(100vh - 30px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text{max-height:65vh;max-height:calc(100vh - 30px - 60px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image{max-height:45vh;max-height:calc(100vh - 30px - 155.17241379310346px - 40px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon{max-height:45vh;max-height:calc(100vh - 30px - 70px - 40px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons{max-height:50vh;max-height:calc(100vh - 30px - 93px - 40px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image{max-height:30vh;max-height:calc(100vh - 30px - 155.17241379310346px - 93px - 20px)}.ab-email-capture .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon{max-height:30vh;max-height:calc(100vh - 30px - 70px - 93px - 20px)}}@media (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:750px) and (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important;width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-height:480px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:750px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:1050;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:1060;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-banner .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px;padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}"};pt(yi,p);yi.prototype.xf=function(){return!1};yi.prototype.fb=function(n){if(this.nf===wc){if(this.Wa)return!1;this.Wa=!0}return nt(this.X,n),!0};yi.prototype.aa=function(n,t,i,r,u,f){function s(n,t,i){return(i=n.match(new RegExp("([\\w]+)\\s*=\\s*document.createElement\\(['\"]"+i+"['\"]\\)")))?n.slice(0,i.index+i[0].length)+";"+(i[1]+'.setAttribute("nonce", "'+t+'");')+n.slice(i.index+i[0].length):null}function h(t){var i=t.getAttribute("href"),r=t.onclick;return function(f){var s,h,c;if(null==r||"function"!=typeof r||!1!==r())return s=ty(i).abButtonId,(null==s||""===s)&&(s=t.getAttribute("id")),null!=i&&""!==i&&0!==i.indexOf("#")?(h="blank"===(t.getAttribute("target")||"").toLowerCase().replace("_",""),c=u||o.openTarget===sf||h,h=function(){n.Pb(o,s,i);at.openUri(i,f,c)},c?h():vi(o,e,h)):n.Pb(o,s,i),f.stopPropagation(),!1}}var o=this,e;return this.tc=document.activeElement,e=document.createElement("iframe"),e.setAttribute("title","Modal Message"),f&&(e.style.zIndex=f+1),e.onload=function(){function y(n){return function(){var i=arguments;vi(o,e,function(){t.display[n].apply(t.display,Array.prototype.slice.call(i))})}}function p(n){return function(){var i=t.getUser();i[n].apply(i,Array.prototype.slice.call(arguments))}}function v(n){return function(){t[n].apply(t,Array.prototype.slice.call(arguments))}}var u=null,f=n.ih(),i,c,l,a;if(null!=f){for(u=document.createElement("html"),u.innerHTML=o.message,i=u.getElementsByTagName("style"),c=0;c<i.length;c++)i[c].setAttribute("nonce",f);for(i=u.getElementsByTagName("script"),c=0;c<i.length;c++)i[c].setAttribute("nonce",f),i[c].innerHTML=i[c].innerHTML.replace(/<style>/g,"<style nonce='"+f+"'>"),l=s(i[c].innerHTML,f,"script"),l&&(i[c].innerHTML=l),(l=s(i[c].innerHTML,f,"style"))&&(i[c].innerHTML=l)}for(e.contentWindow.focus(),e.contentWindow.document.write(u?u.innerHTML:o.message),u=e.contentWindow.document.getElementsByTagName("head")[0],null!=u&&(i=document.createElement("style"),i.innerHTML=ho.$e,null!=f&&i.setAttribute("nonce",f),u.appendChild(i),si(o)&&(i=document.createElement("style"),i.innerHTML=o.css,i.id=ff(o),null!=f&&i.setAttribute("nonce",f),u.appendChild(i)),f=e.contentWindow.document.createElement("base"),f.setAttribute("target","_parent"),u.appendChild(f)),f=e.contentWindow.document.getElementsByTagName("title"),0<f.length&&e.setAttribute("title",f[0].textContent),f={closeMessage:function(){vi(o,e)},logClick:function(){var n=[o];0<arguments.length&&n.push(arguments[0]);t.logInAppMessageHtmlClick.apply(t,n)},display:{},web:{}},u=["requestImmediateDataFlush","logCustomEvent","logPurchase","unregisterAppboyPushMessages"],i=0;i<u.length;i++)f[u[i]]=v(u[i]);for(u="setFirstName setLastName setEmail setGender setDateOfBirth setCountry setHomeCity setEmailNotificationSubscriptionType setLanguage addAlias setPushNotificationSubscriptionType setPhoneNumber setCustomUserAttribute addToCustomAttributeArray removeFromCustomAttributeArray incrementCustomUserAttribute setCustomLocationAttribute addToSubscriptionGroup removeFromSubscriptionGroup".split(" "),a={},i=0;i<u.length;i++)a[u[i]]=p(u[i]);for(f.getUser=function(){return a},u=["showFeed"],i=0;i<u.length;i++)f.display[u[i]]=y(u[i]);for(u=["registerAppboyPushMessages","trackLocation"],i=0;i<u.length;i++)f.web[u[i]]=v(u[i]);if(e.contentWindow.appboyBridge=f,e.contentWindow.brazeBridge=f,o.nf!==bc){for(u=e.contentWindow.document.getElementsByTagName("a"),i=0;i<u.length;i++)u[i].onclick=h(u[i]);for(u=e.contentWindow.document.getElementsByTagName("button"),i=0;i<u.length;i++)u[i].onclick=h(u[i])}u=e.contentWindow.document.body;null!=u&&(uf(o)&&(u.id=o.htmlId),i=document.createElement("hidden"),i.onclick=f.closeMessage,i.className="ab-programmatic-close-button",u.appendChild(i));e.contentWindow.dispatchEvent(new CustomEvent("ab.BridgeReady"));-1!==e.className.indexOf("ab-start-hidden")&&(e.className=e.className.replace("ab-start-hidden",""),r(e));document.activeElement!==e&&e.focus()},e.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions","iOS"===yt.ga?(i=document.createElement("div"),i.className="ab-ios-scroll-wrapper",i.appendChild(e),this.sc=i):this.sc=e};yi.prototype.oa=function(){return p.prototype.oa.call(this)+" ab-effect-html"};f.HtmlMessage=yi;pt(yr,p);yr.prototype.aa=function(n,t,i,r,u,f){return this.tc=document.activeElement,t=p.prototype.aa.call(this,n,i,r,u,f),t.className+=" ab-modal ab-centered",nl(this,n,i,t,u),dc(t),gc(this.qd,t),t};yr.prototype.oa=function(){return p.prototype.oa.call(this)+" ab-effect-modal"};nu.Object.defineProperties(yr.prototype,{Bd:{configurable:!0,enumerable:!0,get:function(){return lr}}});f.ModalMessage=yr;pt(pr,p);r=pr.prototype;r.Ja=function(){return!1};r.aa=function(n,t,i,r,u,f){var e=p.prototype.aa.call(this,n,i,r,u,f),o,s;return e.className+=" ab-slideup",o=e.getElementsByClassName("ab-close-button")[0],null!=o&&(n=rc("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",si(this)?void 0:fi(this.closeButtonColor)),n.setAttribute("class","ab-chevron"),o.appendChild(n)),ou(e,to,function(n){e.className+=" ab-swiped-left";o.onclick(n)}),ou(e,io,function(n){e.className+=" ab-swiped-right";o.onclick(n)}),"TOP"===this.slideFrom?(n=uc,s=" ab-swiped-up"):(n=fc,s=" ab-swiped-down"),ou(e,n,function(n){e.className+=s;o.onclick(n)}),e};r.Xe=function(){var n=document.createElement("span");return n.appendChild(document.createTextNode(this.message)),n};r.Kc=function(n){var t=n.getElementsByClassName("ab-in-app-message")[0];no(t,!0,!0)||("TOP"===this.slideFrom?t.style.top="0px":t.style.bottom="0px");p.prototype.Kc.call(this,n)};r.oa=function(){return p.prototype.oa.call(this)+" ab-effect-slide"};nu.Object.defineProperties(pr.prototype,{Bd:{configurable:!0,enumerable:!0,get:function(){return"START"}}});f.SlideUpMessage=pr;r=ci.prototype;r.ff=function(){for(var t=0,n=0;n<this.cards.length;n++)this.cards[n].viewed||this.cards[n]instanceof wi||t++;return t};r.Ma=function(n,t){n.Ma(t)};r.La=function(n,t){n.La(t)};r.Se=function(n){n.Nc()};r.aa=function(n,t){function e(t){ao(s,n,i);t.stopPropagation()}function o(t){wr(n,i);t.stopPropagation()}var s=this,i=document.createElement("div"),f,u,r;return i.className="ab-feed ab-hide ab-effect-slide",i.setAttribute("role","dialog"),i.setAttribute("tabindex","-1"),f=document.createElement("div"),f.className="ab-feed-buttons-wrapper",f.setAttribute("role","group"),i.appendChild(f),u=document.createElement("i"),u.className="fa fa-times ab-close-button",u.setAttribute("aria-label","Close Feed"),u.setAttribute("tabindex","0"),u.setAttribute("role","button"),u.addEventListener("keydown",function(n){32!==n.keyCode&&13!==n.keyCode||o(n)}),u.onclick=o,r=document.createElement("i"),r.className="fa fa-refresh ab-refresh-button",null==this.lastUpdated&&(r.className+=" fa-spin"),r.setAttribute("aria-label","Refresh Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),r.addEventListener("keydown",function(n){32!==n.keyCode&&13!==n.keyCode||e(n)}),r.onclick=e,f.appendChild(r),f.appendChild(u),i.appendChild(tl(this,n,t)),i.onscroll=function(){lf(s,n,i)},i};var il=500,vo="data-update-subscription-id",vf="data-last-requested-refresh",ry=1e4;f.Feed=ci;f.Feed.prototype.getUnreadCardCount=ci.prototype.ff;pt(ni,ci);ni.prototype.jh=function(){return ci.prototype.ff.call(this)};ni.prototype.Ma=function(n,t){n.Ma(t,!0)};ni.prototype.La=function(n,t){n.La(t,!0)};ni.prototype.Se=function(n){n.Na()};f.ContentCards=ni;f.ContentCards.prototype.getUnviewedCardCount=ni.prototype.jh;yf.prototype.fa=function(n){return null==this.bb||this.bb===n[0]};yf.prototype.A=function(){return this.bb};pf.prototype.fa=function(n){var t=null;null!=n&&(t=n[this.lf]);switch(this.nb){case uy:return null!=t&&t.valueOf()===this.I.valueOf();case fy:return null==t||t.valueOf()!==this.I.valueOf();case ey:return typeof t==typeof this.I&&t>this.I;case rl:return this.Mc===yo?null!=t&&ii(t)&&((new Date).valueOf()-t.valueOf())/1e3<=this.I:typeof t==typeof this.I&&t>=this.I;case oy:return typeof t==typeof this.I&&t<this.I;case ul:return this.Mc===yo?null!=t&&ii(t)&&((new Date).valueOf()-t.valueOf())/1e3>=this.I:typeof t==typeof this.I&&t<=this.I;case sy:return null!=t&&"string"==typeof t&&typeof t==typeof this.I&&null!=t.match(this.I);case hy:return null!=t;case cy:return null==t;case fl:return null!=t&&ii(t)&&(t.valueOf()-(new Date).valueOf())/1e3<this.I;case el:return null!=t&&ii(t)&&(t.valueOf()-(new Date).valueOf())/1e3>this.I;case ly:return null==t||typeof t!=typeof this.I||"string"!=typeof t||null==t.match(this.I)}return!1};pf.prototype.A=function(){var n=this.I;return ii(this.I)&&(n=tu(n.valueOf())),{k:this.lf,t:this.Mc,c:this.nb,v:n}};var uy=1,fy=2,ey=3,rl=4,oy=5,ul=6,sy=10,hy=11,cy=12,fl=15,el=16,ly=17,yo="date";wf.prototype.fa=function(n){for(var i=!0,t=0;t<this.filters.length;t++){for(var u=this.filters[t],f=!1,r=0;r<u.length;r++)if(u[r].fa(n)){f=!0;break}if(!f){i=!1;break}}return i};wf.prototype.A=function(){for(var t=[],n=0;n<this.filters.length;n++){for(var r=this.filters[n],u=[],i=0;i<r.length;i++)u.push(r[i].A());t.push(u)}return t};bf.prototype.fa=function(n){if(null==this.bb||null==this.eb)return!1;var t=n[1];return n[0]===this.bb&&this.eb.fa(t)};bf.prototype.A=function(){return{e:this.bb,pf:this.eb.A()}};kf.prototype.fa=function(n){var i,r,t;if(null==this.Za||(i=cl(n[0],this.Za),!i))return!1;if(r=null==this.Gb||0===this.Gb.length,null!=this.Gb)for(t=0;t<this.Gb.length;t++)if(this.Gb[t]===n[1]){r=!0;break}return i&&r};kf.prototype.A=function(){return this.Za};df.prototype.fa=function(n){return null==this.cb||n[0]===this.cb};df.prototype.A=function(){return this.cb};gf.prototype.fa=function(n){if(null==this.cb||null==this.eb)return!1;var t=n[1];return n[0]===this.cb&&this.eb.fa(t)};gf.prototype.A=function(){return{id:this.cb,pf:this.eb.A()}};ne.prototype.fa=function(n){return null==this.Za?!0:cl(n[0],this.Za)};ne.prototype.A=function(){return this.Za};it={OPEN:"open",fd:"purchase",ne:"push_click",Tc:"custom_event",ec:"iam_click",V:"test"};po.prototype.A=function(){return{t:this.type,d:this.data?this.data.A():null}};var wo="open",bo="purchase",ko="purchase_property",go="push_click",ns="custom_event",ts="custom_event_property",is="iam_click",rs="test",pi={};pi[wo]=it.OPEN;pi[bo]=it.fd;pi[ko]=it.fd;pi[go]=it.ne;pi[ns]=it.Tc;pi[ts]=it.Tc;pi[is]=it.ec;pi[rs]=it.V;us.prototype.A=function(){for(var t=[],n=0;n<this.ob.length;n++)t.push(this.ob[n].A());return{i:this.id,c:t,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.ab,r:this.Rb,tm:this.Oa,ss:this.kf,ld:this.Ca}};te=-1;tr={Xc:"inapp",we:"templated_iam"};r=vl.prototype;r.Na=function(n,t,r,u,f){var s=this,e=es(this,{}),o;e.last_full_sync_at=n;e.last_card_updated_at=t;n=this.f.o();null!=n&&(e.user_id=n);o=[["X-Braze-Api-Key",this.$],["X-Braze-DataRequest","true"],["X-Braze-ContentCardsRequest","true"]];this.W.Db&&(n=l(this.W.b,i.jb),null!=n&&o.push(["X-Braze-Auth-Signature",n]));ss(e,function(){fs({url:""+s.Bb+"/content_cards/sync",data:e,headers:o,h:function(n){os(s,e,n,o)?(s.Va=0,r(n),"function"==typeof u&&u()):"function"==typeof f&&f()},error:function(n){yl(n,"retrieving content cards");"function"==typeof f&&f()}})})};r.Hd=function(){this.Ce=!1;cu(this)};r.Jb=function(){this.sd.K();this.W.td.K();fe(this);this.Ce=!0;bi(this,null,null,!1);this.qc=null};r.Lc=function(n){var f=this,r=this.D.Kb(),e=tt(this.D),u;(r=r!==e)&&(bh(this.b,ot.Uc),bh(this.b,ot.lc));bi(this,null,!1,null,null,null);kl(this);r&&null!=n&&(n.Mb()||n.Ka())&&(u=function(){n.Hg?t.info("Push token maintenance is disabled, not refreshing token for backend."):n.subscribe()},r=wt.ba,fh(new ct(r),r.G.gd,function(n,t){t&&u()},function(){var n=l(f.b,i.kc);(null==n||n)&&u()}))};r.$a=function(n,r,u,f){var a=this.f.o(),e,o,s,h,c;if(a!==n){if(e=this.D,o=nr(e.b,ot.Ta),null!=o&&(e.b.rc.remove(ot.Ta),o=fa(e,(new Date).valueOf(),o),null==o||d(e.b,[o])),null!=a&&bi(this,null,!1,null,null,null),e=this.f,o=null==e.o(),er(e.b,ot.lc,new fr(n)),o&&(e=e.b,o=e.R.Z(i.Qa),null!=o&&(s=i.Qc,h=o[s],null!=h&&(o[s]=void 0,e.R.store(i.Qa,o),h.user_id=n,dh(e,h))),s=nr(e,ot.Ta),o=null,null!=s&&(o=s.ia),s=kh(e),null!=s))for(h=0;h<s.length;h++)c=s[h],null==c.gb&&c.sessionId==o&&(c.gb=n),null==c||d(e,[c]);for(f?this.W.Tb(f):(f=this.W,b(f.b,i.jb),e=wt.ba,pu(new ct(e),e.G.qe,f.ye)),f=0;f<r.length;f++)r[f].$a(null==a);null!=a&&b(this.b,i.vb);b(this.b,i.cc);this.Lc(u);t.info('Changed user to "'+n+'".')}else r="Doing nothing.",f&&l(this.W.b,i.jb)!==f&&(this.W.Tb(f),r="Updated SDK authentication signature"),t.info("Current user is already "+n+". "+r)};r.rb=function(){return new w(this.f,this)};r.tb=function(n){fe(this);tt(this.D);bi(this,null,null,null,null,null,n,!0)};r.Nc=function(){tt(this.D);bi(this,!0)};r.Jd=function(n,i){var r=new vt,u=tt(this.D);return-1!==kt(this.J).cf.indexOf(n)?(t.info('Custom Event "'+n+'" is blocklisted, ignoring.'),r):(r.j.push(new y(this.f.o(),a.CustomEvent,(new Date).valueOf(),u,{n:n,p:i})),r.h=d(this.b,r.j),r)};r.Kd=function(n,i,r,u,f){var e=new vt,o=tt(this.D);return-1!==kt(this.J).mf.indexOf(n)?(t.info('Purchase "'+n+'" is blocklisted, ignoring.'),e):(e.j.push(new y(this.f.o(),a.eg,(new Date).valueOf(),o,{pid:n,c:r,p:i,q:u,pr:f})),e.h=d(this.b,e.j),e)};r.Oc=function(n,t,i,r,u,f){var e=new vt,o=tt(this.D);return t={latitude:t,longitude:i},null!=r&&(t.altitude=r),null!=u&&(t.ll_accuracy=u),null!=f&&(t.alt_accuracy=f),e.j.push(new y(n,a.lg,(new Date).valueOf(),o,t)),e.h=d(this.b,e.j),e};r.Qb=function(n){var i=new vt,r=tt(this.D);if(n instanceof ar)i.j.push(new y(this.f.o(),a.Mf,(new Date).valueOf(),r,{trigger_ids:[n.triggerId]}));else{if(!n.Od())return t.info("This in-app message has already received an impression. Ignoring analytics event."),i;if(n=re(n),null==n)return i;i.j.push(new y(this.f.o(),a.dg,(new Date).valueOf(),r,n))}return i.h=d(this.b,i.j),i};r.Jc=function(n){var i=new vt,r=tt(this.D);return n.fb()?(n=re(n),null==n)?i:(i.j.push(new y(this.f.o(),a.ke,(new Date).valueOf(),r,n)),i.h=d(this.b,i.j),i):(t.info("This in-app message has already received a click. Ignoring analytics event."),i)};r.Ic=function(n,i){var r=new vt,u=tt(this.D);return n.fb()?(i=re(i),null==i)?r:n.id===so?(t.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),r):(null!=n.id&&(i.bid=n.id),r.j.push(new y(this.f.o(),a.je,(new Date).valueOf(),u,i)),r.h=d(this.b,r.j),r):(t.info("This in-app message button has already received a click. Ignoring analytics event."),r)};r.Pb=function(n,i,r){var u=new vt,f=tt(this.D);return n.fb(r)?(n=re(n),null==n)?u:(r=a.ke,null!=i&&(n.bid=i,r=a.je),u.j.push(new y(this.f.o(),r,(new Date).valueOf(),f,n)),u.h=d(this.b,u.j),u):(t.info("This in-app message has already received a click. Ignoring analytics event."),u)};r.M=function(n,t){var i=new vt,r=tt(this.D);return n={trigger_ids:[n],error_code:t},i.j.push(new y(this.f.o(),a.cg,(new Date).valueOf(),r,n)),i.h=d(this.b,i.j),i};r.Ma=function(n,t){for(var u=new vt,o=tt(this.D),s=[],f=[],e=t?l(this.b,i.ib)||{}:l(this.b,i.vb)||{},r=0;r<n.length;r++)n[r].Od(),n[r]instanceof wi?f.push(n[r]):s.push(n[r]),e[n[r].id]=!0;return(n=ue(s),f=ue(f),null==n&&null==f)?u:(t?v(this.b,i.ib,e):v(this.b,i.vb,e),null!=n&&u.j.push(new y(this.f.o(),t?a.Jf:a.Gf,(new Date).valueOf(),o,n)),null!=f&&t&&u.j.push(new y(this.f.o(),a.Lf,(new Date).valueOf(),o,f)),u.h=d(this.b,u.j),u)};r.La=function(n,r){var u=new vt,e=tt(this.D),f;return(n.fb(),null==n.url||""===n.url)?(t.info("Card "+n.id+" has no url. Not logging click to Braze servers."),u):(r&&(f=l(this.b,i.hb)||{},f[n.id]=!0,v(this.b,i.hb,f)),n=ue([n]),null==n)?u:(u.j.push(new y(this.f.o(),r?a.Hf:a.Ff,(new Date).valueOf(),e,n)),u.h=d(this.b,u.j),u)};r.Hc=function(n){var r=new vt,f=tt(this.D),u;return n.Nd()?(u=l(this.b,i.ua)||{},u[n.id]=!0,v(this.b,i.ua,u),n=ue([n]),null==n)?r:(r.j.push(new y(this.f.o(),a.If,(new Date).valueOf(),f,n)),r.h=d(this.b,r.j),r):(t.info("Card "+n.id+" refused this dismissal. Ignoring analytics event."),r)};r.zd=function(n){n=rt(n);for(var t=n.next();!t.done;t=n.next())t=t.value,-1===this.Eb.indexOf(t)&&this.Eb.push(t)};oe={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"};f.DeviceProperties=oe;gl.prototype.Ac=function(){var n={};return null!=this.browser&&(n.browser=this.browser),null!=this.browserVersion&&(n.browser_version=this.browserVersion),null!=this.os&&(n.os_version=this.os),null!=this.resolution&&(n.resolution=this.resolution),null!=this.language&&(n.locale=this.language),null!=this.timeZone&&(n.time_zone=this.timeZone),null!=this.userAgent&&(n.user_agent=this.userAgent),n};he.prototype.Ng=function(n){var i=this,t;document.hidden&&(cs(this),t=function(){document.hidden||(document.removeEventListener("visibilitychange",t,!1),i.watchPosition())},document.addEventListener("visibilitychange",t,!1));this.Fa.Oc(n.coords.latitude,n.coords.longitude,n.coords.accuracy,n.coords.altitude,n.coords.altitudeAccuracy)};he.prototype.Mg=function(n){n.code===n.PERMISSION_DENIED?t.info(n.message):t.error("Could not detect user location: "+n.code+" - "+n.message)};he.prototype.watchPosition=function(){this.Re?(cs(this),this.wc=navigator.geolocation.watchPosition(this.Ng.bind(this),this.Mg.bind(this)),t.info("Requested Geolocation")):t.info(this.ed)};ls.prototype.A=function(){return{e:this.endpoint,c:this.Ze,p:this.publicKey,u:this.Wh,v:this.ra}};r=na.prototype;r.qa=function(){return this.vc||this.vd};r.Ka=function(){var n=this.qa()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,t=this.qa()&&(!("Notification"in window)||null==window.Notification);return n||t};r.Mb=function(){return this.qa()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission};r.Id=function(n,i,r){var u=this;r=this.Ne||r;this.qa()?this.vc?ra(this).then(function(t){u.Ka()?i():null==t?i():t.pushManager.getSubscription().then(function(t){t?n():i()}).catch(function(){i()})}).catch(function(){i()}):null==r||""===r?t.error("You must supply the safariWebsitePushId argument in order to use isPushGranted on Safari"):"granted"===window.safari.pushNotification.permission(r).permission?n():i():i()};r.subscribe=function(n,r,u){var f=this,e,o;if(n=this.Ne||n,this.qa())if(this.vc){if(!this.rd&&null!=window.location&&(e=this.Pe,-1===e.indexOf(window.location.host)&&(e=window.location.host+e),-1===e.indexOf(window.location.protocol)&&(e=window.location.protocol+"//"+e),0!==window.location.href.indexOf(e.substr(0,e.lastIndexOf("/")+1)))){t.error("Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from "+window.location.pathname+" but service worker is at "+e+")");return}this.Ka()?vs(this,"Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",u):this.J&&!kt(this.J).ra&&0===kt(this.J).Nb?(t.info("Waiting for VAPID key from server config before subscribing to push."),np(this.J,function(){f.subscribe(n,r,u)})):(o=this.Mb(),dy(function(){o||f.Fa.Ud("opted_in");ra(f).then(function(n){null==n?(t.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerAppboyPushMessages."),"function"==typeof u&&u()):n.pushManager.getSubscription().then(function(e){var o=null,h;if(f.J&&null!=kt(f.J).ra&&(o=uh.Vh(kt(f.J).ra)),e){var c=null,a=null,s=l(f.b,i.kc);if(s&&!ft(s)){try{h=new ls(s.e,gi(s.c),s.p,s.u,s.v).Ze}catch(v){h=null}null==h||isNaN(h.getTime())||0===h.getTime()||(c=h,a=new Date(c),a.setMonth(c.getMonth()+6))}null!=o&&e.options&&e.options.applicationServerKey&&e.options.applicationServerKey.byteLength&&0<e.options.applicationServerKey.byteLength&&!di(o,new Uint8Array(e.options.applicationServerKey))?(12<e.options.applicationServerKey.byteLength?t.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):t.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),lu(f,e,n,o,r,u)):e.expirationTime&&new Date(e.expirationTime)<=(new Date).valueOf()?(t.info("Push subscription is expired, creating new subscription."),lu(f,e,n,o,r,u)):s&&ft(s)?lu(f,e,n,o,r,u):null==a?(t.info("No push subscription creation date found, creating new subscription."),lu(f,e,n,o,r,u)):a<=(new Date).valueOf()?(t.info("Push subscription older than 6 months, creating new subscription."),lu(f,e,n,o,r,u)):(t.info("Device already subscribed to push, sending existing subscription to backend."),as(f,e,r,c))}else ia(f,n,o,r,u)}).catch(function(n){t.error("Error checking current push subscriptions: "+n)})}).catch(function(n){t.error("ServiceWorker registration failed: "+n)})},function(){var n="Permission for push notifications was ignored.";f.Ka()&&(n+=" The browser has automatically blocked further permission requests for a period (probably 1 week).");t.info(n);"function"==typeof u&&u(!0)},function(){t.info("Permission for push notifications was denied.");"function"==typeof u&&u(!1)}))}else this.vd&&(null==n||""===n?t.error("You must supply the safariWebsitePushId argument in order to use registerAppboyPushMessages on Safari"):(e=window.safari.pushNotification.permission(n),ta(this,n,e,r,u)));else t.info(this.ed)};r.unsubscribe=function(n,i){var r=this;this.qa()?this.vc?navigator.serviceWorker.getRegistration().then(function(u){u&&u.pushManager.getSubscription().then(function(f){f&&(r.Fa.Sb(!0),f.unsubscribe().then(function(f){f?(t.info("Device successfully unsubscribed from push."),"function"==typeof n&&n()):(t.error("Failed to unsubscribe device from push."),"function"==typeof i&&i());r.rd||(u.unregister(),t.info("Service worker successfully unregistered."))}).catch(function(n){t.error("Push unsubscription error: "+n);"function"==typeof i&&i()}))}).catch(function(n){t.error("Error unsubscribing from push: "+n);"function"==typeof i&&i()})}):this.vd&&(this.Fa.Sb(!0),t.info("Device unsubscribed from push."),"function"==typeof n&&n()):t.info(this.ed)};ce.prototype.A=function(){return{s:"3.5.0",l:this.Nb,e:this.cf,a:this.Ve,p:this.mf,m:this.Ld,v:this.ra,c:this.Hb}};ua.prototype.Kb=function(){var n=nr(this.b,ot.Ta);return null==n?null:n.ia};au.prototype.o=function(){var t=nr(this.b,ot.lc),n,i;if(null==t)return null;if(n=t.ia,i=ku(n),997<i){for(;997<i;)n=n.slice(0,n.length-1),i=ku(n);t.ia=n;er(this.b,ot.lc,t)}return n};au.prototype.Sd=function(n,i){if(ys(this.J,n))return t.info('Custom Attribute "'+n+'" is blocklisted, ignoring.'),!1;var r={};return r[n]=i,g(this,"custom",r)};au.prototype.Pd=function(n,t,r,u,f){g(this,"push_token",n);g(this,"custom_push_public_key",r);g(this,"custom_push_user_auth",u);g(this,"custom_push_vapid_public_key",f);var e=wt.ba,o=new ct(e);v(this.b,i.kc,new ls(n,t,r,u,f).A());o.setItem(e.G.gd,e.kb,!0)};au.prototype.Sb=function(n){if(g(this,"push_token",null),g(this,"custom_push_public_key",null),g(this,"custom_push_user_auth",null),g(this,"custom_push_vapid_public_key",null),n){n=wt.ba;var t=new ct(n);v(this.b,i.kc,!1);t.setItem(n.G.gd,n.kb,!1)}};ps.prototype.Tb=function(n){var r=l(this.b,i.jb),t;v(this.b,i.jb,n);t=wt.ba;new ct(t).setItem(t.G.qe,this.ye,n);r!==n&&nt(this.td)};ps.prototype.Xd=function(n){return lt(this.ze,n)};br.prototype.Lb=function(){};br.prototype.$a=function(){};br.prototype.clearData=function(){};pt(ws,br);r=ws.prototype;r.Ga=function(){for(var t,r=l(this.b,i.wb)||[],u=[],n=0;n<r.length;n++)t=sc(r[n]),null!=t&&u.push(t);this.B=le(this,bs(this,u,!1));this.Da=l(this.b,i.ac)||this.Da;this.Aa=l(this.b,i.$b)||this.Aa};r.Lb=function(n){var e,s,h,u,f,t,r,o;if(ks(this)&&null!=n&&n.cards){if(e=n.full_sync,e||this.Ga(),s=n.cards,h=n.last_full_sync_at,n=n.last_card_updated_at,e)for(u=[],f=rt(this.B),t=f.next();!t.done;t=f.next())t=t.value,t.test&&u.push(t);else u=this.B.slice();for(f=0;f<s.length;f++){for(t=s[f],r=null,o=0;o<this.B.length;o++)if(t.id===this.B[o].id){r=this.B[o];break}if(e)t=rf(t),null!=r&&r.viewed&&(t.viewed=!0),null!=t&&u.push(t);else if(null==r)t=rf(t),null!=t&&u.push(t);else if(!oc(r,t))for(r=0;r<u.length;r++)if(t.id===u[r].id){u.splice(r,1);break}}this.B=le(this,bs(this,u,e));this.yc();this.Da=h||0;v(this.b,i.ac,this.Da);this.Aa=n||0;v(this.b,i.$b,this.Aa);nt(this.ha,this.pb(!0))}};r.yc=function(){for(var t=[],n=0;n<this.B.length;n++)t.push(this.B[n].A());v(this.b,i.wb,t)};r.Na=function(n,t){if(ks(this))return this.H.Na(this.Da,this.Aa,this.Lb.bind(this),n,t)};r.pb=function(n){n||this.Ga();n=le(this,this.B);n.sort(function(n,t){return n.pinned&&!t.pinned?-1:t.pinned&&!n.pinned?1:n.updated>t.updated?-1:t.updated>n.updated?1:0});var t=Math.max(this.Aa||0,this.Da||0);return 0===t&&(t=void 0),new ni(n,ri(t))};r.$a=function(n){n||(this.B=[],nt(this.ha,new ni(this.B.slice(),null)),b(this.b,i.wb),b(this.b,i.hb),b(this.b,i.ib),b(this.b,i.ua));this.Aa=this.Da=0;b(this.b,i.ac);b(this.b,i.$b)};r.clearData=function(n){this.Aa=this.Da=0;this.B=[];nt(this.ha,new ni(this.B.slice(),null));n&&(b(this.b,i.wb),b(this.b,i.hb),b(this.b,i.ib),b(this.b,i.ua),b(this.b,i.ac),b(this.b,i.$b))};pt(ds,br);r=ds.prototype;r.Ga=function(){for(var t,r=l(this.b,i.dd)||[],u=[],n=0;n<r.length;n++)t=sc(r[n]),null!=t&&u.push(t);this.B=u;this.mb=gi(l(this.b,i.bd))};r.yc=function(){for(var t=[],n=0;n<this.B.length;n++)t.push(this.B[n].A());v(this.b,i.dd,t)};r.Lb=function(n){if(null!=n&&n.feed){this.Ga();n=n.feed;for(var b=[],t,tt=l(this.b,i.vb)||{},k={},f=0;f<n.length;f++){t=n[f];var r=t.id,u=t.type,e=t.viewed,d=t.title,o=t.image,g=t.description,s=ri(t.created),h=ri(t.updated),c=t.categories,a=ri(t.expires_at),y=t.url,p=t.domain,w=t.aspect_ratio;t=t.extras;r=u===ht.xe||u===ht.ic?new cr(r,e,d,o,g,s,h,c,a,y,p,w,t,!1,!1):u===ht.Yb?new hr(r,e,d,o,g,s,h,c,a,y,p,w,t,!1,!1):u===ht.Xb?new sr(r,e,o,s,h,c,a,y,p,w,t,!1,!1):null;null!=r&&(tt[r.id]&&(r.viewed=!0,k[r.id]=!0),b.push(r))}v(this.b,i.vb,k);this.B=b;this.yc();this.mb=new Date;v(this.b,i.bd,this.mb);nt(this.ha,new ci(this.B.slice(),this.mb))}};r.Fc=function(){this.Ga();for(var t=[],i=new Date,n=0;n<this.B.length;n++)(null==this.B[n].expiresAt||this.B[n].expiresAt>=i)&&t.push(this.B[n]);return new ci(t,this.mb)};r.clearData=function(n){null==n&&(n=!1);this.B=[];this.mb=null;n&&(b(this.b,i.dd),b(this.b,i.bd));nt(this.ha,new ci(this.B.slice(),this.mb))};pt(kr,br);kr.prototype.Lb=function(n){var o=!1,f,h,c;if(null!=n&&n.triggers){for(ir(this),f={},h={},this.T=[],c=0;c<n.triggers.length;c++){for(var r=n.triggers[c],u=r.id,e=[],s=0;s<r.trigger_condition.length;s++)e.push(ay(r.trigger_condition[s]));s=ri(r.start_time);var a=ri(r.end_time),y=r.priority,l=r.type,p=r.delay,w=r.re_eligibility,b=r.timeout,k=r.data;for(r=r.min_seconds_since_last_trigger,u=ti(tr,l,"Could not construct Trigger from server data","Trigger.Types")?new us(u,e,s,a,y,l,k,p,w,b,r):null,null!=this.Y[u.id]&&(u.Ca=this.Y[u.id],f[u.id]=this.Y[u.id]),null!=this.L[u.id]&&(h[u.id]=this.L[u.id]),e=0;e<u.ob.length;e++)if(hl(u.ob[e],it.V,null)){o=!0;break}null!=u&&this.T.push(u)}for(di(this.Y,f)||(this.Y=f,v(this.b,i.fc,this.Y)),di(this.L,h)||(this.L=h,v(this.b,i.zb,this.L)),n=[],f=0;f<this.T.length;f++)n.push(this.T[f].A());for(this.wd=(new Date).valueOf(),v(this.b,i.kd,n),v(this.b,i.md,this.wd),o&&(t.info("Trigger with test condition found, firing test."),this.pa(it.V)),this.pa(it.OPEN),o=this.oc,this.oc=[],n=0;n<o.length;n++)this.pa.apply(this,o[n])}};kr.prototype.pa=function(n,r,u){var w=this,f,a,v,h,e;if(ti(it,n,"Cannot fire trigger action.","TriggerEvents"))if(0<this.H.lb)t.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),this.oc.push(arguments);else{(l(this.b,i.md)||0)>this.wd?ea(this):ir(this);for(var o=(new Date).valueOf(),b=o-this.Ba,y=!0,p=!0,s=[],c=0;c<this.T.length;c++)if(f=this.T[c],a=o+1e3*f.ab,(null==f.Ca||f.Rb!==te&&a-f.Ca>=1e3*f.Rb)&&(null==f.startTime||f.startTime<=o)&&(null==f.endTime||f.endTime>=o)){for(v=!1,h=0;h<f.ob.length;h++)if(hl(f.ob[h],n,r)){v=!0;break}v&&(y=!1,oa(this,f,a,n)&&(p=!1,s.push(f)))}y?t.info("Trigger event "+n+" did not match any trigger conditions."):p?t.info("Ignoring "+n+" trigger event because a trigger was displayed "+b/1e3+"s ago."):(s.sort(function(n,t){return n.priority-t.priority}),e=s.pop(),null!=e&&(t.info("Firing "+e.type+" trigger action "+e.id+" from trigger event "+n+"."),sa(this,e,o,n,u,s),0===e.ab?vu(this,e,o,n,u,s):this.na.push(setTimeout(function(){vu(w,e,o,n,u,s)},1e3*e.ab))))}};kr.prototype.$a=function(n){if(this.T=[],b(this.b,i.kd),!n){for(this.oc=[],this.Ba=null,this.Y={},this.L={},n=0;n<this.na.length;n++)clearTimeout(this.na[n]);this.na=[];b(this.b,i.ad);b(this.b,i.fc);b(this.b,i.zb);b(this.b,i.hg);b(this.b,i.gg);b(this.b,i.ig)}};kr.prototype.clearData=function(){this.T=[];this.Ba=null;this.Y={};this.L={};for(var n=0;n<this.na.length;n++)clearTimeout(this.na[n]);this.na=[]};gs={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd"};f.BrazeSdkMetadata=gs;"undefined"==typeof console&&(window.console={log:function(){}});dr=window.Element.prototype;"function"!=typeof dr.matches&&(dr.matches=dr.msMatchesSelector||dr.mozMatchesSelector||dr.webkitMatchesSelector||function(n){n=(this.document||this.ownerDocument).querySelectorAll(n);for(var t=0;n[t]&&n[t]!==this;)++t;return!!n[t]});Element.prototype.closest||(Element.prototype.closest=function(n){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});"function"!=typeof CustomEvent&&(nh=function(n,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i},nh.prototype=window.Event.prototype,window.CustomEvent=nh);n.exports?th=n.exports:(window.appboy||(window.appboy={}),th=window.appboy);var ha=th,h=new function(n){function o(n,i,r){n="The '"+n+"' "+i+" is deprecated.";r&&(n+=" Please use '"+r+"' instead.");t.warn(n)}function k(){t.Jb();v&&(nt(at),at.K(),h.clearData(!1),h=null,f.clearData(!1),f=null,y.K(),y=null,l.K(),l=null,w.K(),w=null,g.K(),g=null,r.Jb(),e=r=null,cs(ht),d=tt=u=ht=null,a=[],vt=null);b=v=!1}function i(){if(b)return!1;if(!v)throw Error("Appboy must be initialized before calling methods.");return!0}var kt={Ug:function(n,t,i){return new ps(n,t,i)},Wg:function(n,t){return new ky(n,t)},$g:function(n,t,i,r,u,f,e,o,s,h){null==u&&(u={});var l=new au(s,e),a=new ua(e,l,s,u[c.xg]);return new vl(n,i,r,u[c.Cf],t,a,o,l,s,e,f,h)},Bc:function(){return new bt},Xg:function(n,t){return new ds(n,t)},Vg:function(n,t,i,r){return new ws(n,t,i,r)},ah:function(n,t,i,r){return new kr(n,t,i,r)},Zg:function(n,t,i,r,u,f,e){return null==u&&(u={}),new na(n,t,i,r+"/safari/"+t,u[c.wg],u[c.ug],f,u[c.mg],u[c.Wf],e)},Yg:function(n){return new he(n)}};null==n&&(n=kt);var tt,et,u,vt,r,d,g,ot,y,h,w,s,f,l,e,ht,pt=new bt,at=new bt,a=[],v=!1,b=!1;return{Oh:function(n){return lt(pt,n)},Nh:function(n){return lt(at,n)},Hd:function(i,p){var it,k,st,ut,ct;if(v)return t.info("Braze has already been initialized with an API key."),!0;if(t.Gd(null!=p&&p[c.Yf]),null==i||""===i||"string"!=typeof i)return t.error("Braze requires a valid API key to be initialized."),!1;if(tt=i,u=p||{},yt.lh&&!u[c.Af])return t.info("Ignoring activity from crawler bot "+navigator.userAgent),b=!0,!1;if(et=p=rp(i,u[c.ng]||!1),it=new ui(null,!0),it.Z("ab.optOut"))return t.info("Ignoring all activity due to previous opt out"),it.store("ab.optOut","This-cookie-will-expire-in-"+ge(it)),b=!0,!1;for(it=rt(ki(u)),k=it.next();!k.done;k=it.next())k=k.value,-1===wu(c).indexOf(k)&&t.warn("Ignoring unknown initialization option '"+k+"'.");if(it=["mparticle","wordpress","tealium"],null!=u[c.re]&&(k=u[c.re],-1!==it.indexOf(k)?vt=k:t.error("Invalid sdk flavor passed: "+k)),st=[],y=n.Bc(),a.push(y),h=n.Xg(y,p),st.push(h),l=n.Bc(),a.push(l),it=u[c.Rc],null==it||""===it||"string"!=typeof it)return t.error("Braze requires a valid SDK Endpoint to be initialized. Please set the 'baseUrl' initialization option to the value of your SDK Endpoint."),!1;if(it=it.replace(/(\.[a-z]+)[^\.]*$/i,"$1/api/v3"),0!==it.indexOf("http")&&(it="https://"+it),k=u[c.ee]||u[c.Vc],u[c.Vc]&&o(c.Vc,"initialization option",c.ee),null!=k)if(ft(k)){for(ut=[],ct=0;ct<k.length;ct++)ti(oe,k[ct],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&ut.push(k[ct]);k=ut}else t.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),k=null;return ot=n.Wg(p,k),k=new gy(p),g=n.Bc(),d=n.Ug(p,u[c.Zf],g),a.push(g),r=n.$g(tt,it,"3.5.0",vt,u,function(n){if(v)for(var t=0;t<st.length;t++)st[t].Lb(n)},p,ot,k,d),ut=u[c.ag],null==ut&&(ut=30),f=n.ah(ut,l,p,r),st.push(f),ut=!0===u[c.Zd]||!0===u[c.fe],null!=u.enableHtmlInAppMessages&&o("enableHtmlInAppMessages","initialization option","allowUserSuppliedJavascript"),w=n.Bc(),a.push(w),s=n.Vg(w,r,p,k,ut),st.push(s),tp(k,function(){s.Na()}),py(r,function(){s.Na()}),r.Hd(),e=n.Zg(r.rb(),tt,ot,it,u,k,p),ht=n.Yg(r.rb()),p="Initialized ",u&&u[c.Rc]&&(p+='for the Braze backend at "'+u[c.Rc]+'" '),t.info(p+('with API key "'+i+'".')),i=yt.language,p=!1,u&&(u[c.$c]&&(o(c.$c,"initialization option",c.cd),i=u[c.$c],p=!0),u[c.cd]&&(i=u[c.cd],p=!0)),iy(i,p),nt(pt,u),v=!0},Jb:function(){t.info("Destroying appboy instance");et=null;k()},gh:function(n){i()&&(null==n&&t.error("getDeviceId must be supplied with a callback. e.g., appboy.getDeviceId(function(deviceId) {console.log('the device id is ' + deviceId)})"),"function"==typeof n&&n(se(ot).id))},Yd:function(){t.Yd()},Td:function(n){t.Td(n)},Lc:function(){if(i()){r.Lc(e);var n=wt.ba,u=new ct(n);fh(u,n.G.oe,function(i,e){function s(){f.pa(it.ne,[o],c)}var h=e.lastClick,o=e.trackingString,c;t.info("Firing push click trigger from "+o+" push click at "+h);c=by(r,h,o);wy(r,s,s);pu(u,n.G.oe,i)});eh(u,n.G.Ef,function(n){fp(s,n)});eh(u,n.G.me,function(n){var u=r,t,i;for(n=rt(n),t=n.next();!t.done;t=n.next())(t=t.value,t.api_key!==u.$)?(i=wt.ba,new ct(i).setItem(i.G.me,ai.Ia(),t)):ie(u,t)})}},$a:function(n,u){if(i())if(null==n||0===n.length||n!==n)t.error("changeUser requires a non-empty userId.");else if(997<ku(n))t.error('Rejected user id "'+n+'" because it is longer than 997 bytes.');else{if(null!=u&&!dt(u,"set signature for new user","signature",!1))return!1;r.$a(n.toString(),[h,s,f],e,u)}},rb:function(){if(i())return r.rb()},ih:function(){if(i())return u[c.be]},tb:function(n){i()&&r.tb(n)},Nc:function(){i()&&r.Nc()},uf:function(n){if(i())return lt(y,n)},Fc:function(){if(i())return h.Fc()},Na:function(n,t){if(i())return s.Na(n,t)},tf:function(n){if(i())return lt(w,n)},pb:function(){if(i())return s.pb(!1)},Ph:function(n){if(i())return o("subscribeToNewInAppMessages","method","subscribeToInAppMessage"),lt(l,n)},vf:function(n){if(i())return"function"!=typeof n?null:lt(l,function(t){return n(t[0]),t.slice(1)})},Qb:function(n){if(i())return n instanceof p||n instanceof ar?r.Qb(n).h:(t.error("inAppMessage must be an InAppMessage object"),!1)},Jc:function(n){var u,e;if(i()){if(!(n instanceof p))return t.error("inAppMessage must be an InAppMessage object"),!1;if(u=r.Jc(n),u.h)for(e=0;e<u.j.length;e++)f.pa(it.ec,[n.triggerId],u.j[e]);return u.h}},Ic:function(n,u){var e,o;if(i()){if(!(n instanceof hi))return t.error("button must be an InAppMessageButton object"),!1;if(!(u instanceof p))return t.error("inAppMessage must be an InAppMessage object"),!1;if(e=r.Ic(n,u),e.h)for(o=0;o<e.j.length;o++)f.pa(it.ec,[u.triggerId,n.id],e.j[o]);return e.h}},Pb:function(n,u,e){if(i()){if(!(n instanceof yi))return t.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;if(e=r.Pb(n,u,e),e.h)for(var o=0;o<e.j.length;o++)f.pa(it.ec,[n.triggerId,u],e.j[o]);return e.h}},M:function(n,u){if(i())return n instanceof p||n instanceof ar?ti(st,u,u+" is not a valid in-app message display failure","InAppMessage.DisplayFailures")?r.M(n.triggerId,u).h:!1:(t.error("inAppMessage must be an InAppMessage object"),!1)},Ma:function(n,u){if(i()){if(!ft(n))return t.error("cards must be an array"),!1;for(var f=0;f<n.length;f++)if(!(n[f]instanceof ut))return t.error("Each card in cards must be a Card object"),!1;return r.Ma(n,u).h}},La:function(n,u){if(i())return n instanceof ut?r.La(n,u).h:(t.error("card must be a Card object"),!1)},Hc:function(n){if(i())return n instanceof ut?r.Hc(n).h:(t.error("card must be a Card object"),!1)},jf:function(){if(i())return bl(r,oh.$f).h},hf:function(){if(i())return bl(r,oh.Kf).h},N:function(n){if(i()){for(var r=rt(a),t=r.next();!t.done;t=r.next())t.value.N(n);pt.N(n);at.N(n)}},K:function(){if(i())for(var t=rt(a),n=t.next();!n.done;n=t.next())n.value.K()},Jd:function(n,u){if(i()){if(null==n||0>=n.length)return t.error('logCustomEvent requires a non-empty eventName, got "'+n+'". Ignoring event.'),!1;if(!gt(n,"log custom event","the event name"))return!1;var e=rt(ch(u,"logCustomEvent","eventProperties",'log custom event "'+n+'"',"event")),o=e.next().value;if(e=e.next().value,!o)return!1;if(o=r.Jd(n,e),o.h)for(t.info('Logged custom event "'+n+'".'),e=0;e<o.j.length;e++)f.pa(it.Tc,[n,u],o.j[e]);return o.h}},Kd:function(n,u,e,o,s){var h,c;if(i()){if(null==e&&(e="USD"),null==o&&(o=1),null==n||0>=n.length)return t.error('logPurchase requires a non-empty productId, got "'+n+'", ignoring.'),!1;if(!gt(n,"log purchase","the purchase name"))return!1;if(h=parseFloat(u),isNaN(h))return t.error("logPurchase requires a numeric price, got "+u+", ignoring."),!1;if(h=h.toFixed(2),u=parseInt(o),isNaN(u))return t.error("logPurchase requires an integer quantity, got "+o+", ignoring."),!1;if(1>u||100<u)return t.error("logPurchase requires a quantity >1 and <100, got "+u+", ignoring."),!1;if(e=e.toUpperCase(),-1==="AED AFN ALL AMD ANG AOA ARS AUD AWG AZN BAM BBD BDT BGN BHD BIF BMD BND BOB BRL BSD BTC BTN BWP BYR BZD CAD CDF CHF CLF CLP CNY COP CRC CUC CUP CVE CZK DJF DKK DOP DZD EEK EGP ERN ETB EUR FJD FKP GBP GEL GGP GHS GIP GMD GNF GTQ GYD HKD HNL HRK HTG HUF IDR ILS IMP INR IQD IRR ISK JEP JMD JOD JPY KES KGS KHR KMF KPW KRW KWD KYD KZT LAK LBP LKR LRD LSL LTL LVL LYD MAD MDL MGA MKD MMK MNT MOP MRO MTL MUR MVR MWK MXN MYR MZN NAD NGN NIO NOK NPR NZD OMR PAB PEN PGK PHP PKR PLN PYG QAR RON RSD RUB RWF SAR SBD SCR SDG SEK SGD SHP SLL SOS SRD STD SVC SYP SZL THB TJS TMT TND TOP TRY TTD TWD TZS UAH UGX USD UYU UZS VEF VND VUV WST XAF XAG XAU XCD XDR XOF XPD XPF XPT YER ZAR ZMK ZMW ZWL".split(" ").indexOf(e))return t.error("logPurchase requires a valid currencyCode, got "+e+", ignoring."),!1;if(c=rt(ch(s,"logPurchase","purchaseProperties",'log purchase "'+n+'"',"purchase")),o=c.next().value,c=c.next().value,!o)return!1;if(o=r.Kd(n,h,e,u,c),o.h)for(t.info("Logged "+u+" purchase"+(1<u?"s":"")+' of "'+n+'" for '+e+" "+h+"."),e=0;e<o.j.length;e++)f.pa(it.fd,[n,s],o.j[e]);return o.h}},qa:function(){if(i())return e.qa()},Ka:function(){if(i())return e.Ka()},Id:function(n,t,r){i()&&(o("isPushGranted","method","isPushPermissionGranted"),e.Id(n,t,r))},Mb:function(){if(i())return e.Mb()},ph:function(n,t,u){if(i())return e.subscribe(u,function(t,i,u){r.tb();"function"==typeof n&&n(t,i,u)},t)},Uh:function(n,t){if(i())return e.unsubscribe(n,t)},Tb:function(n){if(i())return""===n||!dt(n,"set signature","signature",!1)?!1:(d.Tb(n),!0)},Xd:function(n){if(i())return d.Xd(n)},Sh:function(){i()&&(o("trackLocation","method"),ht.watchPosition())},zd:function(n){if(i()){if(!ft(n))return t.error("Cannot set SDK metadata because metadata is not an array."),!1;for(var f=rt(n),u=f.next();!u.done;u=f.next())if(!ti(gs,u.value,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;return r.zd(n),!0}},Mh:function(){o("stopWebTracking","method","disableSDK");null!=r&&r.tb();var n=new ui(null,!0);n.store("ab.optOut","This-cookie-will-expire-in-"+ge(n));n=wt.ba;new ct(n).setItem(n.G.xb,n.kb,!0);k();b=!0},bh:function(){null!=r&&r.tb();var n=new ui(null,!0);n.store("ab.optOut","This-cookie-will-expire-in-"+ge(n));n=wt.ba;new ct(n).setItem(n.G.xb,n.kb,!0);k();b=!0},vh:function(){o("resumeWebTracking","method","enableSDK");new ui(null,!0).remove("ab.optOut");var n=wt.ba;pu(new ct(n),n.G.xb,n.kb);k()},dh:function(){new ui(null,!0).remove("ab.optOut");var n=wt.ba;pu(new ct(n),n.G.xb,n.kb);k()},mh:function(){return!!new ui(null,!0).Z("ab.optOut")},Xh:function(){if(null==et)throw Error("Appboy must be initialized before calling methods.");et.clearData();for(var t=ki(wt),n=0;n<t.length;n++)new ct(wt[t[n]]).clearData();v&&(h.clearData(!0),f.clearData(!0))}}},o={};for(var ca in f)o[ca]=f[ca];o.initialize=h.Hd;o.destroy=h.Jb;o.getDeviceId=h.gh;o.toggleAppboyLogging=h.Yd;o.setLogger=h.Td;o.openSession=h.Lc;o.changeUser=h.$a;o.getUser=h.rb;o.requestImmediateDataFlush=h.tb;o.requestFeedRefresh=h.Nc;o.getCachedFeed=h.Fc;o.subscribeToFeedUpdates=h.uf;o.requestContentCardsRefresh=h.Na;o.getCachedContentCards=h.pb;o.subscribeToContentCardsUpdates=h.tf;o.logCardImpressions=h.Ma;o.logCardClick=h.La;o.logCardDismissal=h.Hc;o.logFeedDisplayed=h.jf;o.logContentCardsDisplayed=h.hf;o.logInAppMessageImpression=h.Qb;o.logInAppMessageClick=h.Jc;o.logInAppMessageButtonClick=h.Ic;o.logInAppMessageHtmlClick=h.Pb;o.subscribeToNewInAppMessages=h.Ph;o.subscribeToInAppMessage=h.vf;o.removeSubscription=h.N;o.removeAllSubscriptions=h.K;o.logCustomEvent=h.Jd;o.logPurchase=h.Kd;o.isPushSupported=h.qa;o.isPushBlocked=h.Ka;o.isPushGranted=h.Id;o.isPushPermissionGranted=h.Mb;o.registerAppboyPushMessages=h.ph;o.unregisterAppboyPushMessages=h.Uh;o.setSdkAuthenticationSignature=h.Tb;o.subscribeToSdkAuthenticationFailures=h.Xd;o.trackLocation=h.Sh;o.addSdkMetadata=h.zd;o.stopWebTracking=h.Mh;o.disableSDK=h.bh;o.resumeWebTracking=h.vh;o.enableSDK=h.dh;o.wipeData=h.Xh;o.isDisabled=h.mh;for(yu in o)"object"==typeof gr?gr[yu]=o[yu]:ha[yu]=o[yu];return oi="object"==typeof gr?gr:ha,li=new function(n,i){var l=!1,r=!1,f=!1,o=!1,s=null,h=null,e=null,u=null;return n.Oh(function(t){function h(n){var i,t,r;if(27===n.keyCode&&!f&&0<document.querySelectorAll(".ab-modal-interactions").length){for(n=document.getElementsByClassName("ab-html-message"),i=!1,t=0;t<n.length;t++)r=n[t].contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0],null!=r&&(ic(r),i=!0);i||(n=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0],null!=n&&ic(n))}}if(l=t[c.pg]||!1,r=t[c.og]||t[c.qg]||!1,f=t[c.tg]||!1,o=t[c.fe]||!1,!0===t[c.Zd]&&(o=!0),s=null,e=t[c.be]||null,u=t[c.bg]||null,t[c.Xf]||null!==document.querySelector('link[rel=stylesheet][href="https://use.fontawesome.com/7f85a56ba4.css"]')||(t=document.createElement("link"),t.setAttribute("rel","stylesheet"),t.setAttribute("href","https://use.fontawesome.com/7f85a56ba4.css"),document.getElementsByTagName("head")[0].appendChild(t)),t="ab-css-definitions-"+"3.5.0".replace(/\./g,"-"),null==document.getElementById(t)){var i=document.createElement("style");i.innerHTML=ho.$e;i.id=t;null!=e&&i.setAttribute("nonce",e);document.getElementsByTagName("head")[0].appendChild(i)}f||(document.addEventListener("keydown",h,!1),n.Nh(function(){document.removeEventListener("keydown",h)}))}),{Tg:function(){return null==s&&(s=n.vf(function(t){n.display.sf(t)})),s},sf:function(r,s,h){var y,a,w,v,c,b;if(null==r)return!1;if(r instanceof ar)return t.info("User received control for a multivariate test, logging to Braze servers."),n.Qb(r),!0;if(!(r instanceof p))return!1;if(y=r instanceof yi,y&&!r.Th&&!o)return t.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for appboy.initialize to enable these messages.'),n.M(r,st.ge),!1;if(null==s&&(s=document.body),r.Ja()&&0<s.querySelectorAll(".ab-modal-interactions").length)return t.info("Cannot show in-app message '"+r.message+"' because another message is being shown."),n.M(r,st.Bf),!1;if(at.nh()&&(a=at.hh(),a===at.Sa.jc&&r.orientation===hf||a===at.Sa.Zc&&"PORTRAIT"===r.orientation))return t.info("Not showing "+("PORTRAIT"===r.orientation?"portrait":"landscape")+" in-app message '"+r.message+"' because the screen is currently "+(a===at.Sa.jc?"portrait":"landscape")),n.M(r,st.rg),!1;if(!o){if(a=!1,r.buttons&&0<r.buttons.length)for(w=r.buttons,v=0;v<w.length;v++)w[v].clickAction===su&&(a=co(w[v].uri));else r.clickAction===su&&(a=co(r.uri));if(a)return t.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for appboy.initialize to enable these actions.'),n.M(r,st.ge),!1}return c=document.createElement("div"),c.className="ab-iam-root v3",c.className+=r.oa(),c.setAttribute("role","complementary"),uf(r)&&(c.id=r.htmlId),u&&(c.style.zIndex=u+1),s.appendChild(c),si(r)&&(s=document.createElement("style"),s.innerHTML=r.css,s.id=ff(r),null!=e&&s.setAttribute("nonce",e),document.getElementsByTagName("head")[0].appendChild(s)),b=r instanceof pr,s=r.aa(n,i,function(){n.display.Vd()},function(t){var i,s,e,o;if(r.Ja()&&r.xf())i=document.createElement("div"),i.className="ab-page-blocker",si(r)||(i.style.backgroundColor=fi(r.frameColor)),u&&(i.style.zIndex=u),c.appendChild(i),f||(s=(new Date).valueOf(),i.onclick=function(n){200<(new Date).valueOf()-s&&(vi(r,t),n.stopPropagation())}),c.appendChild(t),t.focus(),r.Kc(c);else if(b){for(e=document.querySelectorAll(".ab-slideup"),i=null,o=e.length-1;0<=o;o--)if(e[o]!==t){i=e[o];break}"TOP"===r.slideFrom?(e=0,null!=i&&(e=i.offsetTop+i.offsetHeight),t.style.top=Math.max(e,0)+"px"):(e=0,null!=i&&(e=(window.innerHeight||document.documentElement.clientHeight)-i.offsetTop),t.style.bottom=Math.max(e,0)+"px")}else y&&!f&&t.contentWindow.addEventListener("keydown",function(n){27===n.keyCode&&r.Ye()});n.Qb(r);r.dismissType===fo&&setTimeout(function(){c.contains(t)&&vi(r,t)},r.duration);"function"==typeof h&&h()},l,u),(y||b)&&(c.appendChild(s),r.Kc(c)),!0},Vd:function(i,u,f){function c(t){for(var u=t.querySelectorAll(".ab-feed"),i=null,r=0;r<u.length;r++)u[r].parentNode===t&&(i=u[r]);null!=i?(wr(n,i),i.parentNode.replaceChild(o,i)):t.appendChild(o);setTimeout(function(){o.className=o.className.replace("ab-hide","ab-show")},0);l&&o.focus();n.jf();lf(e,n,o)}function s(n,t){var u,i,f,r;if(null==t)return n;for(u=[],i=0;i<t.length;i++)u.push(t[i].toLowerCase());for(t=[],i=0;i<n.length;i++){for(f=[],r=0;r<n[i].categories.length;r++)f.push(n[i].categories[r].toLowerCase());0<pa(f,u).length&&t.push(n[i])}return t}var l=!1,h,e,o,a;null==i&&(i=document.body,l=!0);h=!1;e=null;null==u?(e=n.Fc(),af(e,s(e.cards,f),e.lastUpdated,null,n,r),h=!0):e=new ci(s(u,f),new Date);o=e.aa(n,r);h&&((null==e.lastUpdated||6e4<(new Date).valueOf()-e.lastUpdated.valueOf())&&(t.info("Cached feed was older than max TTL of 60000 ms, requesting an update from the server."),ao(e,n,o)),a=(new Date).valueOf(),u=n.uf(function(t){var u=o.querySelectorAll(".ab-refresh-button")[0],i,h;null!=u&&(i=500,h=parseInt(o.getAttribute(vf)),i=isNaN(h)?i-((new Date).valueOf()-a):i-((new Date).valueOf()-h),setTimeout(function(){u.className=u.className.replace(/fa-spin/g,"")},Math.max(i,0)));af(e,s(t.cards,f),t.lastUpdated,o,n,r)}),o.setAttribute(vo,u));null!=i?c(i):window.onload=function(n){return function(){"function"==typeof n&&n();c(document.body)}}(window.onload)},af:function(){for(var i=document.querySelectorAll(".ab-feed"),t=0;t<i.length;t++)wr(n,i[t])},Rh:function(t,i,r){0<document.querySelectorAll(".ab-feed").length?n.display.af():n.display.Vd(t,i,r)},rf:function(i,u){function o(t){for(var u=t.querySelectorAll(".ab-feed"),i=null,r=0;r<u.length;r++)u[r].parentNode===t&&(i=u[r]);null!=i?(wr(n,i),i.parentNode.replaceChild(f,i)):t.appendChild(f);setTimeout(function(){f.className=f.className.replace("ab-hide","ab-show")},0);s&&f.focus();n.hf();lf(e,n,f)}var s=!1,e,f,c,l;null==i&&(i=document.body,s=!0);e=null;e=n.pb();"function"==typeof u&&af(e,u(e.cards.slice()),e.lastUpdated,null,n,r);f=e.aa(n,r);(null==e.lastUpdated||6e4<(new Date).valueOf()-e.lastUpdated.valueOf())&&(null==h||6e4<(new Date).valueOf()-h.valueOf())&&(t.info("Cached content cards were older than max TTL of 60000 ms, requesting a sync from the server."),ao(e,n,f),h=(new Date).valueOf());c=(new Date).valueOf();l=n.tf(function(t){var o=f.querySelectorAll(".ab-refresh-button")[0],i,s;null!=o&&(i=500,s=parseInt(f.getAttribute(vf)),i=isNaN(s)?i-((new Date).valueOf()-c):i-((new Date).valueOf()-s),setTimeout(function(){o.className=o.className.replace(/fa-spin/g,"")},Math.max(i,0)));i=t.cards;"function"==typeof u&&(i=u(i.slice()));af(e,i,t.lastUpdated,f,n,r)});f.setAttribute(vo,l);null!=i?o(i):window.onload=function(n){return function(){"function"==typeof n&&n();o(document.body)}}(window.onload)},gf:function(t){for(var r=document.querySelectorAll(".ab-feed"),i=0;i<r.length;i++)(null==t||null!=t&&r[i].parentNode===t)&&wr(n,r[i])},Qh:function(t,i){0<document.querySelectorAll(".ab-feed").length?n.display.gf():n.display.rf(t,i)}}}(h,oi),oi.display={},oi.display.automaticallyShowNewInAppMessages=li.Tg,oi.display.showInAppMessage=li.sf,oi.display.showFeed=li.Vd,oi.display.destroyFeed=li.af,oi.display.toggleFeed=li.Rh,oi.display.showContentCards=li.rf,oi.display.hideContentCards=li.gf,oi.display.toggleContentCards=li.Qh,h.display=li,gr})}).call(window)});window.appboy=l;var t="Appboy",r="v3",u=28,a="3.0.8",i={PageView:3,PageEvent:4,Commerce:16},h={"01":"sdk.iad-01.braze.com","02":"sdk.iad-02.braze.com","03":"sdk.iad-03.braze.com","04":"sdk.iad-04.braze.com","05":"sdk.iad-05.braze.com","06":"sdk.iad-06.braze.com","08":"sdk.iad-08.braze.com",EU:"sdk.fra-01.braze.eu",EU02:"sdk.fra-02.braze.eu"},f=function(){function nt(t){var i=!1;return t.ProductAction.ProductList&&t.ProductAction.ProductList.forEach(function(r){var u,h,e,o;if(r.Attributes==null&&(r.Attributes={}),r.Attributes.Sku=r.Sku,u=n.forwardSkuAsProductName==="True"?s(String(r.Sku)):s(String(r.Name)),h=p(r.Attributes,{"Transaction Id":t.ProductAction.TransactionId}),e=y(h),e==null)return"Properties did not pass validation for "+u;o=parseFloat(r.Price);f("appboy.logPurchase",u,o,t.CurrencyCode,r.Quantity,e);i=appboy.logPurchase(u,o,t.CurrencyCode,r.Quantity,e)}),i===!0}function tt(t){var i,r,e,u=t.EventAttributes||{},o;return u.hostname=window.location.hostname,u.title=window.document.title,e=n.setEventNameForPageView==="True"?t.EventName:window.location.pathname,i=s(e),r=y(u),f("appboy.logCustomEvent",i,r),o=appboy.logCustomEvent(i,r),o===!0}function w(n,i){var u,r,e;if(n==="dob")if(i instanceof Date)f("appoy.getUser().setDateOfBirth",i.getFullYear(),i.getMonth()+1,i.getDate()),appboy.getUser().setDateOfBirth(i.getFullYear(),i.getMonth()+1,i.getDate());else return"Can't call removeUserAttribute or setUserAttribute on forwarder "+t+", removeUserAttribute or setUserAttribute must set 'dob' to a date";else if(n==="$Age")if(typeof i=="number")u=(new Date).getFullYear()-i,f("appboy.getUser().setDateOfBirth",u,1,1),appboy.getUser().setDateOfBirth(u,1,1);else return"$Age must be a number";else{if(i==null&&(i=""),!(typeof i=="string"))return"Can't call removeUserAttribute or setUserAttribute on forwarder "+t+", removeUserAttribute or setUserAttribute must set this value to a string";if(r=[],r.push(i),f("appboy.getUser()."+l[n],r),e=appboy.getUser(),!e[l[n]].apply(e,r))return"removeUserAttribute or setUserAttribute on forwarder "+t+" failed to call, an invalid attribute value was passed in"}}function b(n){var t=s(n.EventName),i=y(n.EventAttributes),r;return i==null?"Properties did not pass validation for "+t:(f("appboy.logCustomEvent",t,i),r=appboy.logCustomEvent(t,i),r===!0)}function it(r){var u=!1,f,e,o;if(r.EventDataType==i.Commerce&&r.EventCategory==mParticle.CommerceEventType.ProductPurchase)u=nt(r);else if(r.EventDataType==i.Commerce){if(f=mParticle.eCommerce.expandCommerceEvent(r),f!=null){for(e=0;e<f.length;e++){o=!1;try{u=b(f[e]);u===!0&&(o=!0)}catch(s){return"Error logging page event"+s.message}}u=o===!0}}else if(r.EventDataType==i.PageEvent)u=b(r);else if(r.EventDataType==i.PageView)n.forwardScreenViews=="True"&&(u=tt(r));else return"Can't send event type to forwarder "+t+", event type is not supported";u===!0&&v&&v(c,r)}function rt(n){if(n in l)return w(n,null);var t=s(n);f("appboy.getUser().setCustomUserAttribute",t,null);appboy.getUser().setCustomUserAttribute(t,null)}function ut(n,t){if(n in l)return w(n,t);var r=s(n),i=s(t);if(t!=null&&i==null)return"Value did not pass validation for "+n;f("appboy.getUser().setCustomUserAttribute",r,i);appboy.getUser().setCustomUserAttribute(r,i)}function ft(n,i){if(window.mParticle.getVersion().split(".")[0]==="1")if(i==window.mParticle.IdentityType.CustomerId)f("appboy.changeUser",n),appboy.changeUser(n);else if(i==window.mParticle.IdentityType.Email)f("appboy.getUser().setEmail",n),appboy.getUser().setEmail(n);else return"Can't call setUserIdentity on forwarder "+t+", identity type not supported."}function et(t){var r,i=t.getUserIdentities().userIdentities;r=n.userIdentificationType==="MPID"?t.getMPID():i[n.userIdentificationType.toLowerCase()];f("appboy.changeUser",r);appboy.changeUser(r);i.email&&(f("appboy.getUser().setEmail",i.email),appboy.getUser().setEmail(i.email))}function ot(){appboy.subscribeToInAppMessage(function(t){var r=!0,i=!1,u;t instanceof appboy.InAppMessage&&(u=t.extras["msg-id"],u=="push-primer"&&(i=!0,(!appboy.isPushSupported()||appboy.isPushPermissionGranted()||appboy.isPushBlocked())&&(r=!1),t.buttons[0]!=null&&t.buttons[0].subscribeToClickedEvent(function(){appboy.registerAppboyPushMessages()})));(i&&r||!i&&n.register_inapp==="True")&&appboy.display.showInAppMessage(t)})}function st(n){appboy.openSession();n.softPushCustomEventName&&(f("appboy.logCustomEvent",n.softPushCustomEventName),appboy.logCustomEvent(n.softPushCustomEventName))}function ht(i,r,f,e,s,l,y,p,w){var b,g,nt;console.warn("mParticle now supports V4 of the Braze SDK. This is an opt-in update, and we recommend you opt in to get the latest bug fixes and features from Braze.  Please see https://docs.mparticle.com/integrations/braze/event for more information and necessary upgrade steps when you decide to opt in.");c.logger||(c.logger={verbose:function(){}});a=w;try{if(n=i,v=r,o.sessionTimeoutInSeconds=n.ABKSessionTimeoutKey||1800,o.sdkFlavor="mparticle",o.enableHtmlInAppMessages=n.enableHtmlInAppMessages=="True",o.doNotLoadFontAwesome=n.doNotLoadFontAwesome=="True",n.safariWebsitePushId&&(o.safariWebsitePushId=n.safariWebsitePushId),n.serviceWorkerLocation&&(o.serviceWorkerLocation=n.serviceWorkerLocation),b=n.cluster||n.dataCenterLocation,h.hasOwnProperty(b)?o.baseUrl=h[b]:(g=d(b),g&&(o.baseUrl=g)),a&&a[u.toString()]&&(nt=a[u.toString()],typeof nt.initOptions=="function"&&nt.initOptions(o)),f!==!0)appboy.initialize(n.apiKey,o),k(n);else{if(!appboy.initialize(n.apiKey,o))return"Failed to initialize: "+t;k(n)}return"Successfully initialized: "+t}catch(tt){return"Failed to initialize: "+t+" with error: "+tt.message}}function k(n){appboy.addSdkMetadata(["mp"]);ot();st(n)}function d(n){var i,t;if(n){i=n.replace(/&amp;/g,"&");i=n.replace(/&quot;/g,'"');try{if(t=JSON.parse(i),t&&t.JS)return"https://"+t.JS+"/api/v3"}catch(r){console.log("Unable to configure custom Appboy cluster: "+r.toString())}}}function g(n){return typeof n=="string"?n.substr(0,1)==="$"?n.replace(/^\$+/g,""):n:null}function s(n){var t,r,u,i;if(typeof n=="string")return g(n);if(Array.isArray(n)){t=[];for(r in n){if(u=n[r],i=g(u),i==null)return null;t.push(i)}return t}return n}function y(n){var r={},t,u,f,i;if(n==null&&(n={}),typeof n!="object")return null;for(i in n)t=n[i],u=s(i),f=typeof t=="string"?s(t):t,r[u]=f;return r}function f(n){var t="mParticle - Braze Web Kit log:",i=Array.prototype.slice.call(arguments,1);t+="\n"+n+":\n";i.forEach(function(n){t+=e(n)||Array.isArray(n)?JSON.stringify(n):n;t+=",\n"});c.logger.verbose(t)}var c=this,n,o={},v,a,l;c.name=t;c.suffix=r;l={$LastName:"setLastName",$FirstName:"setFirstName",Email:"setEmail",$Gender:"setGender",$Country:"setCountry",$City:"setHomeCity",$Mobile:"setPhoneNumber",$Age:"setDateOfBirth",last_name:"setLastName",first_name:"setFirstName",email:"setEmail",gender:"setGender",country:"setCountry",home_city:"setHomeCity",email_subscribe:"setEmailNotificationSubscriptionType",push_subscribe:"setPushNotificationSubscriptionType",phone:"setPhoneNumber",image_url:"setAvatarImageUrl",dob:"setDateOfBirth"};this.init=ht;this.process=it;this.setUserIdentity=ft;this.setUserAttribute=ut;this.onUserIdentified=et;this.removeUserAttribute=rt;this.decodeClusterSetting=d};window&&window.mParticle&&window.mParticle.addForwarder&&window.mParticle.addForwarder({name:t,constructor:f,getId:v,suffix:r});var o={register:y,getVersion:function(){return a}},w=o.register,b=o.getVersion;return n.default=o,n.getVersion=b,n.register=w,n}({}) ;;
; window.mParticle.config.kitConfigs.push({"name":"Appboy","moduleId":28,"isDebug":false,"isVisible":true,"isDebugString":"false","hasDebugString":"true","settings":{"enableHtmlInAppMessages":"True","forwardScreenViews":"False","abkMinimumTriggerTimeIntervalKey":null,"abkCollectIDFA":"False","abkSessionTimeoutKey":null,"abkRequestProcessingPolicyOptionKey":null,"abkFlushIntervalOptionKey":null,"singleItemEventAttributeList":"","softPushCustomEventName":null,"doNotLoadFontAwesome":"False","safariWebsitePushId":null,"serviceWorkerLocation":null,"abkDisableAutomaticLocationCollectionKey":"False","userIdentificationType":"MPID","includeEnrichedUserAttributes":"False","cluster":"EU","includeEnrichedUserIdentities":"False","enableEventStreamForwarding":"False","enableAttributeTypeDetection":"None","enableTypeDetection":"False","userTagsValue":"true","sendSessionInformation":"True","sendListsAsArrays":"False","emailIdentificationType":"Email","setEventNameForPageView":"False","forwardSkuAsProductName":"False","bundleCommerceEventData":"False","removeEventAttributeList":"","addEventAttributeList":"","register_inapp":"True","push_enabled":"True","apiKey":"26921ef9-e031-4c11-bf00-75acff0d6abb"},"screenNameFilters":[],"screenAttributeFilters":[],"userIdentityFilters":[],"userAttributeFilters":[321979735,96404,-503427957,967647055,320462652,-1203934540,-1590851874,1098500051,-1239497754,-14754636,-1972881686,-1174311203,-793183188,1181124997,96894,-680017712,-646569309,-1259241699,208049600,-184184051,1589278162,117857281,-2039009705,1847674306,1178012727,-479415443,2083788458,-1090985332,3056811,-1919381379,-921815482,1856846075,-1181815352,873566745,-1208180587,-255876982,-623597183,1247303932,581095770,1530050284,2011894491,-485568299,-1330257118,1775616512,-1125232537,638230974,337929862,-256769295,-1020697732,2106610769,54956836,-160985414,133788987,-1368935733,98179115,-259642434,1576656304,-1072374757,756548059,800111998,1639909177,37357148,-1635674851,-1613589672,-1341638856,-2089124730,-210002852,220329083,342609000,724070001,-1858371360,-1458646495,24832508,2132327650,-746264094,-691276496,-1032818867,1148663705,1644170085,1994737563,95121957,373843002,-1285159687,-616537966,1956169220,-975783785,-1775267877,804360972,-1774969815,812700028,-1183812096,523199021,-900750757,525992374,1957330657,1906913288,1957344111,-1183783069,-96966134,553371001,1958135293,-1467230327,1958437273,1084261757,-1373490535,-1829380770,-1829116324,635576294,1536041264,-1168025919,-1285108877,-1183666985,-1400880726,-506102621,-767182743,-1183632151,-1183630271,804390416,827711783,867786312,-2142347587,-450760751,787000693,-1833351578,-1183396324,723302492,1969951960,1970370535,1970539131,999371859,-1547247003,1938578479,930975984,999874200,1031141589,1973153577,1973163606,682740388,-890106222,-1324052073,1042388788,-1183269018,-1183246692,408229560,212109249,2133550137,1021116185,181411573,1975712735,1118062918,1975729902,1469085447,1150177992,1514458947,1976968004,1681808686,-1715809185,-1248253260,-2121408119,-871822274,-1193548886,2039668246,2005689788,332955551,-2073421171,-1729194753,779763622,-351190109,1665040557,133908132,-1725774229,-1917225367,-1970213275,-947069281,-881419309,-49179039,-101259401,267119002,-212915373,897735577,-1821080931,684887428,692234397,259876077,931839978,-1795691547,1857745695,-436710008,-1685629188,-686829524,-1650875000,1153949079,1048466507,-854192554,-1855642571,-631047415,-1207506589,-1652042063,-1160491384,1068682242,1084319237,-1852527784,1048631410,-1507811188,1091646010,-677486466,109770977,1692421710,-1346445083,1767782590,573929281,-64687999,-1539894552,1889642278,2071166924,833459293,431834910],"eventNameFilters":[1736309957,-129322450,-2008519246,1648844485,-319677905,-161282681,587355689,375653072,-1273394355,-1496695780,-1315747770,-1619200288,-1619200371,910748631,2146561075,2146561070,-2115123656,365062074,365062069,1850287784,306616130,-2144588173,1494301731,-109960745,-401100448,-1063684551,-148555929,-887337009,628071392,-109701275,986537299,-929974924,1076229087,30611106,-2057711599,-1150422444,-410095573,-2139501596,-2008694072,916659449,-734546755,-2048640326,-1501673676,336242772,47885506,1400432508,1706381873,358356395,-2008481767,547037414,-1494469002,82804229,-1980370654,562385954,-2008842907,1044736671,1228304274,-386111240,1736318731,-1197140594,-343135643,1971262067,1846416952,1344396083,997563738,-1297550199,1171551963,-220019957,-1841610692,1907012269,568750328,1800155771,2047043670,-977112444,1846702114,-1124464969,-2130442253,-2048630144,-1244864846,-2126572141,403834066,-17101976],"eventTypeFilters":[49,51,53,54,55,56,57,1571,1573,1600],"attributeFilters":[325985475,446585011,2118899338,-1180197654,-59327359,1254580524,1687626365,-1689881626,-31237968,-1335740749,-814795638,-1225115461,289262316,2027181962,1616419051,-1792980304,55817360,1801416050,-1081596193,-1793137350,1296170632,78281009,1822903173,2072305672,458318216,1977544654,-1603989345,1324788555,-1356947669,1755011842,-1430196245,-817962353,-452275234,-83986568,-757410165,1834761195,-820435006,-284687135,804173368,-469967355,-1578449359,433031260,432882305,-1131111636,-613113110,-183520201,-1530737866,-270434528,707169141,983531230,2032585400,840385475,-1815044173,707020186,16442149,334515260,629976278,-689894703,-594062056,-1307713090,-1224292608,1559034427,2111752305,85066693,-1787617764,1219608632,-483356959,-1036183595,-2048800124,-1033433228,-584312817,971997573,-492410469,-1705829641,-19367204,987095621,1679901689,-379584972,1578608705,1114918136,1196349946,-1813249880,1619631461,1222406993,-1542624736,359544810,1923998227,-881746077,-1926029030,-847876119,1914623373,1089813249,-1168197060,1284392821,357018565,935616397,1279418729,1935945884,73628646,-1514080853,1206584144,-412381825,-1843926001,-35736345,782086078,-355579412,2015120997,-990697779,-344132707,1228458457,-927892067,1265919202,-695065356,-577257717,668809158,774352295,1122032784,-1722167049,799693270,-295094017,-1614438984,441440373,-978744354,268190083,1339733858,322605130,-2034672798,1052848899,-61222574,642354820,1144802459,-624102761,-1009738686,-232208205,-365029782,-1490804042,1855211999,469342180,1685795529,845652274,-199090324,-409104236,1680304754,478181284,827173290,1797391878,131012034,1260760586,-909539376,1255360933,-1454116295,536993971,189824721,2095376573,-1020528999,-950197373,-443651040,-407792010,-1551259379,1126048432,897139441,719959139,1271299686,715614795,697709030,48674853,-1339827006,635376106,709901331,-1732306787,-596409575,-1877712272,-708619107,1915657734,-245269872,2086598438,1739429188,2093909339,-761662800,-1430883954,-1764314579,-1914681724,-1260216055,1090623391,-374666873,-1265755406,-1254308701,185814457,620428067,1981742355,-1760825130,-1547467140,-1545321986,-745333962,460533536,961373239,-1229212367,-1351987451,333789532,1935885577,-494329212,1689816621,101187898,1036232604,488229811,-1687015275,1273088441,1743300721,730405848,1821054087,-703457907,-297715056,-1374742193,95044220,1639529441,-329449494,-872687228,590821875,1221086354,1268002536,-678637051,1979697445,-524555488,866699789,-326338698,413538885,-1273310052,-603643407,744772335,-1180917890,-1534505000,-1666790992,333488870,1274089853,861180737,-1076508631,654989417,-524097739,28881867,-1282214175,511976648,-724765118,-1435856397,-1565934248],"githubPath":null,"filteringEventAttributeValue":null,"filteringUserAttributeValue":null,"filteringConsentRuleValues":null,"consentRegulationFilters":[49,50],"consentRegulationPurposeFilters":[-1972997867,1573768,-1267328524],"messageTypeFilters":[1576],"messageTypeStateFilters":[49,50,51,52,53,54],"eventSubscriptionId":1613,"excludeAnonymousUser":true,"suffix":"v3"});;
; window.mParticle.config.kitConfigs.push({"name":"Facebook","moduleId":45,"isDebug":false,"isVisible":true,"isDebugString":"false","hasDebugString":"true","settings":{"applicationId":null,"applicationSecret":null,"pixelId":"1263319854288554","activateStrategy":"ast","limitEventAndDataUsage":"False","sendPurchaseProductData":"False","pixelAccessToken":"EAAIDpofWMGMBO6mhNKmTQlJlTZCpYlNfGgcTW1x6XNEeyneqe6ZAAPMEEr4ZA5qatXHhaHu5ux3rrLjUrbcrI74RZCTSpGYnwQdFPxArb9yCXjCQIb76WO1ZCeovMHciVudzpDMSEt5vNND8Dpx0jV3PRA6fa6HfSB6sa8iHv4LwpKGZCv6tGQ4LuiOdWjhQZDZD","externalUserIdentityType":"CustomerId","pixelForwardingEnabled":"False","forwardWebRequestsServerSide":"False","lduDataProcessing":"AlwaysDisabled","defaultActionSource":"other","disablePushState":"False","emailIdentityType":"Email"},"screenNameFilters":[],"screenAttributeFilters":[],"userIdentityFilters":[],"userAttributeFilters":[],"eventNameFilters":[],"eventTypeFilters":[48,49,50,51,52,53,54,55,56,57],"attributeFilters":[],"githubPath":null,"filteringEventAttributeValue":null,"filteringUserAttributeValue":null,"filteringConsentRuleValues":null,"consentRegulationFilters":[],"consentRegulationPurposeFilters":[],"messageTypeFilters":[],"messageTypeStateFilters":[],"eventSubscriptionId":5472,"excludeAnonymousUser":false,"suffix":null});;
window.mParticle.config.requestConfig = false;;
mParticle.init('eu1-ebd2cad076757c498ce604d818b0d8ae', window.mParticle.config);;